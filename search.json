[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ComplÃ©ments dâ€™informatiques",
    "section": "",
    "text": "Note\n\n\n\nLe but de ce cours est de vous aider Ã  mener Ã  bien le projet informatique."
  },
  {
    "objectID": "index.html#contenu",
    "href": "index.html#contenu",
    "title": "ComplÃ©ments dâ€™informatiques",
    "section": "Contenu",
    "text": "Contenu\n\nGit\nRappels POO\nTests unitaires\nWebservices\nCommuniquer avec une base de donnÃ©es\nUtiliser les logs"
  },
  {
    "objectID": "doc/tp/tp1.html",
    "href": "doc/tp/tp1.html",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "",
    "text": "Ce TP mÃªle explications et phases de code.\nLes explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissance pour plus tard, mais prÃ©fÃ©rez toujours les explications orales."
  },
  {
    "objectID": "doc/tp/tp1.html#avant-de-commencer",
    "href": "doc/tp/tp1.html#avant-de-commencer",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "",
    "text": "Ce TP mÃªle explications et phases de code.\nLes explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissance pour plus tard, mais prÃ©fÃ©rez toujours les explications orales."
  },
  {
    "objectID": "doc/tp/tp1.html#introduction-et-mise-en-place",
    "href": "doc/tp/tp1.html#introduction-et-mise-en-place",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "1 Introduction et mise en place",
    "text": "1 Introduction et mise en place\nVous allez crÃ©er les objets mÃ©tier pour un jeu PokÃ©mon.\nUn objet mÃ©tier reprÃ©sente dans votre code quelque chose de concret, qui modÃ¨lise la rÃ©alitÃ©.\n\nObjet mÃ©tier (business object) : reprÃ©sentation informatique dâ€™un objet â€œrÃ©elâ€ que notre programme va manipuler pour rÃ©pondre Ã  un besoin. Dans le cas de notre application cela sera des PokÃ©mons, des attaques ou des objets.\nDans une application de e-commerce par exemple, les articles et comptes sont des objets mÃ©tier. Ils permettent de sÃ©parer les donnÃ©es de lâ€™application et les traitements. Cela conduit Ã  avoir des objets contenant essentiellement des attributs et trÃ¨s peu de mÃ©thodes autre que des getter et setter.\n\nCe TP sera rÃ©alisÃ© avec lâ€™IDE (Integred Development Environment) Visual Studio Code.\n\n1.1 Importez le code du TP\n\nOuvrez Git Bash\nCrÃ©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, puis collez lÃ  dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP1 && cd $_\n\nClonez le dÃ©pÃ´t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAller dans /p/Cours2A/UE3_Complements_informatique/TP/TP1/ (ou dans le dossier oÃ¹ se situe le dÃ©pÃ´t que vous venez de cloner)\ncliquer sur ENSAI-2A-complement-info-TP, puis sur le bouton SÃ©lectionner un dossier\nâš ï¸ câ€™est trÃ¨s important de suivre trÃ¨s prÃ©cisÃ©ment ces consignes, sinon vous risquez dâ€™avoir des soucis dâ€™import !\n\n\n\nLisez le fichier README.md et suivez les instructions. Puis lancez le programme main.py pour vous assurer que tout fonctionne correctement.\n\nOuvrez un terminal dans VSCode (CTRL + Ã¹)\n\ncâ€™est le mÃªme terminal Git Bash que vous avez ouvert au dÃ©but\nmais câ€™est plus pratique dâ€™avoir tout au mÃªme endroit\n\nlistez les branches git branch -a\n\nVous avez la possibilitÃ© de consulter la correction en changeant de branche si et seulement si vous Ãªtes bloquÃ© trop longtemps.\nVoici quelques commandes git utiles :\n# Avant de changer de branches, crÃ©ez un point de sauvegarde de votre travail\ngit add .\ngit commit -am \"&lt;message&gt;\"\n\n# changer de branche\ngit checkout &lt;nouvelle_branche&gt;      # dans le terminal, la branche courante est indiquÃ©Ã©e entre ()\ngit checkout -                       # pour retourner Ã  la branche prÃ©cÃ©dente\n\n\n\n1.2 Ce que vous allez coder\nNotre jeu sâ€™inspirera de PokÃ©mon Unite (aucune connaissance du jeu, ni de PokÃ©mon nâ€™est nÃ©cessaire).\nPour rÃ©sumer en quelques mots, voici les objets que nous allons manipuler :\n\nPokemon : qui ont diverses caractÃ©ristiques et statistiques\n\nhp : health points\nattack, defense, speedâ€¦ : qui serviront dÃ©terminer la force de ses attaques\nun type : Attacker, Defender, All Rounder, Speedster, Supporter\n\nStatistic : pour Ã©viter de surcharger la classe Pokemon, de nombreuses stats sont stockÃ©es dans un objet de la classe Statistic\nAttack : diffÃ©rents types dâ€™attaques dont disposeront les PokÃ©mons (partie 3)\nBattleService : servira Ã  faire sâ€™affronter 2 PokÃ©mons pour dÃ©terminer lâ€™issue du combat (partie 4)"
  },
  {
    "objectID": "doc/tp/tp1.html#modÃ©lisation-et-implÃ©mentation",
    "href": "doc/tp/tp1.html#modÃ©lisation-et-implÃ©mentation",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "2 ModÃ©lisation et implÃ©mentation",
    "text": "2 ModÃ©lisation et implÃ©mentation\n\nDans un premier temps, nous allons coder uniquement les Pokemons (la classe Statistic est dÃ©jÃ  codÃ©e). En fonction de son type, son coefficient dâ€™attaque dÃ©pendra de diverses statistiques.\n\n\n\n\n\n\nclassDiagram\n class Pokemon {\n - __type : String\n - __current_stat : Statistique\n + get_pokemon_attack_coef() float\n }\n \n class Statistic {\n - __hp : int\n - __attaque : int\n - __defense : int\n - __spe_atk : int\n - __spe_def : int\n - __vitesse : int\n }\n Pokemon --&gt; Statistic : possÃ¨de\n\n\n\n\n\n\nAvant dâ€™Ã©crire du code, nous allons rÃ©flÃ©chir Ã  la meilleure conception possible pour rÃ©aliser nos PokÃ©mons. Notre conception essaiera au maximum de respecter la rÃ¨gle suivante : faible couplage, forte cohÃ©sion.\nEn dâ€™autre termes nous allons essayer de faire :\n\ndes classes les plus disjointes possible (faible couplage) pour quâ€™une modification dans une classe ne nous demande pas de modifier les autres\ntout en essayant dâ€™avoir les tÃ¢ches rÃ©alisÃ©es par une seule classe les plus liÃ©es possible (forte cohÃ©sion).\n\n\n2.1 PremiÃ¨re approche : le Â« if/elif/else Â» ğŸ’€\nOuvrez le code, et observez la classe Pokemon. Nous nous interessons Ã  la mÃ©thode get_pokemon_attack_coef() qui va servir Ã  dÃ©terminer la puissance de lâ€™attaque en fonction du type de PokÃ©mon.\n\n\nQuestion 1 : Expliquez pourquoi une implÃ©mentation Ã  base de if/elif/else pour les types est une mauvaise idÃ©e ? Imaginez sâ€™il y avait plusieurs blocs de code similaires dans notre application, et que nous devions ajouter un nouveau type.\n\n\n\n\n\n2.2 La puissance de la POO\nAu lieu dâ€™externaliser les comportements de nos PokÃ©mons, nous allons mettre tous leurs comportements spÃ©cifiques dans des classes filles dâ€™une super classe Pokemon. Ceci est rendu possible grÃ¢ce Ã  deux propriÃ©tÃ©s des objets en POO :\n\nhÃ©ritage : il est possible de spÃ©cialiser une classe existante en modifiant son comportement, ou en ajoutant de nouveaux\npolymorphisme : deux fonctions peuvent avoir le mÃªme nom mais avoir des comportements diffÃ©rents\n\nEn plus, comme chacun de nos PokÃ©mons va forcement Ãªtre dâ€™un type, aucun ne sera simplement de la classe Pokemon, cela nous permet de rendre cette classe abstraite. En dÃ©finissant clairement notre classe abstraite nous allons avoir :\n\nUn plan pour toutes les classes qui en hÃ©ritent. Cela Ã  pour avantages de :\n\nDonner des informations sur la structuration du code\n\nPermettre de gÃ©nÃ©rer automatiquement les mÃ©thodes Ã  dÃ©finir\nLimiter les bug. Si on oublie une mÃ©thode, le code plante au dÃ©marrage, ce qui Ã©vite des comportements non prÃ©vus difficile Ã  dÃ©tecter\n\nUne interface unique pour tous les types de PokÃ©mons. Quelque soit le type du PokÃ©mon, il sera considÃ©rÃ© comme un AbstractPokemon partout dans le code.\n\n\n\n\nQuestion 2 :\n\ntransformez la classe Pokemon en classe abstraite AbstractPokemon\n\nrenommez Ã©galement le fichier en abstract_pokemon.py\n\ntransformez la mÃ©thode get_pokemon_attack_coef() en mÃ©thode abstraite\ncrÃ©ez les classes Attacker, Defender et AllRounder qui hÃ©ritent de AbstractPokemon\ndans ces 3 classes, implÃ©mentez la mÃ©thode get_pokemon_attack_coef()\n\n\n\nPour vous aider, voici le diagramme de classe :\n\n\n\n\n\nclassDiagram\n  class AbstractPokemon {\n    &lt;&lt;abstract&gt;&gt;\n    # _current_stat : Statistique\n    # _level : int\n    # _name : str\n    +get_pokemon_attack_coef() :  float\n  }\n  \n  class BattleService {\n    +resolve_battle() Battle\n  } \n \n  class Statistique {\n    - __hp : int\n    - __attaque : int\n    - __defense : int\n    - __spe_atk : int\n    - __spe_def : int\n    - __vitesse : int\n   }\n \n  AbstractPokemon &lt;|-- Attacker\n  AbstractPokemon &lt;|-- Defender\n  AbstractPokemon &lt;|-- AllRounder\n  AbstractPokemon --* Statistique\n  BattleService ..&gt;\"2\" AbstractPokemon : use\n\n\n\n\n\n\nVous devriez arriver Ã  une arborescence proche de celle-ci :\nğŸ“¦pokemon_unite_lite\n â”£ ğŸ“‚business_object\n â”ƒ â”£ ğŸ“‚pokemon\n â”ƒ â”ƒ â”£ ğŸ“œabstract_pokemon.py\n â”ƒ â”ƒ â”£ ğŸ“œattacker.py\n â”ƒ â”ƒ â”£ ğŸ“œdefender.py\n â”ƒ â”ƒ â”— ğŸ“œall_rounder.py\n â”ƒ â”— ğŸ“œ statistique.py\n â”— ğŸ“‚service\n   â”— ğŸ“œbattle_service.py\nPour faire une classe abstraite, utilisez le package abc.\nVoici, pour vous inspirer, un exemple de ce qui est attendu :\n# Fichier abstract_personnage.py\nfrom abc import ABC, abstractmethod\n\nclass AbstractPersonnage(ABC):\n    def __init__(self, phrase_attaque:str, phrase_defense:str) -&gt; None:\n        self._phrase_attaque = phrase_attaque\n        self._phrase_defense = phrase_defense\n       \n    @abstractmethod # dÃ©corateur qui dÃ©finit une mÃ©thode comme abstraite\n    def degat_attaque(self) -&gt; int:\n     pass\n\n# Fichier magicien.py\nfrom abstract_personnage import AbstractPersonnage\nclass Magicien(AbstractPersonnage):\n    def __init__(self) -&gt; None:\n        super().__init__(\"Lance une boule de feu\",\"Utilise une barriÃ¨re magique\" )\n       \n    def degat_attaque(self) -&gt; int:\n        # code pour calculer les dÃ©gÃ¢ts\n        return 10\n\n\n2.3 Testez votre code\n\n\nQuestion 3 : Testez la mÃ©thode get_pokemon_attack_coef() pour les classes AttackerPokemon et AllRounderPokemon.\nPour lancer tous les tests du projet, exÃ©cutez dans le terminal : python -m unittest\n\n\nPour cela vous allez utiliser le package unittest de python.\nCe package permet de rÃ©aliser des tests unitaires dans des classes sÃ©parÃ©es. Lâ€™avantage par rapport Ã  doctest, câ€™est que les tests ne â€œpolluentâ€ pas vos classes, et quâ€™il est possible de patcher certains comportements des classes.\nUn exemple de test est donnÃ© dans la classe testDefenderPokemon. Pour rappel, un test se dÃ©compose en 3 parties :\n\nGIVEN : crÃ©ation des objets nÃ©cessaires Ã  la rÃ©alisation du test\nWHEN : appel de la mÃ©thode Ã  tester\nTHEN : vÃ©rification du rÃ©sultat\n\nLes classes de test seront organisÃ©es de la maniÃ¨re suivante, en reproduisant lâ€™architecture de votre application :\nğŸ“¦pokemon_unite_lite\n â”£ ğŸ“‚business_object\n â”ƒ â”£ ğŸ“‚pokemon\n â”ƒ â”ƒ â”£ ğŸ“œabstract_pokemon.py\n â”ƒ â”ƒ â”£ ğŸ“œattacker.py\n â”ƒ â”ƒ â”£ ğŸ“œdefender.py\n â”ƒ â”ƒ â”— ğŸ“œall_rounder.py\n â”ƒ â”— ğŸ“œ statistique.py\n â”£ ğŸ“‚service\n â”ƒ â”— ğŸ“œbattle_service.py\n â”— ğŸ“‚test\n  â”— ğŸ“‚test_business_object\n      â”— ğŸ“‚test_pokemon\n        â”£ ğŸ“œtest_abstract_pokemon.py\n        â”£ ğŸ“œtest_attacker_pokemon.py\n        â”£ ğŸ“œtest_defender_pokemon.py\n        â”— ğŸ“œtest_all_rounder_pokemon.py\n\nğŸ’¡ ProblÃ¨mes dâ€™imports\n\nVÃ©rifiez que le dossier parent dans lâ€™explorer de VSCode (Ã  gauche) est : ENSAI-2A-complement-info-TP\n\nSi câ€™est TP1 ou TP ou autre chose ce nâ€™est pas bon !\nSinon refaites : File &gt; open Folder\nCliquez une fois sur ENSAI-2A-complement-info-TP\nCliquez sur le bouton SÃ©lectionner un dossier\nSi Ã§a vous le demande, vous pouvez enregistrer vos modifications\n\nPrÃ©fÃ©rez utiliser des chemins complets dâ€™import plutÃ´t que des chemins relatifs\n\nla racine des chemins est paramÃ©trÃ©e au niveau du dossier src\ndonc cela donne par exemple : *from business_object.pokemon.abstract_pokemon import AbstractPokemon\n\ncar le dossier business_object est bien dans le dossier src\n\n\nCrÃ©ez des fichiers __init__.py (vide)\n\ndans TOUS les dossiers que vous crÃ©ez\ncâ€™est un peu pÃ©nible mais Ã§a peut dÃ©bloquer la situation\n\n\n\n\n\nQuestion 4 : Pouvez-vous tester la mÃ©thode level_up() directement sur un AbstractPokemon ? Avez vous une idÃ©e comment faire ? (ne pas coder cette question)"
  },
  {
    "objectID": "doc/tp/tp1.html#lagrÃ©gation-lautre-faÃ§on-dajouter-de-la-souplesse-dans-le-code",
    "href": "doc/tp/tp1.html#lagrÃ©gation-lautre-faÃ§on-dajouter-de-la-souplesse-dans-le-code",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "3 Lâ€™agrÃ©gation, lâ€™autre faÃ§on dâ€™ajouter de la souplesse dans le code",
    "text": "3 Lâ€™agrÃ©gation, lâ€™autre faÃ§on dâ€™ajouter de la souplesse dans le code\nMaintenant que nos PokÃ©mons sont faits, nous allons y ajouter les attaques.\nNotre systÃ¨me va devoir respecter certaines contraintes :\n\nPlusieurs types dâ€™attaques vont coexister, chacune avec un mode de calcul de dÃ©gÃ¢ts diffÃ©rent :\n\nDes attaques Ã  dÃ©gÃ¢ts variables sÃ©parÃ©es en 2 types :\n\nattaques â€œphysiquesâ€ qui utilisent lâ€™attaque et la dÃ©fense des PokÃ©mons\nattaques â€œspÃ©cialesâ€ qui utilisent lâ€™attaque spÃ© et la dÃ©fense spÃ© des PokÃ©mons\n\nDes attaques Ã  dÃ©gÃ¢ts fixes qui font un nombre fixe de dÃ©gÃ¢ts.\n\nUn pokÃ©mon peut avoir plusieurs attaques et le type de lâ€™attaque doit Ãªtre transparent pour le pokÃ©mon.\n\n\n\n3.1 Attaques Ã  dÃ©gÃ¢ts fixes\nNous allons commencer par les attaques Ã  dÃ©gÃ¢ts fixes. Comme il y aura un autre type dâ€™attaques, toutes les attaques hÃ©riterons de la classe abstraite AbstractAttack dÃ©jÃ  crÃ©Ã©e. Cette classe possÃ¨de la mÃ©thode abstraite compute_damage() qui devra Ãªtre implÃ©mentÃ©e dans les classes filles.\n\n\n\n\n\nclassDiagram\n\n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    + compute_damage(APkm, APkm)$  int\n  }\n\n   class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n   }\n \n   AbstractAttack &lt;|-- FixedDamageAttack\n\n\n\n\n\n\n\n\nQuestion 5 ImplÃ©mentez la classe FixedDamageAttack, ainsi que sa mÃ©thode compute_damage() qui retournera simplement la puissance (power) de lâ€™attaque.\nCrÃ©ez des tests pour vÃ©rifier que tout fonctionne correctement.\n\n\n\n\n\n3.2 Attaques Ã  dÃ©gÃ¢ts variables\nNous allons ensuite coder les attaques Ã  dÃ©gÃ¢ts variables. Elles utilisent la formule suivante :\nDamage = \\big ( \\frac{(\\frac{2*Level}{5}+2)* Power *Att}{Def*50} +2\\big) *random* other\\_multipliers\navec :\n\n\\(Att\\)â€‹ : Ã©gal soit Ã  lâ€™attaque ou lâ€™attaque spÃ© du Pokemon attaquant\n\\(Def\\)â€‹â€‹ : Ã©gal soit Ã  la dÃ©fense ou dÃ©fense spÃ© du Pokemon dÃ©fenseur\n\\(Power\\)â€‹ : la valeur de puissance de lâ€™attaque\n\\(random\\)â€‹â€‹ :une valeur comprise dans lâ€™intervalle [0.85; 1]\n\\(other\\_ multipliers\\) : les autres multiplicateurs possibles, comme le coefficient dâ€™attaque des pokÃ©mons.\n\nLa seule diffÃ©rence entre attaque physique et spÃ©ciale vient des coefficients \\(Att\\) et \\(Def\\), le reste de la formule des dÃ©gÃ¢ts est identique. Nous allons donc utiliser le patron de conception template method, dont voici la modÃ©lisation UML dans notre cas :\n\n\n\n\n\nclassDiagram\n\n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    + compute_damage(APkm, APkm)$  int\n  }\n\n   class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n   }\n\n  class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n    -get_attack_stat(APkm)$  float\n    -get_defense_stat(APkm)$  float\n    +compute_damage(APkm,APkm)  int\n  }\n \n  class PhysicalFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n  class SpecialFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n   AbstractAttack &lt;|-- FixedDamageAttack\n   AbstractAttack &lt;|-- AbstractFormulaAttack\n   AbstractFormulaAttack &lt;|-- SpecialFormulaAttack\n   AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack\n\n\n\n\n\n\nLa classe AbstractFormulaAttack va contenir :\n\nla mÃ©thode compute_damage(pkmon_attacker: AbstratPokemon, pkmon_targeted: AbstractPokemon). Cette mÃ©thode va contenir la formule de calcul des dÃ©gÃ¢ts, mais en appelant les mÃ©thodes get_attaque_stat(AbstractPokemon) et get_defense_stat(AbstractPokemon) pour savoir quelle statistique utiliser\nles mÃ©thodes abstraites get_attack_stat(AbstractPokemon) et get_defense_stat(AbstractPokemon). Ces mÃ©thodes devront Ãªtre implÃ©mentÃ©es dans les classes filles pour dÃ©terminer quelles statistiques utiliser.\n\n\n\nQuestion 6 : ImplÃ©mentez les 3 nouvelles classes et crÃ©ez des tests pour vÃ©rifier que tout fonctionne correctement"
  },
  {
    "objectID": "doc/tp/tp1.html#architecture-finale-bonus-si-vous-avez-le-temps",
    "href": "doc/tp/tp1.html#architecture-finale-bonus-si-vous-avez-le-temps",
    "title": "Retour sur la POO, objets mÃ©tier et patron de conception strategy",
    "section": "4 Architecture finale (bonus, si vous avez le temps)",
    "text": "4 Architecture finale (bonus, si vous avez le temps)\nNous allons maintenant rattacher les bouts pour crÃ©er notre architecture finale :\n\n\n\n\n\nclassDiagram\n  class AbstractPokemon {\n    &lt;&lt;abstract&gt;&gt;\n    # _current_stat : Statistique\n    # _level : int\n    # _name : str\n    # _attack_list : List~AbstractAttack~\n    +get_pokemon_attack_coef()$  float\n    +level_up() None\n  }\n \n  class Statistique {\n    - hp : int\n    - attaque : int\n    - defense : int\n    - spe_atk : int\n    - spe_def : int\n    - vitesse : int\n  }\n   \n  class BattleService {\n    + resolve_battle(APkm, APkm) : Battle\n    + get_order(APkm, APkm)\n    + choose_attack(APkm) : AAttack\n  }  \n  \n  class Battle{\n    - first_monstie : APkm\n    - second_monstie : APkm\n    - winner : APkm\n    - rounds : List&lt;Round&gt;\n  }\n\n  class Round{\n    attacker: APkm\n    defender: APkm\n    dealt_damage: int\n    attack_description: str\n  }\n  BattleService ..&gt;\"2\" AbstractPokemon : use\n  AbstractPokemon &lt;|-- Attacker\n  AbstractPokemon &lt;|-- Defender\n  AbstractPokemon &lt;|-- AllRounder\n  Statistique *-- AbstractPokemon\n\n  Battle .. BattleService\n  Battle .. Round\n \n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$ int\n  }\n\n  class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n  }\n\n  class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n    -get_attack_stat(APkm)$  float\n    -get_defense_stat(APkm)$  float\n    + compute_damage(APkm,APkm ) int\n  }\n \n  class PhysicalFormulaAttack{\n   -get_attack_stat(APkm)$  float\n   -get_defense_stat(APkm)$  float\n  }\n \n  class SpecialFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n  AbstractAttack &lt;|-- FixedDamageAttack\n  AbstractAttack &lt;|-- AbstractFormulaAttack\n  AbstractFormulaAttack &lt;|-- SpecialFormulaAttack\n  AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack\n  BattleService &gt;.. AbstractAttack  : use\n  AbstractPokemon o--&gt;\"0..*\" AbstractAttack\n\n\n\n\n\n\n\n\n\nQuestion 7 : ImplÃ©mentez le diagramme de classe ci-dessus et testez votre code en Ã©crivant de nouveaux tests unitaires.\n\n\nCette architecture permet de dÃ©corrÃ©ler les attaques des pokÃ©mons et de spÃ©cifier le comportement des attaques au fur et Ã  mesure des hÃ©ritages. Les avantages sont :\n\nPour la classe AbstractPokemon, toutes les attaques sont des AbstractAttack. Tant quâ€™elles exposent la mÃ©thode compute_damage notre programme va fonctionner. On peut ainsi facilement ajouter de nouveaux types dâ€™attaques sans problÃ¨me.\nUn PokÃ©mon peut avoir des attaques de tous les types\nNous pouvons ajouter un systÃ¨me dâ€™Ã©tat comme la paralysie ou le poison assez facilement. Il faut pour cela modifier la classe AbstractAttack et les classes qui en hÃ©ritent. Cela sera potentiellement long, mais ne demande pas de toucher Ã  la partie â€œPokÃ©monâ€ de notre architecture.\nUne personne pourrait se concentrer sur la crÃ©ation des PokÃ©mons alors quâ€™une autre pourrait se concentrer sur celles des attaques sans difficultÃ©. Les deux parties du code sont relativement indÃ©pendantes, la seule zone de couplage sont les classes AbstractPokemon et AbstractAttack, qui servent avant tout Ã  dÃ©finir ce qui doit Ãªtre fait par les classes filles et ce qui est accessible Ã  lâ€™extÃ©rieur.\n\nLe fait dâ€™externaliser le comportement des attaques dans des classes spÃ©cifiques puis de les lier aux PokÃ©mons via une relation dâ€™agrÃ©gation assez souple qui permet de changer dynamiquement les attaques dâ€™un PokÃ©mon est le patron de conception strategy."
  },
  {
    "objectID": "doc/tp/tp3.html",
    "href": "doc/tp/tp3.html",
    "title": "Data Access Objet (DAO)",
    "section": "",
    "text": "ğŸ˜± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mÃ©lange explications complÃ¨tes et manipulations pour Ãªtre au maximum autosuffisant. Vous nâ€™allez surement pas terminer le sujet, ce nâ€™est pas grave. Il est lÃ  pour vous aider lors du projet informatique.\nCe TP mÃªle explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appelÃ©es â€œâœï¸Hands onâ€. Câ€™est Ã  ce moment-lÃ  que vous devez faire ce qui est Ã©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais prÃ©fÃ©rez toujours les explications orales.\n\nDans ce TP vous allez :\n\nRevoir des notions de base de donnÃ©es relationnelles ;\nImplÃ©menter le patron de conception DAO ;\nVoir si votre programme fonctionne avec des tests unitaires reproductibles."
  },
  {
    "objectID": "doc/tp/tp3.html#avant-de-commencer",
    "href": "doc/tp/tp3.html#avant-de-commencer",
    "title": "Data Access Objet (DAO)",
    "section": "",
    "text": "ğŸ˜± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mÃ©lange explications complÃ¨tes et manipulations pour Ãªtre au maximum autosuffisant. Vous nâ€™allez surement pas terminer le sujet, ce nâ€™est pas grave. Il est lÃ  pour vous aider lors du projet informatique.\nCe TP mÃªle explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appelÃ©es â€œâœï¸Hands onâ€. Câ€™est Ã  ce moment-lÃ  que vous devez faire ce qui est Ã©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais prÃ©fÃ©rez toujours les explications orales.\n\nDans ce TP vous allez :\n\nRevoir des notions de base de donnÃ©es relationnelles ;\nImplÃ©menter le patron de conception DAO ;\nVoir si votre programme fonctionne avec des tests unitaires reproductibles."
  },
  {
    "objectID": "doc/tp/tp3.html#mise-Ã -jour-de-votre-dÃ©pÃ´t-local",
    "href": "doc/tp/tp3.html#mise-Ã -jour-de-votre-dÃ©pÃ´t-local",
    "title": "Data Access Objet (DAO)",
    "section": "1 Mise Ã  jour de votre dÃ©pÃ´t local",
    "text": "1 Mise Ã  jour de votre dÃ©pÃ´t local\nComme lors du prÃ©cÃ©dent TP, vous avez 2 possibilitÃ©s pour rÃ©cupÃ©rer le code de base du TP3 :\n\n1.0.1 Si vous voulez repartir du code du TP2\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton SÃ©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nCrÃ©ez un point de sauvegarde de vos travaux de la semaine derniÃ¨re\n\ngit add .\ngit commit -m \"Mon super code du TP2\"\n\nMettez Ã  jour votre dÃ©pÃ´t local\n\ngit pull\n\n\n\n\n\n1.0.2 Si vous nâ€™avez pas le code du TP2 sur votre machine\n\nOuvrez le logiciel Git Bash\n\nCrÃ©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, et collez lÃ  dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP3 && cd $_\n\nClonez le dÃ©pÃ´t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nFermez Git Bash\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton SÃ©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\n\n\n\n\n\n1.0.3 âš ï¸ Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de lâ€™explorer de VSCode (Ã  gauche) doit Ãªtre : ENSAI-2A-complement-info-TP. Si câ€™est TP1, TP2, TP3, TP ou autre chose ce nâ€™est pas bon ! Vous allez avoir des soucis dâ€™imports par la suite.\n\n\n\n1.0.4 Dans les 2 cas\n\nPassez sur la branche du TP3\n\ngit checkout tp3_base\n\nSi ce nâ€™est pas dÃ©jÃ  fait, installez les dÃ©pendances nÃ©cessaires (voir fichier README)\n\npip install -r requirements.txt\n\npour pour vÃ©rifier que tout fonctionne bien\n\nlancez le fichier __main__.py\nlancez les tests unitaires\n\ndans terminal : python -m unittest\n\n\nPour pouvoir vous connecter Ã  votre base de donnÃ©es, renseignez les variables du fichier .env avec votre id :\n\nDATABASE=id????\nUSER=id????\nPASSWORD=id????\n\nLancez le script utils/reset_database.py\n\ncela crÃ©e un schÃ©ma et des donnÃ©es utiles pour ce TP\n\nOuvrez DBeaver pour une remise en jambes en SQL\n\nSi vous nâ€™Ãªtes pas familier avec DBeaver, suivez ces instructions\nobservez ces tables et leurs liens : tp.pokemon, tp.pokemon_type, tp.attack, tp.attack_type, tp.pokemon_attack (schÃ©ma dans TP/img/)\nÃ©crivez des requÃªtes pour :\n\nlister toutes les attaques, ainsi que le nom du type dâ€™attaque\nlister tous les pokemon, ainsi que le nom du type de Pokemon\nlister toutes les attaques de Pikachu\n\ngardez ces requÃªtes de cotÃ©, elles seront utiles plus loin"
  },
  {
    "objectID": "doc/tp/tp3.html#data-access-objet-dao",
    "href": "doc/tp/tp3.html#data-access-objet-dao",
    "title": "Data Access Objet (DAO)",
    "section": "2 Data Access Objet (DAO)",
    "text": "2 Data Access Objet (DAO)\n\n2.1 ModÃ©lisation\nReprenons le diagramme de classe du TP1. Limitons nous Ã  la partie â€œattaqueâ€ et rÃ©flÃ©chissons oÃ¹ mettre une mÃ©thode qui permet de persister les attaques.\n\n\n\n\n\nclassDiagram\n\nclass AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    + DATABASE_TYPE_LABEL : str\n    # _id : int\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$  int\n    }\n    class FixedDamageAttack{\n        + compute_damage(APkm,APkm )  int\n    }\n    class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n        -get_attack_stat(APkm)$  float\n        -get_defense_stat(APkm)$  float\n        +compute_damage(APkm,APkm)  int\n    }\n    \n    class PhysicalAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    class SpecialAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    FixedDamageAttack--|&gt;AbstractAttack\n    AbstractFormulaAttack--|&gt;AbstractAttack\n    SpecialAttack--|&gt;AbstractFormulaAttack\n    PhysicalAttack--|&gt;AbstractFormulaAttack\n\n\n\n\n\n\n\n\nVu que les attributs de nos attaques sont similaires, on ne va pas coder Ã§a dans les classes spÃ©cifiques des attaques. On pourrait mettre les mÃ©thodes dans AbstractAttack. Ã‡a fonctionnerait bien dâ€™ailleurs. On aurait une classe unique avec nos mÃ©thodes pour interagir avec la base. Mais on ne va pas faire Ã§a !\nEt lÃ  vous vous demandez :\n\nğŸ˜± Mais pourquoi ???\n\nEt la rÃ©ponse est :\n\nğŸ˜› Car Ã§a nâ€™a aucun sens !\n\nRevenons sur la phrase : faible couplage, forte cohÃ©sion. Si lâ€™on met toutes les mÃ©thodes de persistance de nos attaques dans la classe AbstractAttack on va avoir une classe qui :\n\nâœ”ï¸ DÃ©termine le comportement des attaques. Câ€™est exactement ce que lâ€™on souhaite (forte cohÃ©sion).\nâŒ DÃ©termine comment on persiste une attaques.\n\nMais Ã§a, ce nâ€™est pas de la responsabilitÃ© dâ€™une attaque, mais du systÃ¨me de persistance choisi, ou du moins de lâ€™intermÃ©diaire entre nos objets et le systÃ¨me de persistance !\nJe nâ€™ai personnellement pas envie dâ€™aller modifier ma classe AbstractAttack uniquement car jâ€™ai dÃ©cidÃ© de changer de systÃ¨me de gestion de la persistance. Je risque de modifier quelque chose que je ne devrais pas et crÃ©er des rÃ©gressions (faire apparaitre des erreurs sur un code qui nâ€™en avait pas avant) dans mon code. Or jâ€™aimerais bien limiter les sources dâ€™erreurs.\nÃ€ la place, nous allons crÃ©er une classe qui va sâ€™occuper uniquement de cette tÃ¢che. Et on appelle ce type de classe DAO pour Data Access Object. Câ€™est une classe technique qui va faire lâ€™interface entre nos donnÃ©es stockÃ©es et notre application. VoilÃ  ce que cela donne en terme de diagramme de classe\n\n\n\n\n\nclassDiagram\n\nclass AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    + DATABASE_TYPE_LABEL : str\n    # _id : int\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$  int\n    }\n    class FixedDamageAttack{\n        + compute_damage(APkm,APkm )  int\n    }\n    class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n        -get_attack_stat(APkm)$  float\n        -get_defense_stat(APkm)$  float\n        +compute_damage(APkm,APkm)  int\n    }\n    \n    class PhysicalAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    class SpecialAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    FixedDamageAttack--|&gt;AbstractAttack\n    AbstractFormulaAttack--|&gt;AbstractAttack\n    SpecialAttack--|&gt;AbstractFormulaAttack\n    PhysicalAttack--|&gt;AbstractFormulaAttack\n\n\nclass AttackDao{\n&lt;&lt;Singleton&gt;&gt;\n +create(AbstractAttack) AbstractAttack\n +find_by_id(int) AbstractAttack\n +find_all() List[AbstractAttack]\n +update(AbstractAttack) AbstractAttack\n +delete(AbstractAttack) bool\n}\n\nclass DBConnection{\n&lt;&lt;Singleton&gt;&gt;\n-__connection : Connection\n\n+connection() Connection\n}\n\nAbstractAttack&lt;.. AttackDao: create\nAttackDao..&gt; DBConnection: use\n\n\n\n\n\n\n\n\n\n2.2 Gestion des connexions et patern singleton\nPour vous connecter Ã  la base de donnÃ©es nous allons utiliser la bibliothÃ¨que python psycopg2. Câ€™est elle qui va Ã©tablir la connexion avec la base, envoyer nos requÃªtes et nous retourner les rÃ©sultats.\nMais il faut faire un peu attention Ã  la gestion des connexions. Car nous pourrions nous retrouver Ã  ouvrir des centaines de connexions rapidement et dÃ©grader les performances de notre application. Câ€™est le travail de la classe DBConnection. Comme câ€™est un singleton, il y aura une seule instance de cette classe dans toute notre application, et comme câ€™est elle qui se connecte Ã  la base on sâ€™assure de lâ€™unicitÃ© de la connexion.\n\nCette classe est une solution purement technique alors nâ€™hÃ©sitez pas Ã  la rÃ©utiliser pour votre projet. Elle introduit un concept avancÃ© de POO, Ã  savoir les mÃ©ta classes. Une mÃ©ta classe permet de modifier le comportement dâ€™une classe Ã  un niveau poussÃ© (par exemple modifier comment les objets sont construits par python). Ã€ moins que vous ayez une appÃ©tence tout particuliÃ¨re pour lâ€™informatique, ne passez pas de temps sur ce sujet.\n\n\n\n2.3 DAO et CRUD\nSi vous faites attention, les mÃ©thodes de notre DAO ressemblent Ã  celles du CRUD. Câ€™est normal car câ€™est dans ces mÃ©thodes que le code SQL va Ãªtre stockÃ©, donc il nous faut les mÃ©thodes de base, gÃ©nÃ©ralement :\n\nfind_all() : qui va retourner toute la table.\nfind_by_id() : qui retourne un enregistrement Ã  partir de son id\ncreate() : qui crÃ©e un nouvel enregistrement\ndelete() : qui supprime un enregistrement\nupdate() : qui met Ã  jour un enregistrement\n\nCes 5 mÃ©thodes suffisent pour communiquer avec votre base de donnÃ©es. Vous pouvez effectuer le reste des traitements dans vos classes Service. NÃ©anmoins pour gagner du temps rien nâ€™empÃªche de crÃ©er des mÃ©thodes plus complexes (ex : find_by_type_and_level_order_by_name_desc())\nVoici la fonctionnement gÃ©nÃ©ral dâ€™une des mÃ©thodes de la DAO :\n# Etape 1 : On rÃ©cupÃ¨re une connexion en utilisant la classe DBConnection.\nwith DBConnection().connection as connection :\n\n# Etape 2 : Ã  partir de la connexion on fait un curseur pour la requÃªte \n    with connection.cursor() as cursor : \n    \n    # Etape 3 : on exÃ©cute notre requÃªte SQL.\n            cursor.execute(requete_sql)\n    \n    # Etape 4 : on stocke le rÃ©sultat de la requÃªte\n            res = cursor.fetchall()\n\nif res:\n    # Etape 5 : on agence les rÃ©sultats selon la forme souhaitÃ©e (liste...)\n    \nreturn something\nLâ€™objet cursor contient un pointeur vers les rÃ©sultats de votre requÃªte. Ce rÃ©sultat nâ€™est pas encore rapatriÃ© sur votre machine, mais est stockÃ© par la base de donnÃ©es. Vous avez 3 mÃ©thodes pour rÃ©cupÃ©rer le rÃ©sultat :\n\ncurseur.fetchone() : retourne uniquement un enregistrement sous forme de dictionnaire. Si vous appelez de nouveau fetchone() sur le mÃªme curseur vous obtiendrez la ligne suivante\ncursor.fetchall() : retourne lâ€™intÃ©gralitÃ© des rÃ©sultats sous forme dâ€™une liste de dictionnaires.\n\nLes dictionnaires sont les lignes de la table rÃ©cupÃ©rÃ©e.\nLes clÃ©s du dictionnaire sont les colonnes rÃ©cupÃ©rÃ©es.\nCette mÃ©thode fonctionne trÃ¨s bien quand on veut tous les rÃ©sultats en une fois et quâ€™il y en a peu. Quand on a des millions dâ€™enregistrements cela va poser problÃ¨me car :\n\nLe transfert de donnÃ©es sur internet va prendre du temps et bloquer notre application\nNotre application va devoir gÃ©rer une grande quantitÃ© de donnÃ©es, et elle en est peut-Ãªtre incapable\n\n\ncurseur.fetchmany(size): retourne autant dâ€™enregistrements que demandÃ© sous forme dâ€™une liste de dictionnaires. Cela permet de contrÃ´ler le volume de donnÃ©es que lâ€™on traite. Si vous appelez de nouveau fetchmany(size) sur votre curseur, vous allez rÃ©cupÃ©rer les lignes suivantes (systÃ¨me de pagination)\n\nPour plus dâ€™information : article de pynative\n\n\n\n2.4 DAO avec des types dâ€™attaque\nâœHand on 1\n\nObservez le fonctionnement de la classe AttaqueTypeDAO\n\ncela va vous Ãªtre utile pour la suite\n\nDans DBeaver, crÃ©ez une requÃªte qui retourne le contenu de la table tp.attack, ainsi que le champ attack_type_name de la table tp.attack_type\n\nCette requÃªte servira pour les 2 mÃ©thodes find ci-aprÃ¨s, car\n\nDans la classe AttaqueDao, crÃ©ez les mÃ©thodes suivantes :\n\nupdate_attack(attack : AbstractAttack) -&gt; bool : met Ã  jour les donnÃ©es de lâ€™attaque passÃ©e en paramÃ¨tre et retourne si la modification sâ€™est bien passÃ©e\nfind_attack_by_id(id:int) -&gt; Optional[AbsractAttack] : retourne lâ€™attaque avec lâ€™id en paramÃ¨tre ou retourne None si lâ€™attaque nâ€™est pas trouvÃ©e.\nfind_all_attacks() -&gt; List[AbsractAttack] : qui retourne la liste de toutes les attaques\n\nBonus : ajoutez Ã  cette mÃ©thode les paramÃ¨tres limit et offset\n\n\n\nVoici quelques conseils :\n\nVous pouvez utiliser lâ€™attribut type de chaque attaque pour avoir son label en base\nUtilisez la classe AttackFactory pour instancier facilement des attaques\nPensez Ã  faire des tests pour voir si votre code fonctionne\nDans les 2 mÃ©thodes find, pour crÃ©er nos objets mÃ©tier Attack\n\nnous avons besoin de connaitre le nom du type dâ€™attaque\nor il nâ€™y a pas cette colonne dans la table attaque\nmais peut-Ãªtre avez-vous dÃ©jÃ  une requÃªte qui fait le job ?\n\n\n\n\n\n2.5 PokÃ©mon DAO\nâœHand on 2\nCrÃ©ez la classe PokÃ©monDAO avec les mÃ©thodes suivantes :\n\nfind_all_pokemon()-&gt;List[AbstractPokemon] : retourne tous les pokÃ©mons dans la base\nfind_pokemon_by_name(name:str)-&gt;AbstractPokemon : retourne un pokÃ©mon avec le nom donnÃ©.\nComplÃ©tez la mÃ©thode ci-dessus en incorporant la liste des attaques du Pokemon :\n\nFaites une requÃªte en joignant les tables attack et pokemon_attack en filtrant avec lâ€™id du pokÃ©mon\nGÃ©nÃ©rez les attaques Ã  partir de lÃ \n\n\n\n\n\n2.6 DAO et webservice\nâœHand on 3\nVous allez maintenant rendre accessible les donnÃ©es de votre base Ã  dâ€™autres utilisateurs en rÃ©alisant un webservice REST.\nAjoutez dans le fichier app.py les endpoints suivants :\n# DÃ©fintion du endpoint get /attack?limit=100\n@app.get(\"/attack/\")\nasync def get_all_attacks(limit:int):\n    # Vous devez rÃ©cupÃ©rer les attaques en base en utilisant votre DAO\n    return attacks\n\n# DÃ©fintion du endpoint get /pokemon?limit=100\n@app.get(\"/pokemon/\")\nasync def get_all_pokemons(limit:int):\n    # Vous devez rÃ©cupÃ©rer les pokemons en base en utilisant votre DAO\n    return pokemons\n\n# DÃ©fintion du endpoint get /pokemon`/{name}\n@app.get(\"/pokemon/{name}\")\nasync def get_pokemon_by_name(name:str):\n    # Vous devez rÃ©cupÃ©rer le pokemon en base en utilisant votre DAO\n    return pokemon\n\nGET localhost:80/attack?limit=100 renverra une liste de 100 attaques par dÃ©faut. Il est possible de moduler cette valeur via le paramÃ¨tre de requÃªte limit\nGET localhost:80/pokemon?limit=100. Il renverra une liste de 100 pokÃ©mons par dÃ©faut, mais peut Ãªtre modulÃ© avec le paramÃ¨tre de requÃªte limit.\nGET localhost:80/pokemon/{nom}. Il renverra un json reprÃ©sentant un pokÃ©mon.\n\nPour retourner des objets, vous allez devoir dÃ©finir des classes hÃ©ritant de BaseModel. Vous trouverez toutes les infos dans la documentation de FastAPI."
  },
  {
    "objectID": "doc/tp/tp3.html#conclusion",
    "href": "doc/tp/tp3.html#conclusion",
    "title": "Data Access Objet (DAO)",
    "section": "Conclusion",
    "text": "Conclusion\nDans ce TP vous avez implÃ©mentÃ© votre premiÃ¨re DAO.\nCâ€™est une classe technique qui sert Ã  communiquer avec votre systÃ¨me de persistance de donnÃ©es. Lâ€™avantage premier de faire une classe Ã  part est de dÃ©coupler au maximum la gestion du systÃ¨me de persistance et le code mÃ©tier de votre application.\nSi vous dÃ©cidez dâ€™arrÃªter dâ€™utiliser une base de donnÃ©es relationnelle et prÃ©fÃ©rez dÃ©sormais une base de donnÃ©es no SQL vous allez devoir changer uniquement les classes DAO tout en exposant toujours les mÃªmes mÃ©thodes."
  },
  {
    "objectID": "doc/cours/intro.html",
    "href": "doc/cours/intro.html",
    "title": "Introduction",
    "section": "",
    "text": "6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de RÃ©mi PÃ©pin\n\n\nPrÃ©sentation :\n\nINSEE, informatique, OrlÃ©ans GEOLOC, Lille enquÃªtes, Nautile\nRÃ©mi PÃ©pin, assistant dâ€™enseignement entre 2018 et 2023\n\nCours de Cloud Computing\n\n\n\n\n\n\n\n\n\n\n\nBut du cours\n\n\n\nVous apporter les connaissances nÃ©cessaires pour mener Ã  bien un projet informatique.\n\n\n\nConduire un projet\nDÃ©passer les 50 lignes de code\nVivre la vie de dÃ©veloppeur\nTravailler en Ã©quipe\n\n\n\norganiser votre code\n\n\n\n\n\n\n\n\n\n\n\nBut des TP\n\n\n\nVous aider Ã  comprendre ce quâ€™est un projet.\n\n\n\n\nTP : truc Ã  rÃ©cup pour le projet\nRÃ©visez les Pokemon\nSujets trÃ¨s longs\n\n\n\n\n\n\nğŸš§ date\n2h\nsur papier\n1 feuille A4 recto / verso manuscrite\n\n\n\nBut : voir si vous avez retenu le principal\npas de piÃ¨ge\nsur papier car TP trop compliquÃ© Ã  organiser, chatGPT\nMANUSCRITE : pas de photocopie\n\n\n\n\n\nğŸš§ prez Ã©lÃ¨ves -&gt; lien vers le repo projet"
  },
  {
    "objectID": "doc/cours/intro.html#cours-de-complÃ©ments-dinfo",
    "href": "doc/cours/intro.html#cours-de-complÃ©ments-dinfo",
    "title": "Introduction",
    "section": "",
    "text": "6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de RÃ©mi PÃ©pin\n\n\nPrÃ©sentation :\n\nINSEE, informatique, OrlÃ©ans GEOLOC, Lille enquÃªtes, Nautile\nRÃ©mi PÃ©pin, assistant dâ€™enseignement entre 2018 et 2023\n\nCours de Cloud Computing\n\n\n\n\n\n\n\n\n\n\n\nBut du cours\n\n\n\nVous apporter les connaissances nÃ©cessaires pour mener Ã  bien un projet informatique.\n\n\n\nConduire un projet\nDÃ©passer les 50 lignes de code\nVivre la vie de dÃ©veloppeur\nTravailler en Ã©quipe\n\n\n\norganiser votre code\n\n\n\n\n\n\n\n\n\n\n\nBut des TP\n\n\n\nVous aider Ã  comprendre ce quâ€™est un projet.\n\n\n\n\nTP : truc Ã  rÃ©cup pour le projet\nRÃ©visez les Pokemon\nSujets trÃ¨s longs\n\n\n\n\n\n\nğŸš§ date\n2h\nsur papier\n1 feuille A4 recto / verso manuscrite\n\n\n\nBut : voir si vous avez retenu le principal\npas de piÃ¨ge\nsur papier car TP trop compliquÃ© Ã  organiser, chatGPT\nMANUSCRITE : pas de photocopie\n\n\n\n\n\nğŸš§ prez Ã©lÃ¨ves -&gt; lien vers le repo projet"
  },
  {
    "objectID": "doc/cours/intro-slides.html#cours-de-complÃ©ments-dinfo",
    "href": "doc/cours/intro-slides.html#cours-de-complÃ©ments-dinfo",
    "title": "Introduction",
    "section": "Cours de ComplÃ©ments dâ€™info",
    "text": "Cours de ComplÃ©ments dâ€™info\n\n6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de RÃ©mi PÃ©pin\n\n\nPrÃ©sentation :\n\nINSEE, informatique, OrlÃ©ans GEOLOC, Lille enquÃªtes, Nautile\nRÃ©mi PÃ©pin, assistant dâ€™enseignement entre 2018 et 2023\n\nCours de Cloud Computing"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-tests",
    "href": "doc/cours/tests-unitaires-slides.html#les-tests",
    "title": "Les tests unitaires",
    "section": "Les Tests",
    "text": "Les Tests"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-tests-unitaires",
    "href": "doc/cours/tests-unitaires-slides.html#les-tests-unitaires",
    "title": "Les tests unitaires",
    "section": "Les tests unitaires",
    "text": "Les tests unitaires\nNous allons utiliser le framework unittest pour rÃ©aliser nos tests en Python.\nCommenÃ§ons par un exemple : vous souhaitez tester la mÃ©thode suivante :\nclass OperationMathematiques:\n    def diviser_cinq_par(self, nombre) -&gt; float:\n        if nombre != 0:\n            return 5 / nombre\n        else:\n            return None\nPour cela, vous allez crÃ©er une classe de test.\nLe premier test auquel on pense est le cas nominal : on choisit un nombre en entrÃ©e, par exemple 2, puis on vÃ©rifie que diviser_cinq_par(2) retourne bien la valeur attendue : 2.5\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\nMais ce nâ€™est pas suffisant !\nLa mÃ©thode a Ã©galement un autre retour possible : None â¡ï¸ il faut aussi tester que la mÃ©thode renvoie bien None si le paramÃ¨tre en entrÃ©e est 0\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\n\n    def test_diviser_cinq_par_zero(self):\n        ## GIVEN\n        nombre = 0\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertIsNone(resultat)\n\nif __name__ == \"__main__\":\n    ## Run the tests\n    result = TextTestRunner(verbosity=2).run(\n        TestLoader().loadTestsFromTestCase(TestOperationMathematiques)\n    )\nVoici le test complet avec Ã  la fin un main optionnel qui permet de lancer la classe de test comme nâ€™importe quel programme Python avec le bouton â–¶ï¸\nEt siâ€¦ on appelle la mÃ©thode avec ce paramÃ¨tre : diviser_cinq_par(\"a\") ?\nVous pouvez aussi Ã©crire un test pour vÃ©rifier que votre mÃ©thode renvoie bien une exception TypeError dans ce cas.\n    def test_diviser_cinq_string(self):\n        ## GIVEN\n        nombre = \"a\"\n\n        ## WHEN / THEN\n        with self.assertRaises(TypeError):\n            OperationMathematiques().diviser_cinq_par(nombre)\nMais il est quand mÃªme prÃ©fÃ©rable de vÃ©rifier dans votre mÃ©thode que le paramÃ¨tre est bien de type numÃ©rique et de dÃ©cider quoi faire si ce nâ€™est pas le cas.\nğŸ’¡ Ce quâ€™il faut retenir sur le test unitaire :\n\nvÃ©rifie quâ€™une mÃ©thode fait ce quâ€™elle doit faire\nil faut tester les cas nominaux, mais Ã©galement les cas Ã  la marge et les erreurs\nun test unitaire teste UNE et UNE seule chose\n\nil faut autant de tests unitaires que de retours possibles\n\nil doit Ãªtre le plus isolÃ© possible (pas de question sur ce point Ã  lâ€™examen)\n\ncâ€™est-Ã -dire que si vous voulez tester une mÃ©thode A, qui elle-mÃªme appelle dâ€™autres mÃ©thodes B, C, Dâ€¦\nle test ne doit se faire que sur la mÃ©thode A\nPour cela, il faut mocker le comportement des autres mÃ©thodes"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-test-driven-development-tdd",
    "href": "doc/cours/tests-unitaires-slides.html#les-test-driven-development-tdd",
    "title": "Les tests unitaires",
    "section": "Les Test Driven Development (TDD)",
    "text": "Les Test Driven Development (TDD)\nQuand tester ?\nâ€¦\nLa meilleure pratique lorsque lâ€™on veut crÃ©er une fonction est de dâ€™abord crÃ©er les tests qui permettront de vÃ©rifier que la fonction fait ce quâ€™elle doit faire.\nCela peut paraÃ®tre un peu Ã©trange, mais en fait pas tant que Ã§a. Lorsque vous codez une fonction, vous savez avant de commencer :\n\nquels seront les paramÃ¨tres en entrÃ©e\nquels rÃ©sultats vous attendez en sortie\ndonc vous avez dÃ©jÃ  quoi tester !\n\nLa pratique du TDD a le gros avantage que cela nous force Ã  Ã©crire des tests et de prendre le temps de bien faire les choses. Pour adhÃ©rer au TDD il faut vraiment se faire violence au dÃ©but, mais au final cette pratique est trÃ¨s bÃ©nÃ©fique.\nSinon, si lâ€™on Ã©crit la fonction en premier, une fois que lâ€™on a terminÃ©, il y a 9 chances sur 10 que lâ€™on se dise : â€œcâ€™est bon Ã§a marche, pas la peine de testerâ€¦â€. Et Ã§a câ€™est pas bien !!!\n\n\n\nHome â€” Tests unitaires"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html",
    "href": "doc/cours/tests-unitaires.html",
    "title": "Les tests unitaires",
    "section": "",
    "text": "Pour vÃ©rifier que votre programme fonctionne\nPour dÃ©tecter des erreurs\nPour Ã©viter les rÃ©gressions (quand vous modifiez du code)\n\nAucun test nâ€™est parfait, mais cela permet quand mÃªme dâ€™Ã©carter de nombreuses erreurs.\nDes logiciels permettent de calculer la couverture de tests dâ€™une application, câ€™est-Ã -dire approximativement le nombre de fonctions testÃ©es sur le nombre total de fonctions.\nCette couverture de tests est un indicateur de qualitÃ©. Cependant, elle donne une tendance, plutÃ´t quâ€™une valeur fiable. En effet, il est facile de tester toutes les mÃ©thodes Ã©lÃ©mentaires pour augmenter mÃ©caniquement sa couverture et de mettre de cÃ´tÃ© les tests sur les mÃ©thodes plus compliquÃ©es.\nPrÃ©fÃ©rez faire peu de tests, mais des tests utiles !\n\n\n\nIl existe de trÃ¨s nombreux tests diffÃ©rents, voici les principaux :\n\nTest unitaire : teste une fonction pour vÃ©rifier son bon fonctionnement\nTest fonctionnel : teste les cas dâ€™utilisation du logiciel\nTest de charge : Ã©valuent la capacitÃ© dâ€™un systÃ¨me Ã  gÃ©rer un volume Ã©levÃ© de donnÃ©es ou de transactions\nTest dâ€™intÃ©gration : vÃ©rifie que diffÃ©rents composants ou modules dâ€™un systÃ¨me interagissent correctement ensemble\nTest dâ€™intrusion : vÃ©rifie la sÃ©curitÃ© du logiciel en recherchant des vulnÃ©rabilitÃ©s et en simulant des attaques potentielles\nâ€¦"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-tests",
    "href": "doc/cours/tests-unitaires.html#les-tests",
    "title": "Les tests unitaires",
    "section": "",
    "text": "Pour vÃ©rifier que votre programme fonctionne\nPour dÃ©tecter des erreurs\nPour Ã©viter les rÃ©gressions (quand vous modifiez du code)\n\nAucun test nâ€™est parfait, mais cela permet quand mÃªme dâ€™Ã©carter de nombreuses erreurs.\nDes logiciels permettent de calculer la couverture de tests dâ€™une application, câ€™est-Ã -dire approximativement le nombre de fonctions testÃ©es sur le nombre total de fonctions.\nCette couverture de tests est un indicateur de qualitÃ©. Cependant, elle donne une tendance, plutÃ´t quâ€™une valeur fiable. En effet, il est facile de tester toutes les mÃ©thodes Ã©lÃ©mentaires pour augmenter mÃ©caniquement sa couverture et de mettre de cÃ´tÃ© les tests sur les mÃ©thodes plus compliquÃ©es.\nPrÃ©fÃ©rez faire peu de tests, mais des tests utiles !\n\n\n\nIl existe de trÃ¨s nombreux tests diffÃ©rents, voici les principaux :\n\nTest unitaire : teste une fonction pour vÃ©rifier son bon fonctionnement\nTest fonctionnel : teste les cas dâ€™utilisation du logiciel\nTest de charge : Ã©valuent la capacitÃ© dâ€™un systÃ¨me Ã  gÃ©rer un volume Ã©levÃ© de donnÃ©es ou de transactions\nTest dâ€™intÃ©gration : vÃ©rifie que diffÃ©rents composants ou modules dâ€™un systÃ¨me interagissent correctement ensemble\nTest dâ€™intrusion : vÃ©rifie la sÃ©curitÃ© du logiciel en recherchant des vulnÃ©rabilitÃ©s et en simulant des attaques potentielles\nâ€¦"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-tests-unitaires",
    "href": "doc/cours/tests-unitaires.html#les-tests-unitaires",
    "title": "Les tests unitaires",
    "section": "Les tests unitaires",
    "text": "Les tests unitaires\nNous allons utiliser le framework unittest pour rÃ©aliser nos tests en Python.\nCommenÃ§ons par un exemple : vous souhaitez tester la mÃ©thode suivante :\nclass OperationMathematiques:\n    def diviser_cinq_par(self, nombre) -&gt; float:\n        if nombre != 0:\n            return 5 / nombre\n        else:\n            return None\nPour cela, vous allez crÃ©er une classe de test.\nLe premier test auquel on pense est le cas nominal : on choisit un nombre en entrÃ©e, par exemple 2, puis on vÃ©rifie que diviser_cinq_par(2) retourne bien la valeur attendue : 2.5\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\nMais ce nâ€™est pas suffisant !\nLa mÃ©thode a Ã©galement un autre retour possible : None â¡ï¸ il faut aussi tester que la mÃ©thode renvoie bien None si le paramÃ¨tre en entrÃ©e est 0\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\n\n    def test_diviser_cinq_par_zero(self):\n        ## GIVEN\n        nombre = 0\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertIsNone(resultat)\n\nif __name__ == \"__main__\":\n    ## Run the tests\n    result = TextTestRunner(verbosity=2).run(\n        TestLoader().loadTestsFromTestCase(TestOperationMathematiques)\n    )\nVoici le test complet avec Ã  la fin un main optionnel qui permet de lancer la classe de test comme nâ€™importe quel programme Python avec le bouton â–¶ï¸\nEt siâ€¦ on appelle la mÃ©thode avec ce paramÃ¨tre : diviser_cinq_par(\"a\") ?\nVous pouvez aussi Ã©crire un test pour vÃ©rifier que votre mÃ©thode renvoie bien une exception TypeError dans ce cas.\n    def test_diviser_cinq_string(self):\n        ## GIVEN\n        nombre = \"a\"\n\n        ## WHEN / THEN\n        with self.assertRaises(TypeError):\n            OperationMathematiques().diviser_cinq_par(nombre)\nMais il est quand mÃªme prÃ©fÃ©rable de vÃ©rifier dans votre mÃ©thode que le paramÃ¨tre est bien de type numÃ©rique et de dÃ©cider quoi faire si ce nâ€™est pas le cas.\nğŸ’¡ Ce quâ€™il faut retenir sur le test unitaire :\n\nvÃ©rifie quâ€™une mÃ©thode fait ce quâ€™elle doit faire\nil faut tester les cas nominaux, mais Ã©galement les cas Ã  la marge et les erreurs\nun test unitaire teste UNE et UNE seule chose\n\nil faut autant de tests unitaires que de retours possibles\n\nil doit Ãªtre le plus isolÃ© possible (pas de question sur ce point Ã  lâ€™examen)\n\ncâ€™est-Ã -dire que si vous voulez tester une mÃ©thode A, qui elle-mÃªme appelle dâ€™autres mÃ©thodes B, C, Dâ€¦\nle test ne doit se faire que sur la mÃ©thode A\nPour cela, il faut mocker le comportement des autres mÃ©thodes"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-test-driven-development-tdd",
    "href": "doc/cours/tests-unitaires.html#les-test-driven-development-tdd",
    "title": "Les tests unitaires",
    "section": "Les Test Driven Development (TDD)",
    "text": "Les Test Driven Development (TDD)\nQuand tester ?\nâ€¦\nLa meilleure pratique lorsque lâ€™on veut crÃ©er une fonction est de dâ€™abord crÃ©er les tests qui permettront de vÃ©rifier que la fonction fait ce quâ€™elle doit faire.\nCela peut paraÃ®tre un peu Ã©trange, mais en fait pas tant que Ã§a. Lorsque vous codez une fonction, vous savez avant de commencer :\n\nquels seront les paramÃ¨tres en entrÃ©e\nquels rÃ©sultats vous attendez en sortie\ndonc vous avez dÃ©jÃ  quoi tester !\n\nLa pratique du TDD a le gros avantage que cela nous force Ã  Ã©crire des tests et de prendre le temps de bien faire les choses. Pour adhÃ©rer au TDD il faut vraiment se faire violence au dÃ©but, mais au final cette pratique est trÃ¨s bÃ©nÃ©fique.\nSinon, si lâ€™on Ã©crit la fonction en premier, une fois que lâ€™on a terminÃ©, il y a 9 chances sur 10 que lâ€™on se dise : â€œcâ€™est bon Ã§a marche, pas la peine de testerâ€¦â€. Et Ã§a câ€™est pas bien !!!"
  },
  {
    "objectID": "doc/tp/tp2.html",
    "href": "doc/tp/tp2.html",
    "title": "Webservices et formats de donnÃ©es",
    "section": "",
    "text": "ğŸ˜± Comme vous pouvez le constater, le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mÃ©lange explications complÃ¨tes et manipulations pour Ãªtre au maximum autosuffisant. Vous nâ€™allez surement pas terminer le sujet, ce nâ€™est pas grave. Il est lÃ  pour vous aider lors du projet informatique.\nâ— Il est possible que les copier-coller fonctionnent Ã©trangement (caractÃ¨re de fin de ligne qui disparaissent, indentation qui change). Faites-y attention !\nCe TP mÃªle explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appelÃ©es â€œâœï¸Hands onâ€. Câ€™est Ã  ce moment lÃ  que vous devez faire ce qui est Ã©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissances pour plus tard, mais prÃ©fÃ©rez toujours les explications orales, surtout pour poser des questions.\n\nDans ce TP vous allez :\n\nFaire des appels Ã  un webservice Ã  la main avec Insomnia\nFaire des appels Ã  un webservice avec la bibliothÃ¨que python requests\nDÃ©couvrir la page swagger dâ€™un webservice\nManipuler diffÃ©rents formats de donnÃ©es\nCrÃ©er un webservice avec le framework python fastAPI"
  },
  {
    "objectID": "doc/tp/tp2.html#avant-de-commencer",
    "href": "doc/tp/tp2.html#avant-de-commencer",
    "title": "Webservices et formats de donnÃ©es",
    "section": "",
    "text": "ğŸ˜± Comme vous pouvez le constater, le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mÃ©lange explications complÃ¨tes et manipulations pour Ãªtre au maximum autosuffisant. Vous nâ€™allez surement pas terminer le sujet, ce nâ€™est pas grave. Il est lÃ  pour vous aider lors du projet informatique.\nâ— Il est possible que les copier-coller fonctionnent Ã©trangement (caractÃ¨re de fin de ligne qui disparaissent, indentation qui change). Faites-y attention !\nCe TP mÃªle explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appelÃ©es â€œâœï¸Hands onâ€. Câ€™est Ã  ce moment lÃ  que vous devez faire ce qui est Ã©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissances pour plus tard, mais prÃ©fÃ©rez toujours les explications orales, surtout pour poser des questions.\n\nDans ce TP vous allez :\n\nFaire des appels Ã  un webservice Ã  la main avec Insomnia\nFaire des appels Ã  un webservice avec la bibliothÃ¨que python requests\nDÃ©couvrir la page swagger dâ€™un webservice\nManipuler diffÃ©rents formats de donnÃ©es\nCrÃ©er un webservice avec le framework python fastAPI"
  },
  {
    "objectID": "doc/tp/tp2.html#appeler-un-webservice-Ã -la-main",
    "href": "doc/tp/tp2.html#appeler-un-webservice-Ã -la-main",
    "title": "Webservices et formats de donnÃ©es",
    "section": "1 Appeler un webservice Ã  la main",
    "text": "1 Appeler un webservice Ã  la main\nLa premiÃ¨re partie de ce TP ne nÃ©cessite pas dâ€™Ã©crire du code, mais seulement de faire des requÃªtes Ã  un webservice en utilisant Insomnia.\n\n1.1 Webservices\n\nğŸ“– Webservice : le terme webservice est un terme vaste et il serait compliquÃ© dâ€™en donner une dÃ©finition courte (article wikipedia). Dans le cadre du projet un webservice dÃ©signe une application accessible via le protocole HTTP (HyperText Transfer Protocol) qui respecte gÃ©nÃ©ralement lâ€™architecture REST (* REpresentational State Transfer). Mais il en existe dâ€™autre comme SOAP (Simple Objet* Access Protocol) ou RPC (Remote Procedure Call)\n\nEn dâ€™autres termes, un webservice est une application accessible via le web que lâ€™on va pouvoir requÃªter soit pour obtenir des ressources, soit pour modifier les ressources accessibles. Un webservice peut seulement avoir pour but dâ€™Ãªtre une point dâ€™accÃ¨s unique et normalisÃ© Ã  des donnÃ©es (comme une interface Ã  une base de donnÃ©es), mais il peut Ã©galement Ãªtre une maniÃ¨re de contrÃ´ler un systÃ¨me dâ€™information (lancer des travaux, les mettre en attente, rÃ©cupÃ©rer des rÃ©sultats, etc)\nLes webservices utilisent le protocole HTTP qui est le protocole du web (et pas dâ€™internet). Câ€™est celui que vous utilisez sans le savoir avec votre navigateur web. RequÃªter un webservice se fait presque comme requÃªter une page web. Pour cela il vous faut lâ€™adresse de la ressource, son Uniforme Resource Identifier, ou URI (câ€™est une notion plus gÃ©nÃ©rale que les Uniforme Resource Locator, ou URL), une mÃ©thode (GET, POST, PUT, DELETE, liste des mÃ©thodes), et potentiellement des donnÃ©es.\n\n\n1.2 DÃ©couverte dâ€™Insomnia et premiÃ¨res requÃªtes GET\nâœï¸Hands on 1\n\nLancez le programme Insomnia (recherchez dans le menu dÃ©marrer)\nCrÃ©ez une collection de requÃªte\n\nbouton Create Ã  droite\npuis cliquez sur votre collection\n\nCrÃ©ez une nouvelle requÃªte\n\nen appuyant sur CTRL+N\ndonnez lui un nom\nvÃ©rifiez que câ€™est bien une requÃªte de type GET\n\nDans la barre dâ€™adresse, testez les requÃªtes ci-dessous\n\nRegardez la rÃ©ponse dans la partie droite de votre Ã©cran.\nQuelles sont les similaritÃ©s entre les rÃ©ponses ?\n\n\nRequÃªtes Ã  tester :\n\nWebservice sur les Ã©missions carbone du Royaume-Uni :\n\napi.carbonintensity.org.uk/intensity\napi.carbonintensity.org.uk/intensity/date/{date}\n\nen remplaÃ§ant {date} par la date de votre choix au format YYYY-MM-DD\n\n\nWebservice pour obtenir diffÃ©rents jeux de donnÃ©es ouverts de la ville de Rennes\n\ndata.rennesmetropole.fr/api/records/1.0/search?dataset=menus-cantines\nTestez diffÃ©rentes valeurs pour dataset :eco-counter-data, rva-bal, resultats-des-elections-municipales-2020-a-acigne\nAjouter Ã  la fin de lâ€™URI le paramÃ¨tre rows\n\npour faire varier le nombre de lignes que vous recevez\najouter simplement &rows=X avec X le nombre de lignes\n\n\nQuelques mÃ©thodes du webservice utiles pour votre projet informatique (voyez cela avec votre tuteur)\n\n\n\n\n1.3 RequÃªtes avancÃ©es\nâœï¸Hands on 2 (toujours avec Insomnia)\n\nFaites une requÃªte avec la mÃ©thode GET sur la ressource suivante. Quâ€™obtenez-vous ?\n\nweb-services.domensai.ecole/attack\n\nFaites une requÃªte avec la mÃ©thode GET sur la ressource suivante. Quâ€™obtenez-vous ?\n\nweb-services.domensai.ecole/attack/{identifier}\nen remplaÃ§ant {identifier} par le nom ou lâ€™id dâ€™une attaque que vous venez de rÃ©cupÃ©rer\n\nFaites une requÃªte avec la mÃ©thode GET sur la ressource suivante. Quâ€™obtenez-vous ?\n\nweb-services.domensai.ecole/attack?type_attack_id={id_type}\nen remplaÃ§ant {id_type} par un entier entre 1 et 4.\n\nFaites une requÃªte avec la mÃ©thode GET sur la ressource suivante\n\nweb-services.domensai.ecole/attack?type_attack_name={type attack}\nen remplaÃ§ant {type attack} par special attack ou physical attack ou fixed damage ou status attack\n\nFaites une requÃªte de type POST sur la ressource suivante\n\nweb-services.domensai.ecole/attack\nCliquer sur Body, puis JSON, coller le texte ci-dessous, puis remplacez les valeurs des attributs pour crÃ©er votre propre attaque\n\n{\n  \"name\": \"An awesome name\",\n  \"attack_type\": \"physical attack\"/\"physical attack\"/\"fixed damage\"/\"status attack\",\n  \"power\": 0,\n  \"accuracy\": 0,\n  \"element\": \"An awesome element\",\n  \"description\": \"An awesome description\"\n}\nFaites une requÃªte avec la mÃ©thode GET sur la ressource suivante\n\nweb-services.domensai.ecole/attack/{identifier}\nen remplaÃ§ant {identifier} par le nom ou lâ€™id de lâ€™attaque que vous venez de crÃ©er\n\n\n\n\n\n1.4 Swagger\nDans votre navigateur web allez sur la page http://web-services.domensai.ecole/docs. Cela vous amÃ¨ne sur la page swagger du webservice. Cette page recense tous les endpoints du webservice, et comment les utiliser. Essayez via lâ€™interface de :\n\nmodifier une attaque\nsupprimer une attaque\nafficher une liste de pokÃ©mon\najouter un pokÃ©mon"
  },
  {
    "objectID": "doc/tp/tp2.html#appeler-un-webservice-en-python",
    "href": "doc/tp/tp2.html#appeler-un-webservice-en-python",
    "title": "Webservices et formats de donnÃ©es",
    "section": "2 Appeler un webservice en python",
    "text": "2 Appeler un webservice en python\nAujourdâ€™hui, les plus grands consommateurs de webservices sont les machines. Et donc maintenant nous allons voir comment automatiser des appels Ã  un webservice en python.\n\nğŸ” Aujourdâ€™hui beaucoup dâ€™applications web (par exemple Facebook, Netflix, Dailymotion, Uber) utilisent ce que lâ€™on appelle des architectures â€œmicro servicesâ€.\nLes Ã©changes entre leurs composants applicatifs (par exemple entre leurs interface homme machine (IHM) et leurs services internes) se font via des webservices Ã  but unique. Cela permet dâ€™avoir des modules dÃ©couplÃ©s les uns des autres car ils communiquent uniquement via requÃªte HTTP, ou avec des systÃ¨mes de gestion dâ€™Ã©vÃ¨nements. Ils ont seulement Ã  savoir comment ils doivent communiquer les uns avec les autres et pas le fonctionnement interne des autres modules.\nLe cÃ´tÃ© nÃ©gatif câ€™est que cela demande de bien documenter ses webservices et de gÃ©rer Ã‰NORMÃ‰MENT dâ€™applications en parallÃ¨le. Amazon, Google, Facebook peuvent se le permettre, par contre une petite entreprise de 10 employÃ©s non.\n\n\n\n2.1 La bibliothÃ¨que requests - Comment Ã§a fonctionne\nLe principe va rester le mÃªme que faire une requÃªte Ã  la main, et on va utiliser la bibliothÃ¨que requests pour avoir seulement Ã  remplir les parties intÃ©ressantes de nos requÃªtes.\nPour faire une requÃªte GET vous allez seulement devoir faire :\nimport requests\n\nresponse = requests.get(\"http://mon-webservice.com\") \nExÃ©cuter cette ligne de code va :\n\nEnvoyer la requÃªte au serveur que vous contactez\nStockez le rÃ©sultat dans la variable response\n\nCette variable response est un objet, et comme tout objet elle a des attributs et des mÃ©thodes, par exemple :\n\nresponse.text : le corps du rÃ©sultat sous forme de string en laissant requests infÃ©rer lâ€™encodage (cela fonctionne souvent). ProblÃ¨me vous avez seulement un string, et ce nâ€™est pas le meilleur format de donnÃ©es Ã  manipuler\nresponse.json() : le corps du rÃ©sultat comme un dict. Câ€™est ce que vous allez faire le plus souvent car le format json est un format simple Ã  manipuler\nresponse.encoding : lâ€™encoding de votre requÃªte (utile en cas de problÃ¨me dâ€™encoding)\nresponse.status_code : le statut de la requÃªte. les principaux sont :\n\n200 : retour gÃ©nÃ©ral pour dire que tout câ€™est bien passÃ©\n201 : ressource crÃ©Ã©e avec succÃ¨s\n202 : requÃªte acceptÃ©e, sans garantie du rÃ©sultat (par exemple dans un systÃ¨me asynchrone)\n400 : erreur de syntaxe dans la requÃªte\n401 : erreur, une authentification est nÃ©cessaire\n403 : la ressource est interdite (droits insuffisants)\n404 : ressource non trouvÃ©e\n405 : une mauvaise mÃ©thode http a Ã©tÃ© utilisÃ©e\n500 : erreur cÃ´tÃ© serveur\n503 : service temporairement indisponible\n\n\nPour rÃ©sumer, les rÃ©sultats 2xx indiquent un succÃ¨s, un rÃ©sultat 4xx ou 5xx un problÃ¨me.\nExemple simple dâ€™utilisation :\nimport requests\nimport json\n\nresponse = requests.get(\"http://mon-webservice.com\")\n\nif response.status_code != 200:\n    raise Exception(\n        \"Cannot reach (HTTP {}): {}\".format(response.status_code, response.text)\n    )\nelse:    \n    print(json.dumps(response.json(), indent=2))       # JSON Pretty print\n\n\n2.2 Mise Ã  jour de votre dÃ©pÃ´t git\n2 possibilitÃ©s au choix\n\n2.2.1 Si vous voulez repartir du code du TP1\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP1\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton SÃ©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nCrÃ©ez un point de sauvegarde de vos travaux de la semaine derniÃ¨re\n\ngit add .\ngit commit -m \"Mon super code du TP1\"\n\nMettez Ã  jour votre dÃ©pÃ´t local\n\ngit pull\n\nPassez sur la branche du TP2\n\ngit checkout tp2_base\n\n\n\n\n\n2.2.2 Si vous nâ€™avez pas le code du TP1 sur votre machine\n\nOuvrez le logiciel Git Bash\n\nCrÃ©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, et collez lÃ  dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP2 && cd $_\n\nClonez le dÃ©pÃ´t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nFermez Git Bash\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton SÃ©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nPassez sur la branche du TP2\n\ngit checkout tp2_base\n\n\n\n\n\n2.2.3 âš ï¸ Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de lâ€™explorer de VSCode (Ã  gauche) doit Ãªtre : ENSAI-2A-complement-info-TP. Si câ€™est TP1, TP2, TP ou autre chose ce nâ€™est pas bon ! Vous allez avoir des soucis dâ€™imports par la suite.\n\nPour pour vÃ©rifier que tout fonctionne : * lancez le fichier __main__.py * lancez les tests unitaires du package business_object * dans terminal : python -m unittest -k test_business_object\n\n\n\n\n2.3 Mes premiÃ¨res requÃªtes en Python\nâœï¸ Hands on 3\n\nSi ce nâ€™est pas dÃ©jÃ  fait (voir README.md), installez dotenv\n\npip install python-dotenv\n\nOuvrez le fichier /src/client/attack_client.py\nComplÃ©tez la mÃ©thode get_attack(int)\n\nprend en paramÃ¨tre un id dâ€™attaque\nva chercher toutes les informations disponibles sur cette attaque\nretourne un objet de type AbstractAttack\n\nPour vous aider, observez la mÃ©thode instantiate_attack() de la classe AttackFactory\nRegardez le fonctionnement de cette mÃ©thode et utilisez la\n\n\ncrÃ©ez la mÃ©thode get_all_attacks()\n\nretourne la liste de tous les attaques disponibles sous la forme dâ€™une liste dâ€™objets AbstractAttack\n\nVÃ©rifiez que vos 2 mÃ©thodes fonctionnent\n\nLancez les tests unitaitres du package test_client\n\n\n\n\n\n2.4 Les requÃªtes plus complexes\nPour le moment nous nous sommes concentrÃ©s sur les requÃªtes GET mais il est bien sÃ»r possible dâ€™en faire dâ€™autre. Par exemple pour les requÃªtes POST, PUTou DELETE voici la syntaxe :\npost = requests.post(\"http://example.org\", json = {'key':'value'})\nput = requests.put(\"http://example.org\", json = {'key':'value'})\ndelete = requests.delete(\"http://example.org\")\nComme vous le voyez, les syntaxes sont trÃ¨s proches de la syntaxe de la mÃ©thode GET. On a seulement ajoutÃ© pour certaines requÃªtes des donnÃ©es. Câ€™est ce que vous avez fait plus tÃ´t avec Insomnia. Pour passer des paramÃ¨tres Ã  votre requÃªte je vous conseille nÃ©anmoins de prÃ©fÃ©rer ce genre de syntaxe :\nurl = \"http://example.org\"\ndata = {'key':'value'}\npost = requests.post(url, json = data)\nCâ€™est la mÃªme chose fonctionnellement, mais il vaut mieux dÃ©finir les Ã©lÃ©ments hors de la requÃªte pour ne pas se perdre.\nIl est Ã©galement possible de passer des entÃªtes http en ajoutant lâ€™attribut headers Ã  la fonction utilisÃ©e.\nheaders = {'accept': 'application/xml'}\nrequests.get('http://example.org', headers=headers)\n\n\n2.5 RequÃªtes avancÃ©es en python\nâœï¸ Hands on 4\n\nDans le module attack_client.py implÃ©mentez les mÃ©thodes suivantes :\n\ncreate_attack(AbstractAttack)\n\nprend une AbstractAttack en paramÃ¨tre\ncrÃ©e une nouvelle ressource dans notre webservice\n\nupdate_attack(AbstractAttack)\n\nprend une AbstractAttack en paramÃ¨tre\nmodifie la ressource associÃ©e dans notre webservice\n\ndelete_attack(AbstractAttack)\n\nprend une AbstractAttack en paramÃ¨tre\nsupprime la ressource associÃ©e dans notre webservice\n\n\nTestez vos mÃ©thodes"
  },
  {
    "objectID": "doc/tp/tp2.html#coder-un-webservice-en-python",
    "href": "doc/tp/tp2.html#coder-un-webservice-en-python",
    "title": "Webservices et formats de donnÃ©es",
    "section": "3 Coder un webservice en python",
    "text": "3 Coder un webservice en python\nAvec les outils Ã  disposition aujourdâ€™hui il est facile de faire un webservice soit mÃªme.\nIl y a trois leaders sur le marchÃ© actuellement pour faire un webservice REST en python: * Django REST, * FlaskRESTful * FastAPI\nChacun Ã  ses avantages et inconvÃ©nients. Django est sÃ»rement le plus complet mais le plus lourd, Flask et FastApi sont plus lÃ©gers et rapides Ã  mettre en place. Le gros avantage de FastApi est la simplicitÃ© pour crÃ©er une page swagger de documentation.\nVoici le code minimal dâ€™un webservice REST avec FastAPI (documentation officielle)\nfrom fastapi import FastAPI\n\n# On instancie le webservice\napp = FastAPI()\n\n# CrÃ©ation d'un enpoint qui rÃ©pond Ã  la mÃ©thode GET Ã  l'adresse \"/\" qui va retourne le message \"Hello World\"\n@app.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello World\"}\n\n# Lancement de l'application sur le le port 80\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=80)\nAppeler la ressource â€œ/â€ du webservice va retourner le json : {\"message\": \"Hello World\"}\nVoici un exemple plus complet inspirÃ© de la documentation officielle (vous voulez crÃ©er un webservice pour exposer vos todos)\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\nfrom starlette import status\nimport uvicorn\n\n# On instancie le webservice\napp = FastAPI()\n\nclass Todo(BaseModel):\n    id : int\n    content : str\n\ntodos = {1 : Todo(1,\"Step 1 : Learn python\")\n        , 2 : Todo(2,\"Step 2 : Work on the IT project\")\n        , 3 : Todo(3,\"Step 3 : ???\")\n        , 4 : Todo(4,\"Step 4 : Profit\")}\n\n# DÃ©finition du endpoint get /todo\n@app.get(\"/todo\")\nasync def get_all_todo():\n    return todos.values()\n\n# DÃ©finition du endpoint get /todo/{id_doto}\n@app.get(\"/todo/{id_toto}\")\nasync def get_todo_by_id(id_toto : int = Path(..., description = \"The `id` of the todo you want to get\")):\n    if todos.get[id_toto] :\n        return todos.get[id_toto]\n    else :\n        return JSONResponse(status_code=status.HTTP_404_NOT_FOUND)\n\n# DÃ©finition du endpoint post /todo\n@app.post(\"/todo\", todo, status_code=201)\nasync def post_todo(todo:Todo):\n    if not todos.get(todo.id):\n        return JSONResponse(status_code=status.HTTP_409_CONFLICT)\n    else :\n        todos[todo.id] = todo\n        return todo\n\n# Lancement de l'application sur le le port 8XXX avec XXX les 3 derniers numÃ©ros de votre id\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=8XXX)\nCe code va crÃ©er un web service qui va rÃ©pondre aux requÃªtes suivantes :\n\nGET host/todo : retourne toutes les tÃ¢ches Ã  faire\nGET host/todo/{todo_id} : retourne la tÃ¢che derriÃ¨re lâ€™id en paramÃ¨tre\nPOST host/todo/ : ajoute la tÃ¢che passÃ©e en corps de la rÃªquete\n\nFastAPI sÃ©rialise pour vous les objets que vous retournez. Donc pas besoin de mettre en forme vos donnÃ©es. NÃ©anmoins, pour plus de clartÃ©, vous pouvez utiliser des classes BaseModel. Ce sont des classes qui ne vont contenir que des attributs que vous pouvez dÃ©clarer sans constructeur:\nclass Todo(BaseModel):\n    id : int\n    content : str\nCes classes peuvent Ãªtre utilisÃ©es en sortie de votre webservice, comme en entrÃ©e (ligne 33). FastApi va faire pour vous tout une sÃ©rie de contrÃ´le sur les types des variables et renvoyer une erreur au client si sa requÃªte nâ€™est pas bien formatÃ©e.\nFondamentalement un webservice est une application comme les autres, mais au lieu dâ€™avoir une interface graphique comme on en a lâ€™habitude en tant quâ€™humain, lâ€™interface est une interface HTTP qui va accepter des requÃªtes et envoyer des rÃ©sultats. Ainsi le diagramme de sÃ©quence des diffÃ©rentes couches qui vont Ãªtre impliquÃ©es dans une requÃªte GET pour rÃ©cupÃ©rer une ressource va ressembler Ã  cela si je reprends le modÃ¨le 3 couches vu en cours.\n\n\n\n\n\nsequenceDiagram\n    participant U as User\n    participant R as Webservice\n    participant S as Service\n    participant D as DAO\n    participant B as Base de donnÃ©es\n    U -&gt;&gt; R : HTTP requÃªte\n    R -&gt;&gt; S : get_by_id()\n    S -&gt;&gt; D : find_by_id()\n    D -&gt;&gt; B : requÃªte SQL (psycopg)\n    B -&gt;&gt; D : curseur SQL (psycopg)\n    D -&gt;&gt; S : instance objet metier\n    S -&gt;&gt; R : instance objet metier\n    Note over S,R: l'objet est potentiellement altÃ©rÃ©\n    R -&gt;&gt; U : RÃ©ponse HTTP\n\n\n\n\n\n\n\n3.1 Mon premier webservice\n\nVÃ©rifiez que le module fastapi est installÃ© (pip list)\n\nSi ce nâ€™est pas le cas : pip install \"fastapi[all]\"\n\nOuvrez le fichier app.py\nLancez ce fichier\n\ntestez les requÃªtes suivantes :\n\nGET http://localhost/hello\nGET http://localhost/hello/everybody\n\n\nArrÃ©tez le webservice\n\nCliquez dans le terminal de VSCode puis CTRL + C\n\n\nâœï¸ Hands on 5\nEn utilsant la liste de personnages dÃ©finie dans le fichier app.py, ajoutez les endpoints suivants : * [ ] GET localhost:80/character : retournera un json contenant une liste des personnages * [ ] PUT localhost:80/character/{id} qui modifiera le nom du personnage Ã  lâ€™index {id} Ã  partir dâ€™un body * [ ] DELETE localhost:80/character/{id} qui supprimera lâ€™Ã©lÃ©ment Ã  lâ€™index {id}\nPour tester les endpoints nÃ©cessitant un body json, vous pouvez utiliser ğŸ‘\n{\n  \"nom\":\"Agneta\",\n  \"age\": 30\n}"
  },
  {
    "objectID": "doc/tp/tp4.html",
    "href": "doc/tp/tp4.html",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "",
    "text": "ğŸ˜± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mÃ©lange explications complÃ¨tes et manipulations pour Ãªtre au maximum autosuffisant. Vous nâ€™allez surement pas terminer le sujet, ce nâ€™est pas grave. Il est lÃ  pour vous aider lors du projet informatique.\nCe TP mÃªle explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appelÃ©es â€œâœï¸Hands onâ€. Câ€™est Ã  ce moment-lÃ  que vous devez faire ce qui est Ã©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais prÃ©fÃ©rez toujours les explications orales.\nDans ce TP vous allez :\nLes instructions de ce TP seront donnÃ©es pour une utilisation de GitHub comme dÃ©pÃ´t distant. Si vous choisissez GitLab ou un autre hÃ©bergeur, Ã  vous de vous adapter (les instructions devraient Ãªtre assez ressemblantes)."
  },
  {
    "objectID": "doc/tp/tp4.html#configuration-de-git",
    "href": "doc/tp/tp4.html#configuration-de-git",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "1 Configuration de Git",
    "text": "1 Configuration de Git\nPour faire dâ€™un seul coup la config Git et la crÃ©ation dâ€™un clÃ© ssh, vous pouvez utiliser les scripts prÃ©sents sur la page Moodle du cours, onglet TP. Sinon cela se fait Ã©galement trÃ¨s vite avec les commandes ci-dessous.\n\n1.1 Configurez Git\nOuvrez Git Bash, puis Ã©xÃ©cutez les commandes suivantes en remplaÃ§ant les valeurs entre &lt;&gt;\n\ngit config --global user.name &lt;prenom&gt; &lt;nom&gt;\ngit config --global user.email &lt;mail_ensai&gt;\ngit config --global core.mergeoptions --no-edit\ngit config --global core.editor \"code -w\"\ngit config --global credential.helper store\npour vÃ©rifier les valeurs saisies : git config -l\n\n\n\n\n1.2 CrÃ©ez une clÃ© ssh\nElle permettra de vous authentifier auprÃ¨s de GitHub. Dans Git Bash :\n\nssh-keygen -t rsa -b 2048 -N '' -q -f ~/.ssh/id_rsa\nmkdir /p/save puis cp -r ~/.ssh /p/save/.ssh pour crÃ©er une sauvegarde de votre clÃ©\n\nPar dÃ©faut la clÃ© est gÃ©nÃ©rÃ©e dans C:/users/idxxxx/.ssh\nSi jamais cette clÃ© venait Ã  disparaitre, utilisez la sauvegarde pour la recopier dans C:/users/idxxxx/.ssh\n\ncat ~/.ssh/id_rsa.pub | clip\n\npour rÃ©cupÃ©rer votre clÃ© publique dans le presse papier\n\nOuvrez un Ã©diteur de texte et collez cette clÃ©\n\ngardez la de cotÃ© quelques minutes, vous allez devoir juste aprÃ¨s coller cette clÃ© dans GitHub\n\n\n\n\n\n1.3 CrÃ©ation de compte sur GitHub\n\nCrÃ©ez un compte utilsateur\n\nhttps://github.com/join\n\nAjouter votre clÃ© publique ssh sur GitHub (lien direct)\n\nCliquez sur votre icone profil en haut Ã  droite\nâš™ï¸ Settings\nSSH and GPG keys\nCliquer sur le bouton New SSH key\n\nTitre : VM ENSAI par exemple\nKey : Collez la clÃ© publique (contenu du fichier id_rsa.pub qui commence par ssh-rsa gÃ©nÃ©rÃ© Ã  lâ€™Ã©tape prÃ©cÃ©dente )"
  },
  {
    "objectID": "doc/tp/tp4.html#travail-en-groupe",
    "href": "doc/tp/tp4.html#travail-en-groupe",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "2 Travail en groupe",
    "text": "2 Travail en groupe\nğŸ’¡ Avec vos camarades de projet, vous devez choisir un site qui va hÃ©berger votre code (GitHub, GitLabâ€¦). Il vous servira de dÃ©pÃ´t commun (ou dÃ©pÃ´t distant).\n\n2.1 CrÃ©ation dâ€™un dÃ©pÃ´t sur GitHub\n\nRepositories &gt; New (ou lien direct)\nRepository name : ENSAI-2A-cinfo-TP4\nCliquez sur le bouton Create new repository\n\nPour le moment ce dÃ©pÃ´t distant est vide\n\n\n\n2.2 Connecter ce dÃ©pÃ´t avec un dÃ©pÃ´t local\nDans les autres TP, vous aviez lâ€™habitude de simplement cloner le dÃ©pÃ´t distant du prof, faire les exercices et câ€™est tout.\nAujourdâ€™hui, vous allez :\n\nCloner le dÃ©pÃ´t distant\n\nPour crÃ©er votre dÃ©pÃ´t local (jusque lÃ , câ€™est toujours pareil)\n\nConnecter votre dÃ©pÃ´t local Ã  votre propre dÃ©pÃ´t distant (celui que vous venez de crÃ©er)\nInteragir entre vos 2 dÃ©pÃ´ts (push, pullâ€¦)\n\n\n\nCrÃ©ez un dossier puis importez le code du TP (branche tp4_base uniquement)\n\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP4 && cd $_\ngit clone -b tp4_base --single-branch https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nModifiez le dÃ©pÃ´t distant en dÃ©clarant le dÃ©pÃ´t que vous avez crÃ©Ã© juste avant\n\ncd ENSAI-2A-complement-info-TP pour vous positionner dans le dÃ©pÃ´t local Git\ngit remote set-url origin git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\n\nen remplaÃ§ant  par votre nom dâ€™utilisateur GitHub\n\ngit remote -v pour vÃ©rifier que le dÃ©pÃ´t distant a bien changÃ©\n\ngit push pour pousser votre code local vers le dÃ©pÃ´t GitHub\n\nRafraÃ®chissez la page GitHub pour vÃ©rifier\n\n\n\n\n\n2.3 Utilisation dâ€™un seul dÃ©pÃ´t par Ã©quipe\nMaintenant vous allez travailler en tant quâ€™Ã©quipe de projet. MÃªme si vous avez tous crÃ©Ã© un dÃ©pÃ´t git, un seul par groupe va Ãªtre utilisÃ©. Vous allez ainsi au sein dâ€™une mÃªme Ã©quipe, rÃ©cupÃ©rer le code de ce dÃ©pÃ´t.\nâš ï¸ Choisissez LE dÃ©pÃ´t que vous allez utiliser (1 seul par Ã©quipe projet) et faÃ®tes les actions suivantes uniquement sur ce dÃ©pÃ´t.\n\nSur la page GitHub du projet\n\nAller dans âš™ï¸ Settings &gt; Collaborators\nCliquer sur le bouton Add people, puis recherchez et ajoutez vos camarades\n\nou directement avec ce lien en remplaÃ§ant \n\nhttps://github.com/&lt;username_github&gt;/ENSAI-2A-cinfo-TP4/settings/access\n\n\n\n\n\n2.4 Import du dÃ©pÃ´t commun pour les autres membres\nPour les autres, il vous faut maintenant tous rÃ©cupÃ©rer le contenu du dÃ©pÃ´t. Dans les commandes ci-dessous, remplacez  par le nom dâ€™utilisateur de celui ou celle qui â€œpossÃ¨deâ€ le dÃ©pÃ´t commun.\n\nAllez sur la page GitHub du dÃ©pÃ´t commun\n\nhttps://github.com//ENSAI-2A-cinfo-TP4\n\nCliquez sur le bouton Code\nCopiez le lien Clone with SSH qui ressemble Ã  ceci : git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\nDans Git Bash, crÃ©ez un nouveau dossier pour mettre votre dÃ©pÃ´t local\n\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP4/depot_commun && cd $_\ngit clone git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\nFermez Git Bash\n\nOuvrez Visual Studio Code, puis ouvrez le dÃ©pÃ´t commun\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP4/depot_commun\ncliquez une fois sur ENSAI-2A-cinfo-TP4\npuis cliquez sur le bouton SÃ©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\n\n\n\n\n2.4.1 âš ï¸ Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de lâ€™explorer de VSCode (Ã  gauche) doit Ãªtre : ENSAI-2A-complement-info-TP. Si câ€™est TP1, TP2, TP3, TP ou autre chose ce nâ€™est pas bon ! Vous allez avoir des soucis dâ€™imports par la suite."
  },
  {
    "objectID": "doc/tp/tp4.html#manipulations-basiques-avec-git",
    "href": "doc/tp/tp4.html#manipulations-basiques-avec-git",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "3 2. Manipulations basiques avec git",
    "text": "3 2. Manipulations basiques avec git\nâœHand on 1 Cette partie Ã  pour but de vous faire essayer des commandes de bases de git.\n\nCrÃ©ez dans votre dÃ©pÃ´t local un fichier hello_&lt;prenom&gt;.txt qui contient par exemple hello &lt;prenom&gt;\nDans le terminal, tapez la commande git status pour voir si votre fichier sâ€™affiche\nCrÃ©ez un fichier hello_&lt;prenom&gt;.log qui contient par exemple aaaaa\nTapez git status pour voir si votre fichier sâ€™affiche\n\nğŸ’¡ Normalement il ne sâ€™affichera pas car si vous ouvrez le fichier .gitignore, vous remarquerez que tous les fichiers *.log sont ignorÃ©s par Git.\n\nTapez git add . pour ajouter Ã  la zone de transit (stagging area) tous les fichiers en attente\ngit status pour vÃ©rifier que votre fichier hello_&lt;prenom&gt; est prÃªt Ã  Ãªtre intÃ©grÃ© au prochain commit\nRÃ©alisez un commit git commit -m \"un super message de commit explicite\"\nModifiez votre fichier hello_&lt;prenom&gt;.txt puis faites de nouveau les Ã©tapes prÃ©cÃ©dentes (status, add, status, commit)\nRegardez votre historique avec un git log --all --decorate --oneline --graph\nPoussez vos modifications vers le dÃ©pÃ´t commun avec un git push\n\nSi quelquâ€™un a dÃ©jÃ  poussÃ© avant vous, vous allez obtenir un message proche de celui-ci\n\nTo https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\nMerge branch 'main' of https://github.com/ludo2ne/ENSAI-2A-complement-info-TP\n ! [rejected]        main -&gt; main (fetch first)\nerror: failed to push some refs to 'https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git'\nhint: Updates were rejected because the remote contains work that you do\nhint: not have locally. This is usually caused by another repository pushing\nhint: to the same ref. You may want to first merge the remote changes (e.g.,\nhint: 'git pull') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\nDans ce cas, faites dans lâ€™ordre\n\ngit pull : pour mettre Ã  jour votre dÃ©pÃ´t local Ã  partir du dÃ©pÃ´t distant\ngit push : pour partager vos modifications faites en local vers le dÃ©pÃ´t distant\n\nUne fois que tous les membres de lâ€™Ã©quipe ont rÃ©ussi Ã  faire leur push, faites tous un git pull pour avoir chacun des dÃ©pÃ´ts identiques."
  },
  {
    "objectID": "doc/tp/tp4.html#gÃ©rer-un-conflit-avec-git",
    "href": "doc/tp/tp4.html#gÃ©rer-un-conflit-avec-git",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "4 GÃ©rer un conflit avec git",
    "text": "4 GÃ©rer un conflit avec git\n\n4.1 DÃ©finition\nUn conflit apparait lorsque 2 versions sâ€™affrontent et que Git ne peut pas savoir laquelle est la bonne.\nExemple : Un dÃ©pÃ´t commun contient un seul fichier hello.txt qui contient hello world\n\nAlice et Bob clonent ce dÃ©pÃ´t\nEn local Alice modifie le contenu du fichier en hello Alice et fait un add puis commit\nBob fait de mÃªme en saisissant hello Bob\nAlice fait un push et met Ã  jour le dÃ©pÃ´t commun\nBob fait un push et Ã©choue. Git dit que son dÃ©pÃ´t local nâ€™est pas Ã  jour\nBob fait donc un pull pour mettre Ã  jour son dÃ©pÃ´t local. Câ€™est Ã  ce moment que le conflit apparait.\n\nBob voulais modifier le contenu du fichier en Hello Bob alors quâ€™Alice a dÃ©jÃ  modifiÃ© en Hello Alice\n\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\nHello Bob           (Votre modification - current change)\n=======\nHello Alice         (La modification du dÃ©pÃ´t distant - incoming change)\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nBob doit maintenant dÃ©cider quelle version il souhaite garder\nBob choisit Hello Bob, fait un add, commit, push et câ€™est terminÃ©\n\n\n\n\n4.2 RÃ©solvez vos conflits\nâœHand on 2 Maintenant vous allez essayer de crÃ©er, puis rÃ©soudre un conflit !\n\nChoisissez un fichier commun dont vous allez tous modifier le contenu\nModifiez chacun de votre cotÃ© (sur vos dÃ©pÃ´t locaux) ce fichier\nPoussez votre code\n\nLa premiÃ¨re personne Ã  pousser ne devrait pas avoir de conflit, les autres oui. Recommencez la procÃ©dure ci-dessus avec un autre fichier pour que tout le monde expÃ©rimente la rÃ©solution de conflits.\nLorsque vous avez un conflit Ã  gÃ©rer :\n\nCorrigez Ã  la main le fichier\n\npar exemple en imposant votre modification\net en supprimant les ======= et les &gt;&gt;&gt;&gt;&gt;&gt;&gt;\n\ngit add . puis git commit -m \"mon super message\" && git push\n\nEn conclusion, avoir des conflits nâ€™est pas grave mÃªme si câ€™est un peu pÃ©nible Ã  rÃ©soudre. Pour essayer dâ€™Ã©viter les conflits :\n\nfaites des pull et push rÃ©guliers\nessayez de travailler en Ã©quipe mais sur des fichiers diffÃ©rents"
  },
  {
    "objectID": "doc/tp/tp4.html#bilan-des-trois-premiers-tp",
    "href": "doc/tp/tp4.html#bilan-des-trois-premiers-tp",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "5 Bilan des trois premiers TP",
    "text": "5 Bilan des trois premiers TP\nSi lâ€™on reprend le modÃ¨le en couches prÃ©sentÃ© en cours, voici ce que lâ€™on a fait depuis le dÃ©but des TP :\n\n\n5.1 La couche service\nActuellement notre couche service est bien maigre. En effet notre application nâ€™a aucune logique mÃ©tier. On a bien des objets mÃ©tiers que lâ€™on persiste mais aucune rÃ©elle application derriÃ¨re. La raison Ã  ce manque provient du fait que cette couche est la partie la plus longue Ã  dÃ©velopper car elle contient la logique mÃ©tier de lâ€™application.\nEt le but de ces TP nâ€™est pas de vous montrer comment faire une petit application type jeu PokÃ©mon en console. Ils ont pour vocations Ã  vous montrer une architecture de base en couche et vous prÃ©senter comment la rÃ©aliser. Dans votre projet, il est possible que ce soit la couche service qui vous demande le plus de travail.\n\n\n\n5.2 La couche contrÃ´leur\nLa notion de contrÃ´leur apparait avec le design pattern MVC (Model-View-Controler). Mais câ€™est un patron de conception beaucoup trop complexe pour faire un simple affichage en console.\nÃ€ la place vous allez utiliser le patron Model-View-Presenter qui est plus simple car il reprend le principe de couches qui se succÃ¨dent.\nIl nâ€™y aura donc pas de couche Controleur mais une couche View qui fera office dâ€™IHM et appelera directement les services nÃ©cessaires.\n\n\n\n5.3 La couche view\nLe fonctionnement est le suivant lorsque vous lancez lâ€™application :\n\nvous arrivez sur une vue dâ€™accueil qui propose diffÃ©rents choix\nselon le choix, zÃ©ro, un ou plusieurs services sont appelÃ©s\npuis vous arrivez vers une nouvelle vue (ou Ã©ventuellement resterez sur la mÃªme)\n\nExemple :\n\nVous Ãªtes sur la Vue dâ€™accueil et vous sÃ©lectionner se connecter\nVous basculez vers la Vue de connexion\n\ndans cette vue, on vous demande de saisir user et password\nune fois la saisie terminÃ©e, le Service des utilisateur va Ãªtre appelÃ©\nce service a une mÃ©thode verification_connexion()\n\ncette mÃ©thode va appeler la DAO Utilisateur pour vÃ©rifier que lâ€™utilisateur et son mot de passe existent bien en base de donnÃ©es\n\n\nsi la vÃ©rification est ok, vous basculez vers la Vue Menu utilisateur oÃ¹ va par exemple sâ€™afficher la liste des actions autorisÃ©es\nâ€¦"
  },
  {
    "objectID": "doc/tp/tp4.html#une-session-pour-les-gouverner-toutes",
    "href": "doc/tp/tp4.html#une-session-pour-les-gouverner-toutes",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "6 Une session pour les gouverner toutes",
    "text": "6 Une session pour les gouverner toutes\nLÃ  vous pouvez vous dire :\n\nok on va se balader de vues en vues, Ã§a Ã§a va\nmais imaginons lâ€™exemple suivant :\n\non passe par la Vue de connexion et on se connecte avec lâ€™utilisateur Michel\non arrive sur la Vue Menu utilisateur et on se balade dans les diffÃ©rentes vues\nun peu plus tard, on arrive sur la Vue dâ€™ajout de Pokemon, on sÃ©lectionne celui qui nous plait et on valide\ncela va aboutir Ã  lâ€™appel dâ€™une mÃ©thode DAO du type ajouter_pokemon(utilisateur, pokemon)\nCette mÃ©thode a 2 arguments\n\npokemon : ok facile Ã  rÃ©cupÃ©rer, on vient juste avant de le sÃ©lectionner\nutilisateur : lÃ  câ€™est moins facile car la derniÃ¨re fois quâ€™on avait lâ€™objet utilisateur Ã  portÃ©e câ€™Ã©tait dans la Vue de connexion\n\n\nEst-ce que une fois connectÃ©, on doit passer lâ€™utilisateur en paramÃ¨tre de toutes les mÃ©thodes que lâ€™on va appeler ?\n\nHeureusement NON, ce serait trop compliquÃ©\nğŸ’¡ câ€™est ici que lâ€™objet Session va nous Ãªtre utile\n\n\nDans notre Session, nous allons pouvoir stocker des objets utiles, par exemple lâ€™utilisateur actif.\nAinsi, une fois connectÃ©, on stocke lâ€™utilisateur en session et on peut se servir de cet objet Ã  tout moment !\nVoici les liens entre notre Session et nos Views :\n\n\n\n\n\nclassDiagram\n\nclass Session{\n    &lt;&lt;singleton&gt;&gt;\n    user_name : str\n    selected_pokemon : AbstractPokemon\n}\n\nclass AbstractView{\n    &lt;&lt;abstract&gt;&gt;\n    +display_info()* None\n    +make_choice()* AbstractView\n}\n\nclass StartView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nclass ListPokemonView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nclass ListAttackView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nSession &lt;..AbstractView: \"use\"\n\nAbstractView &lt;|-- StartView\nAbstractView &lt;|-- ListPokemonView\nAbstractView &lt;|-- ListAttackView\n\n\n\n\n\n\nToute nos Views vont hÃ©riter de la classe AbstractView. Cette classe va contenir deux mÃ©thodes abstraites :\n\ndisplay_info() : qui va juste dÃ©terminer lâ€™affichage en console\nmake_choice() : qui va gÃ©rer les choix de lâ€™utilisateur et lâ€™envoyer vers une autre page.\n\nEn plus de cela nous allons gÃ©rer tous les attributs utilisÃ©s par les View dans un objet Session qui sera un singleton ce qui nous assurera que chaque accÃ¨s Ã  cet objet retourne la mÃªme instance et donc les mÃªmes valeurs stockÃ©es.\nCette architecture vous permet de sÃ©parer vos diffÃ©rents menu en fichiers sÃ©parÃ©s et dâ€™avoir un fonctionnement simple car chaque menu retourne un autre menu simplement.\nâš ï¸ La crÃ©ation de vos menus peut gÃ©nÃ©rer des problÃ¨mes de dÃ©pendances circulaires. En effet si la page A envoie sur la page B et la page B envoie sur la page A, en fonction de la faÃ§on dont vous gÃ©rez vos imports vous allez voir un problÃ¨me de dÃ©pendances circulaires. Quand le problÃ¨me se prÃ©sentera voici 2 solutions possibles :\n\nremplacer from X import Y en import Y as name\ndÃ©placer vos imports dans la fonction qui en a besoin"
  },
  {
    "objectID": "doc/tp/tp4.html#inquirerpy",
    "href": "doc/tp/tp4.html#inquirerpy",
    "title": "Git et CrÃ©ation dâ€™une IHM",
    "section": "7 InquirerPy",
    "text": "7 InquirerPy\nPour nous faciliter la gestion de la console nous allons utiliser la bibliothÃ¨que python InquirerPy. Elle permet de crÃ©er facilement des applications interactives en console. Le projet est bien documentÃ© avec plusieurs exemples de code, faciles Ã  transposer.\n\nLancez le __main__.py et testez un peu lâ€™application\nRegardez les fichiers du package view pour essayer de comprendre comment fonctionnent les vues. Le principe est toujours le mÃªme lorsque lâ€™on arrive sur une nouvelle vue :\n\non rÃ©pond aux questions demandÃ©es\nun traitement est Ã©ventuellement fait (appel Ã  des services)\non bascule vers une autre vue\n\n\n\n7.1 Mes premiÃ¨res View\nâœHand on 3\nRÃ©partissez vous le travail entre membre du groupe pour implÃ©menter les Views suivantes :\n\nAffichage PokÃ©mon:\n\nPokemonListView : qui permet de visualiser 30 PokÃ©mons sommairement. Il est possible de sÃ©lectionner un pokÃ©mon pour aller sur PokemonDetailsView. Vous pouvez permettre un retour arriÃ¨re sur la StartView si vous le souhaitez.\nPokemonDetailsView : qui affiche les dÃ©tails du PokÃ©mon sÃ©lectionnÃ© comme ses statistiques et ses attaques. Renvoie sur la StartView ou PokemonListeView en fonction du choix de lâ€™utilisateur.\n\nAffichage attaque:\n\nAttackListView : qui permet de visualiser 50 attaques sommairement et dâ€™en sÃ©lectionner une pour aller sur AttackDetailsView. Vous pouvez permettre un retour arriÃ¨re sur la StartView.\nAttackDetailsView : qui affiche les dÃ©tails de lâ€™attaque sÃ©lectionnÃ©e, comme par exemple ses caractÃ©ristiques (name, power, description), mais Ã©galement quels sont les PokÃ©mons qui peuvent lâ€™apprendre. Renvoie sur la StartView ou AttackListView en fonction du choix de lâ€™utilisateur.\n\nCreatePokemonView : qui permet de crÃ©er un PokÃ©mon et le mettre en session. AprÃ¨s validation de lâ€™utilisateur on retourne sur StartView\n\nQuelques astuces :\n\nPokemonService dispose dâ€™une mÃ©thode get_pokemon_from_webservice(limit:int, offset:int) pour rÃ©cupÃ©rer des pokÃ©mons de la base\nAttackService dispose dâ€™une mÃ©thode get_attacks_from_webservice(limit:int, offset:int) pour rÃ©cupÃ©rer des attaques de la base\nde nombreux exemples sont disponibles sur la doc InquirerPy\n\nQuand vous avez terminÃ© une classe, faites un commit, puis poussez sur le dÃ©pÃ´t distant.\n\nMerci dâ€™avoir participÃ© et Vive les Pokemons !"
  }
]