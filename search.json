[
  {
    "objectID": "doc/tp/tp2.html",
    "href": "doc/tp/tp2.html",
    "title": "Webservices et formats de donn√©es",
    "section": "",
    "text": "üò± Comme vous pouvez le constater, le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il m√©lange explications compl√®tes et manipulations pour √™tre au maximum autosuffisant. Vous n‚Äôallez surement pas terminer le sujet, ce n‚Äôest pas grave. Il est l√† pour vous aider lors du projet informatique.\n‚ùó Il est possible que les copier-coller fonctionnent √©trangement (caract√®re de fin de ligne qui disparaissent, indentation qui change). Faites-y attention !\nCe TP m√™le explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appel√©es ‚Äú‚úçÔ∏èHands on‚Äù. C‚Äôest √† ce moment l√† que vous devez faire ce qui est √©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissances pour plus tard, mais pr√©f√©rez toujours les explications orales, surtout pour poser des questions.\n\nDans ce TP vous allez :\n\nFaire des appels √† un webservice √† la main avec Insomnia\nFaire des appels √† un webservice avec la biblioth√®que python requests\nD√©couvrir la page swagger d‚Äôun webservice\nManipuler diff√©rents formats de donn√©es\nCr√©er un webservice avec le framework python fastAPI"
  },
  {
    "objectID": "doc/tp/tp2.html#avant-de-commencer",
    "href": "doc/tp/tp2.html#avant-de-commencer",
    "title": "Webservices et formats de donn√©es",
    "section": "",
    "text": "üò± Comme vous pouvez le constater, le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il m√©lange explications compl√®tes et manipulations pour √™tre au maximum autosuffisant. Vous n‚Äôallez surement pas terminer le sujet, ce n‚Äôest pas grave. Il est l√† pour vous aider lors du projet informatique.\n‚ùó Il est possible que les copier-coller fonctionnent √©trangement (caract√®re de fin de ligne qui disparaissent, indentation qui change). Faites-y attention !\nCe TP m√™le explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appel√©es ‚Äú‚úçÔ∏èHands on‚Äù. C‚Äôest √† ce moment l√† que vous devez faire ce qui est √©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissances pour plus tard, mais pr√©f√©rez toujours les explications orales, surtout pour poser des questions.\n\nDans ce TP vous allez :\n\nFaire des appels √† un webservice √† la main avec Insomnia\nFaire des appels √† un webservice avec la biblioth√®que python requests\nD√©couvrir la page swagger d‚Äôun webservice\nManipuler diff√©rents formats de donn√©es\nCr√©er un webservice avec le framework python fastAPI"
  },
  {
    "objectID": "doc/tp/tp2.html#appeler-un-webservice-√†-la-main",
    "href": "doc/tp/tp2.html#appeler-un-webservice-√†-la-main",
    "title": "Webservices et formats de donn√©es",
    "section": "1 Appeler un webservice √† la main",
    "text": "1 Appeler un webservice √† la main\nLa premi√®re partie de ce TP ne n√©cessite pas d‚Äô√©crire du code, mais seulement de faire des requ√™tes √† un webservice en utilisant Insomnia.\n\n1.1 Webservices\n\nüìñ Webservice : le terme webservice est un terme vaste et il serait compliqu√© d‚Äôen donner une d√©finition courte (article wikipedia). Dans le cadre du projet un webservice d√©signe une application accessible via le protocole HTTP (HyperText Transfer Protocol) qui respecte g√©n√©ralement l‚Äôarchitecture REST (* REpresentational State Transfer). Mais il en existe d‚Äôautre comme SOAP (Simple Objet* Access Protocol) ou RPC (Remote Procedure Call)\n\nEn d‚Äôautres termes, un webservice est une application accessible via le web que l‚Äôon va pouvoir requ√™ter soit pour obtenir des ressources, soit pour modifier les ressources accessibles. Un webservice peut seulement avoir pour but d‚Äô√™tre une point d‚Äôacc√®s unique et normalis√© √† des donn√©es (comme une interface √† une base de donn√©es), mais il peut √©galement √™tre une mani√®re de contr√¥ler un syst√®me d‚Äôinformation (lancer des travaux, les mettre en attente, r√©cup√©rer des r√©sultats, etc)\nLes webservices utilisent le protocole HTTP qui est le protocole du web (et pas d‚Äôinternet). C‚Äôest celui que vous utilisez sans le savoir avec votre navigateur web. Requ√™ter un webservice se fait presque comme requ√™ter une page web. Pour cela il vous faut l‚Äôadresse de la ressource, son Uniforme Resource Identifier, ou URI (c‚Äôest une notion plus g√©n√©rale que les Uniforme Resource Locator, ou URL), une m√©thode (GET, POST, PUT, DELETE, liste des m√©thodes), et potentiellement des donn√©es.\n\n\n1.2 D√©couverte d‚ÄôInsomnia et premi√®res requ√™tes GET\n‚úçÔ∏èHands on 1\n\nLancez le programme Insomnia (recherchez dans le menu d√©marrer)\nCr√©ez une collection de requ√™te\n\nbouton Create √† droite\npuis cliquez sur votre collection\n\nCr√©ez une nouvelle requ√™te\n\nen appuyant sur CTRL+N\ndonnez lui un nom\nv√©rifiez que c‚Äôest bien une requ√™te de type GET\n\nDans la barre d‚Äôadresse, testez les requ√™tes ci-dessous\n\nRegardez la r√©ponse dans la partie droite de votre √©cran.\nQuelles sont les similarit√©s entre les r√©ponses ?\n\n\nRequ√™tes √† tester :\n\nWebservice sur les √©missions carbone du Royaume-Uni :\n\napi.carbonintensity.org.uk/intensity\napi.carbonintensity.org.uk/intensity/date/{date}\n\nen rempla√ßant {date} par la date de votre choix au format YYYY-MM-DD\n\n\nWebservice pour obtenir diff√©rents jeux de donn√©es ouverts de la ville de Rennes\n\ndata.rennesmetropole.fr/api/records/1.0/search?dataset=menus-cantines\nTestez diff√©rentes valeurs pour dataset :eco-counter-data, rva-bal, resultats-des-elections-municipales-2020-a-acigne\nAjouter √† la fin de l‚ÄôURI le param√®tre rows\n\npour faire varier le nombre de lignes que vous recevez\najouter simplement &rows=X avec X le nombre de lignes\n\n\nQuelques m√©thodes du webservice utiles pour votre projet informatique (voyez cela avec votre tuteur)\n\n\n\n\n1.3 Requ√™tes avanc√©es\n‚úçÔ∏èHands on 2 (toujours avec Insomnia)\n\nFaites une requ√™te avec la m√©thode GET sur la ressource suivante. Qu‚Äôobtenez-vous ?\n\nweb-services.domensai.ecole/attack\n\nFaites une requ√™te avec la m√©thode GET sur la ressource suivante. Qu‚Äôobtenez-vous ?\n\nweb-services.domensai.ecole/attack/{identifier}\nen rempla√ßant {identifier} par le nom ou l‚Äôid d‚Äôune attaque que vous venez de r√©cup√©rer\n\nFaites une requ√™te avec la m√©thode GET sur la ressource suivante. Qu‚Äôobtenez-vous ?\n\nweb-services.domensai.ecole/attack?type_attack_id={id_type}\nen rempla√ßant {id_type} par un entier entre 1 et 4.\n\nFaites une requ√™te avec la m√©thode GET sur la ressource suivante\n\nweb-services.domensai.ecole/attack?type_attack_name={type attack}\nen rempla√ßant {type attack} par special attack ou physical attack ou fixed damage ou status attack\n\nFaites une requ√™te de type POST sur la ressource suivante\n\nweb-services.domensai.ecole/attack\nCliquer sur Body, puis JSON, coller le texte ci-dessous, puis remplacez les valeurs des attributs pour cr√©er votre propre attaque\n\n{\n  \"name\": \"An awesome name\",\n  \"attack_type\": \"physical attack\"/\"physical attack\"/\"fixed damage\"/\"status attack\",\n  \"power\": 0,\n  \"accuracy\": 0,\n  \"element\": \"An awesome element\",\n  \"description\": \"An awesome description\"\n}\nFaites une requ√™te avec la m√©thode GET sur la ressource suivante\n\nweb-services.domensai.ecole/attack/{identifier}\nen rempla√ßant {identifier} par le nom ou l‚Äôid de l‚Äôattaque que vous venez de cr√©er\n\n\n\n\n\n1.4 Swagger\nDans votre navigateur web allez sur la page http://web-services.domensai.ecole/docs. Cela vous am√®ne sur la page swagger du webservice. Cette page recense tous les endpoints du webservice, et comment les utiliser. Essayez via l‚Äôinterface de :\n\nmodifier une attaque\nsupprimer une attaque\nafficher une liste de pok√©mon\najouter un pok√©mon"
  },
  {
    "objectID": "doc/tp/tp2.html#appeler-un-webservice-en-python",
    "href": "doc/tp/tp2.html#appeler-un-webservice-en-python",
    "title": "Webservices et formats de donn√©es",
    "section": "2 Appeler un webservice en python",
    "text": "2 Appeler un webservice en python\nAujourd‚Äôhui, les plus grands consommateurs de webservices sont les machines. Et donc maintenant nous allons voir comment automatiser des appels √† un webservice en python.\n\nüîç Aujourd‚Äôhui beaucoup d‚Äôapplications web (par exemple Facebook, Netflix, Dailymotion, Uber) utilisent ce que l‚Äôon appelle des architectures ‚Äúmicro services‚Äù.\nLes √©changes entre leurs composants applicatifs (par exemple entre leurs interface homme machine (IHM) et leurs services internes) se font via des webservices √† but unique. Cela permet d‚Äôavoir des modules d√©coupl√©s les uns des autres car ils communiquent uniquement via requ√™te HTTP, ou avec des syst√®mes de gestion d‚Äô√©v√®nements. Ils ont seulement √† savoir comment ils doivent communiquer les uns avec les autres et pas le fonctionnement interne des autres modules.\nLe c√¥t√© n√©gatif c‚Äôest que cela demande de bien documenter ses webservices et de g√©rer √âNORM√âMENT d‚Äôapplications en parall√®le. Amazon, Google, Facebook peuvent se le permettre, par contre une petite entreprise de 10 employ√©s non.\n\n\n\n2.1 La biblioth√®que requests - Comment √ßa fonctionne\nLe principe va rester le m√™me que faire une requ√™te √† la main, et on va utiliser la biblioth√®que requests pour avoir seulement √† remplir les parties int√©ressantes de nos requ√™tes.\nPour faire une requ√™te GET vous allez seulement devoir faire :\nimport requests\n\nresponse = requests.get(\"http://mon-webservice.com\") \nEx√©cuter cette ligne de code va :\n\nEnvoyer la requ√™te au serveur que vous contactez\nStockez le r√©sultat dans la variable response\n\nCette variable response est un objet, et comme tout objet elle a des attributs et des m√©thodes, par exemple :\n\nresponse.text : le corps du r√©sultat sous forme de string en laissant requests inf√©rer l‚Äôencodage (cela fonctionne souvent). Probl√®me vous avez seulement un string, et ce n‚Äôest pas le meilleur format de donn√©es √† manipuler\nresponse.json() : le corps du r√©sultat comme un dict. C‚Äôest ce que vous allez faire le plus souvent car le format json est un format simple √† manipuler\nresponse.encoding : l‚Äôencoding de votre requ√™te (utile en cas de probl√®me d‚Äôencoding)\nresponse.status_code : le statut de la requ√™te. les principaux sont :\n\n200 : retour g√©n√©ral pour dire que tout c‚Äôest bien pass√©\n201 : ressource cr√©√©e avec succ√®s\n202 : requ√™te accept√©e, sans garantie du r√©sultat (par exemple dans un syst√®me asynchrone)\n400 : erreur de syntaxe dans la requ√™te\n401 : erreur, une authentification est n√©cessaire\n403 : la ressource est interdite (droits insuffisants)\n404 : ressource non trouv√©e\n405 : une mauvaise m√©thode http a √©t√© utilis√©e\n500 : erreur c√¥t√© serveur\n503 : service temporairement indisponible\n\n\nPour r√©sumer, les r√©sultats 2xx indiquent un succ√®s, un r√©sultat 4xx ou 5xx un probl√®me.\nExemple simple d‚Äôutilisation :\nimport requests\nimport json\n\nresponse = requests.get(\"http://mon-webservice.com\")\n\nif response.status_code != 200:\n    raise Exception(\n        \"Cannot reach (HTTP {}): {}\".format(response.status_code, response.text)\n    )\nelse:    \n    print(json.dumps(response.json(), indent=2))       # JSON Pretty print\n\n\n2.2 Mise √† jour de votre d√©p√¥t git\n2 possibilit√©s au choix\n\n2.2.1 Si vous voulez repartir du code du TP1\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP1\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton S√©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nCr√©ez un point de sauvegarde de vos travaux de la semaine derni√®re\n\ngit add .\ngit commit -m \"Mon super code du TP1\"\n\nMettez √† jour votre d√©p√¥t local\n\ngit pull\n\nPassez sur la branche du TP2\n\ngit checkout tp2_base\n\n\n\n\n\n2.2.2 Si vous n‚Äôavez pas le code du TP1 sur votre machine\n\nOuvrez le logiciel Git Bash\n\nCr√©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, et collez l√† dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP2 && cd $_\n\nClonez le d√©p√¥t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nFermez Git Bash\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton S√©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nPassez sur la branche du TP2\n\ngit checkout tp2_base\n\n\n\n\n\n2.2.3 ‚ö†Ô∏è Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de l‚Äôexplorer de VSCode (√† gauche) doit √™tre : ENSAI-2A-complement-info-TP. Si c‚Äôest TP1, TP2, TP ou autre chose ce n‚Äôest pas bon ! Vous allez avoir des soucis d‚Äôimports par la suite.\n\nPour pour v√©rifier que tout fonctionne : * lancez le fichier __main__.py * lancez les tests unitaires du package business_object * dans terminal : python -m unittest -k test_business_object\n\n\n\n\n2.3 Mes premi√®res requ√™tes en Python\n‚úçÔ∏è Hands on 3\n\nSi ce n‚Äôest pas d√©j√† fait (voir README.md), installez dotenv\n\npip install python-dotenv\n\nOuvrez le fichier /src/client/attack_client.py\nCompl√©tez la m√©thode get_attack(int)\n\nprend en param√®tre un id d‚Äôattaque\nva chercher toutes les informations disponibles sur cette attaque\nretourne un objet de type AbstractAttack\n\nPour vous aider, observez la m√©thode instantiate_attack() de la classe AttackFactory\nRegardez le fonctionnement de cette m√©thode et utilisez la\n\n\ncr√©ez la m√©thode get_all_attacks()\n\nretourne la liste de tous les attaques disponibles sous la forme d‚Äôune liste d‚Äôobjets AbstractAttack\n\nV√©rifiez que vos 2 m√©thodes fonctionnent\n\nLancez les tests unitaitres du package test_client\n\n\n\n\n\n2.4 Les requ√™tes plus complexes\nPour le moment nous nous sommes concentr√©s sur les requ√™tes GET mais il est bien s√ªr possible d‚Äôen faire d‚Äôautre. Par exemple pour les requ√™tes POST, PUTou DELETE voici la syntaxe :\npost = requests.post(\"http://example.org\", json = {'key':'value'})\nput = requests.put(\"http://example.org\", json = {'key':'value'})\ndelete = requests.delete(\"http://example.org\")\nComme vous le voyez, les syntaxes sont tr√®s proches de la syntaxe de la m√©thode GET. On a seulement ajout√© pour certaines requ√™tes des donn√©es. C‚Äôest ce que vous avez fait plus t√¥t avec Insomnia. Pour passer des param√®tres √† votre requ√™te je vous conseille n√©anmoins de pr√©f√©rer ce genre de syntaxe :\nurl = \"http://example.org\"\ndata = {'key':'value'}\npost = requests.post(url, json = data)\nC‚Äôest la m√™me chose fonctionnellement, mais il vaut mieux d√©finir les √©l√©ments hors de la requ√™te pour ne pas se perdre.\nIl est √©galement possible de passer des ent√™tes http en ajoutant l‚Äôattribut headers √† la fonction utilis√©e.\nheaders = {'accept': 'application/xml'}\nrequests.get('http://example.org', headers=headers)\n\n\n2.5 Requ√™tes avanc√©es en python\n‚úçÔ∏è Hands on 4\n\nDans le module attack_client.py impl√©mentez les m√©thodes suivantes :\n\ncreate_attack(AbstractAttack)\n\nprend une AbstractAttack en param√®tre\ncr√©e une nouvelle ressource dans notre webservice\n\nupdate_attack(AbstractAttack)\n\nprend une AbstractAttack en param√®tre\nmodifie la ressource associ√©e dans notre webservice\n\ndelete_attack(AbstractAttack)\n\nprend une AbstractAttack en param√®tre\nsupprime la ressource associ√©e dans notre webservice\n\n\nTestez vos m√©thodes"
  },
  {
    "objectID": "doc/tp/tp2.html#coder-un-webservice-en-python",
    "href": "doc/tp/tp2.html#coder-un-webservice-en-python",
    "title": "Webservices et formats de donn√©es",
    "section": "3 Coder un webservice en python",
    "text": "3 Coder un webservice en python\nAvec les outils √† disposition aujourd‚Äôhui il est facile de faire un webservice soit m√™me.\nIl y a trois leaders sur le march√© actuellement pour faire un webservice REST en python: * Django REST, * FlaskRESTful * FastAPI\nChacun √† ses avantages et inconv√©nients. Django est s√ªrement le plus complet mais le plus lourd, Flask et FastApi sont plus l√©gers et rapides √† mettre en place. Le gros avantage de FastApi est la simplicit√© pour cr√©er une page swagger de documentation.\nVoici le code minimal d‚Äôun webservice REST avec FastAPI (documentation officielle)\nfrom fastapi import FastAPI\n\n# On instancie le webservice\napp = FastAPI()\n\n# Cr√©ation d'un enpoint qui r√©pond √† la m√©thode GET √† l'adresse \"/\" qui va retourne le message \"Hello World\"\n@app.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello World\"}\n\n# Lancement de l'application sur le le port 80\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=80)\nAppeler la ressource ‚Äú/‚Äù du webservice va retourner le json : {\"message\": \"Hello World\"}\nVoici un exemple plus complet inspir√© de la documentation officielle (vous voulez cr√©er un webservice pour exposer vos todos)\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\nfrom starlette import status\nimport uvicorn\n\n# On instancie le webservice\napp = FastAPI()\n\nclass Todo(BaseModel):\n    id : int\n    content : str\n\ntodos = {1 : Todo(1,\"Step 1 : Learn python\")\n        , 2 : Todo(2,\"Step 2 : Work on the IT project\")\n        , 3 : Todo(3,\"Step 3 : ???\")\n        , 4 : Todo(4,\"Step 4 : Profit\")}\n\n# D√©finition du endpoint get /todo\n@app.get(\"/todo\")\nasync def get_all_todo():\n    return todos.values()\n\n# D√©finition du endpoint get /todo/{id_doto}\n@app.get(\"/todo/{id_toto}\")\nasync def get_todo_by_id(id_toto : int = Path(..., description = \"The `id` of the todo you want to get\")):\n    if todos.get[id_toto] :\n        return todos.get[id_toto]\n    else :\n        return JSONResponse(status_code=status.HTTP_404_NOT_FOUND)\n\n# D√©finition du endpoint post /todo\n@app.post(\"/todo\", todo, status_code=201)\nasync def post_todo(todo:Todo):\n    if not todos.get(todo.id):\n        return JSONResponse(status_code=status.HTTP_409_CONFLICT)\n    else :\n        todos[todo.id] = todo\n        return todo\n\n# Lancement de l'application sur le le port 8XXX avec XXX les 3 derniers num√©ros de votre id\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=8XXX)\nCe code va cr√©er un web service qui va r√©pondre aux requ√™tes suivantes :\n\nGET host/todo : retourne toutes les t√¢ches √† faire\nGET host/todo/{todo_id} : retourne la t√¢che derri√®re l‚Äôid en param√®tre\nPOST host/todo/ : ajoute la t√¢che pass√©e en corps de la r√™quete\n\nFastAPI s√©rialise pour vous les objets que vous retournez. Donc pas besoin de mettre en forme vos donn√©es. N√©anmoins, pour plus de clart√©, vous pouvez utiliser des classes BaseModel. Ce sont des classes qui ne vont contenir que des attributs que vous pouvez d√©clarer sans constructeur:\nclass Todo(BaseModel):\n    id : int\n    content : str\nCes classes peuvent √™tre utilis√©es en sortie de votre webservice, comme en entr√©e (ligne 33). FastApi va faire pour vous tout une s√©rie de contr√¥le sur les types des variables et renvoyer une erreur au client si sa requ√™te n‚Äôest pas bien format√©e.\nFondamentalement un webservice est une application comme les autres, mais au lieu d‚Äôavoir une interface graphique comme on en a l‚Äôhabitude en tant qu‚Äôhumain, l‚Äôinterface est une interface HTTP qui va accepter des requ√™tes et envoyer des r√©sultats. Ainsi le diagramme de s√©quence des diff√©rentes couches qui vont √™tre impliqu√©es dans une requ√™te GET pour r√©cup√©rer une ressource va ressembler √† cela si je reprends le mod√®le 3 couches vu en cours.\n\n\n\n\n\nsequenceDiagram\n    participant U as User\n    participant R as Webservice\n    participant S as Service\n    participant D as DAO\n    participant B as Base de donn√©es\n    U -&gt;&gt; R : HTTP requ√™te\n    R -&gt;&gt; S : get_by_id()\n    S -&gt;&gt; D : find_by_id()\n    D -&gt;&gt; B : requ√™te SQL (psycopg)\n    B -&gt;&gt; D : curseur SQL (psycopg)\n    D -&gt;&gt; S : instance objet metier\n    S -&gt;&gt; R : instance objet metier\n    Note over S,R: l'objet est potentiellement alt√©r√©\n    R -&gt;&gt; U : R√©ponse HTTP\n\n\n\n\n\n\n\n3.1 Mon premier webservice\n\nV√©rifiez que le module fastapi est install√© (pip list)\n\nSi ce n‚Äôest pas le cas : pip install \"fastapi[all]\"\n\nOuvrez le fichier app.py\nLancez ce fichier\n\ntestez les requ√™tes suivantes :\n\nGET http://localhost/hello\nGET http://localhost/hello/everybody\n\n\nArr√©tez le webservice\n\nCliquez dans le terminal de VSCode puis CTRL + C\n\n\n‚úçÔ∏è Hands on 5\nEn utilsant la liste de personnages d√©finie dans le fichier app.py, ajoutez les endpoints suivants : * [ ] GET localhost:80/character : retournera un json contenant une liste des personnages * [ ] PUT localhost:80/character/{id} qui modifiera le nom du personnage √† l‚Äôindex {id} √† partir d‚Äôun body * [ ] DELETE localhost:80/character/{id} qui supprimera l‚Äô√©l√©ment √† l‚Äôindex {id}\nPour tester les endpoints n√©cessitant un body json, vous pouvez utiliser üëé\n{\n  \"nom\":\"Agneta\",\n  \"age\": 30\n}"
  },
  {
    "objectID": "doc/tp/tp3.html",
    "href": "doc/tp/tp3.html",
    "title": "Data Access Objet (DAO)",
    "section": "",
    "text": "üò± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il m√©lange explications compl√®tes et manipulations pour √™tre au maximum autosuffisant. Vous n‚Äôallez surement pas terminer le sujet, ce n‚Äôest pas grave. Il est l√† pour vous aider lors du projet informatique.\nCe TP m√™le explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appel√©es ‚Äú‚úçÔ∏èHands on‚Äù. C‚Äôest √† ce moment-l√† que vous devez faire ce qui est √©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais pr√©f√©rez toujours les explications orales.\n\nDans ce TP vous allez :\n\nRevoir des notions de base de donn√©es relationnelles ;\nImpl√©menter le patron de conception DAO ;\nVoir si votre programme fonctionne avec des tests unitaires reproductibles."
  },
  {
    "objectID": "doc/tp/tp3.html#avant-de-commencer",
    "href": "doc/tp/tp3.html#avant-de-commencer",
    "title": "Data Access Objet (DAO)",
    "section": "",
    "text": "üò± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il m√©lange explications compl√®tes et manipulations pour √™tre au maximum autosuffisant. Vous n‚Äôallez surement pas terminer le sujet, ce n‚Äôest pas grave. Il est l√† pour vous aider lors du projet informatique.\nCe TP m√™le explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appel√©es ‚Äú‚úçÔ∏èHands on‚Äù. C‚Äôest √† ce moment-l√† que vous devez faire ce qui est √©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais pr√©f√©rez toujours les explications orales.\n\nDans ce TP vous allez :\n\nRevoir des notions de base de donn√©es relationnelles ;\nImpl√©menter le patron de conception DAO ;\nVoir si votre programme fonctionne avec des tests unitaires reproductibles."
  },
  {
    "objectID": "doc/tp/tp3.html#mise-√†-jour-de-votre-d√©p√¥t-local",
    "href": "doc/tp/tp3.html#mise-√†-jour-de-votre-d√©p√¥t-local",
    "title": "Data Access Objet (DAO)",
    "section": "1 Mise √† jour de votre d√©p√¥t local",
    "text": "1 Mise √† jour de votre d√©p√¥t local\nComme lors du pr√©c√©dent TP, vous avez 2 possibilit√©s pour r√©cup√©rer le code de base du TP3 :\n\n1.0.1 Si vous voulez repartir du code du TP2\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton S√©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\nCr√©ez un point de sauvegarde de vos travaux de la semaine derni√®re\n\ngit add .\ngit commit -m \"Mon super code du TP2\"\n\nMettez √† jour votre d√©p√¥t local\n\ngit pull\n\n\n\n\n\n1.0.2 Si vous n‚Äôavez pas le code du TP2 sur votre machine\n\nOuvrez le logiciel Git Bash\n\nCr√©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, et collez l√† dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP3 && cd $_\n\nClonez le d√©p√¥t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nFermez Git Bash\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP2\ncliquez une fois sur ENSAI-2A-complement-info-TP\npuis sur le bouton S√©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\n\n\n\n\n\n1.0.3 ‚ö†Ô∏è Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de l‚Äôexplorer de VSCode (√† gauche) doit √™tre : ENSAI-2A-complement-info-TP. Si c‚Äôest TP1, TP2, TP3, TP ou autre chose ce n‚Äôest pas bon ! Vous allez avoir des soucis d‚Äôimports par la suite.\n\n\n\n1.0.4 Dans les 2 cas\n\nPassez sur la branche du TP3\n\ngit checkout tp3_base\n\nSi ce n‚Äôest pas d√©j√† fait, installez les d√©pendances n√©cessaires (voir fichier README)\n\npip install -r requirements.txt\n\npour pour v√©rifier que tout fonctionne bien\n\nlancez le fichier __main__.py\nlancez les tests unitaires\n\ndans terminal : python -m unittest\n\n\nPour pouvoir vous connecter √† votre base de donn√©es, renseignez les variables du fichier .env avec votre id :\n\nDATABASE=id????\nUSER=id????\nPASSWORD=id????\n\nLancez le script utils/reset_database.py\n\ncela cr√©e un sch√©ma et des donn√©es utiles pour ce TP\n\nOuvrez DBeaver pour une remise en jambes en SQL\n\nSi vous n‚Äô√™tes pas familier avec DBeaver, suivez ces instructions\nobservez ces tables et leurs liens : tp.pokemon, tp.pokemon_type, tp.attack, tp.attack_type, tp.pokemon_attack (sch√©ma dans TP/img/)\n√©crivez des requ√™tes pour :\n\nlister toutes les attaques, ainsi que le nom du type d‚Äôattaque\nlister tous les pokemon, ainsi que le nom du type de Pokemon\nlister toutes les attaques de Pikachu\n\ngardez ces requ√™tes de cot√©, elles seront utiles plus loin"
  },
  {
    "objectID": "doc/tp/tp3.html#data-access-objet-dao",
    "href": "doc/tp/tp3.html#data-access-objet-dao",
    "title": "Data Access Objet (DAO)",
    "section": "2 Data Access Objet (DAO)",
    "text": "2 Data Access Objet (DAO)\n\n2.1 Mod√©lisation\nReprenons le diagramme de classe du TP1. Limitons nous √† la partie ‚Äúattaque‚Äù et r√©fl√©chissons o√π mettre une m√©thode qui permet de persister les attaques.\n\n\n\n\n\nclassDiagram\n\nclass AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    + DATABASE_TYPE_LABEL : str\n    # _id : int\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$  int\n    }\n    class FixedDamageAttack{\n        + compute_damage(APkm,APkm )  int\n    }\n    class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n        -get_attack_stat(APkm)$  float\n        -get_defense_stat(APkm)$  float\n        +compute_damage(APkm,APkm)  int\n    }\n    \n    class PhysicalAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    class SpecialAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    FixedDamageAttack--|&gt;AbstractAttack\n    AbstractFormulaAttack--|&gt;AbstractAttack\n    SpecialAttack--|&gt;AbstractFormulaAttack\n    PhysicalAttack--|&gt;AbstractFormulaAttack\n\n\n\n\n\n\n\n\nVu que les attributs de nos attaques sont similaires, on ne va pas coder √ßa dans les classes sp√©cifiques des attaques. On pourrait mettre les m√©thodes dans AbstractAttack. √áa fonctionnerait bien d‚Äôailleurs. On aurait une classe unique avec nos m√©thodes pour interagir avec la base. Mais on ne va pas faire √ßa !\nEt l√† vous vous demandez :\n\nüò± Mais pourquoi ???\n\nEt la r√©ponse est :\n\nüòõ Car √ßa n‚Äôa aucun sens !\n\nRevenons sur la phrase : faible couplage, forte coh√©sion. Si l‚Äôon met toutes les m√©thodes de persistance de nos attaques dans la classe AbstractAttack on va avoir une classe qui :\n\n‚úîÔ∏è D√©termine le comportement des attaques. C‚Äôest exactement ce que l‚Äôon souhaite (forte coh√©sion).\n‚ùå D√©termine comment on persiste une attaques.\n\nMais √ßa, ce n‚Äôest pas de la responsabilit√© d‚Äôune attaque, mais du syst√®me de persistance choisi, ou du moins de l‚Äôinterm√©diaire entre nos objets et le syst√®me de persistance !\nJe n‚Äôai personnellement pas envie d‚Äôaller modifier ma classe AbstractAttack uniquement car j‚Äôai d√©cid√© de changer de syst√®me de gestion de la persistance. Je risque de modifier quelque chose que je ne devrais pas et cr√©er des r√©gressions (faire apparaitre des erreurs sur un code qui n‚Äôen avait pas avant) dans mon code. Or j‚Äôaimerais bien limiter les sources d‚Äôerreurs.\n√Ä la place, nous allons cr√©er une classe qui va s‚Äôoccuper uniquement de cette t√¢che. Et on appelle ce type de classe DAO pour Data Access Object. C‚Äôest une classe technique qui va faire l‚Äôinterface entre nos donn√©es stock√©es et notre application. Voil√† ce que cela donne en terme de diagramme de classe\n\n\n\n\n\nclassDiagram\n\nclass AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    + DATABASE_TYPE_LABEL : str\n    # _id : int\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$  int\n    }\n    class FixedDamageAttack{\n        + compute_damage(APkm,APkm )  int\n    }\n    class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n        -get_attack_stat(APkm)$  float\n        -get_defense_stat(APkm)$  float\n        +compute_damage(APkm,APkm)  int\n    }\n    \n    class PhysicalAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    class SpecialAttack{\n        -get_attack_stat(APkm)  float\n        -get_defense_stat(APkm)  float\n    }\n    \n    FixedDamageAttack--|&gt;AbstractAttack\n    AbstractFormulaAttack--|&gt;AbstractAttack\n    SpecialAttack--|&gt;AbstractFormulaAttack\n    PhysicalAttack--|&gt;AbstractFormulaAttack\n\n\nclass AttackDao{\n&lt;&lt;Singleton&gt;&gt;\n +create(AbstractAttack) AbstractAttack\n +find_by_id(int) AbstractAttack\n +find_all() List[AbstractAttack]\n +update(AbstractAttack) AbstractAttack\n +delete(AbstractAttack) bool\n}\n\nclass DBConnection{\n&lt;&lt;Singleton&gt;&gt;\n-__connection : Connection\n\n+connection() Connection\n}\n\nAbstractAttack&lt;.. AttackDao: create\nAttackDao..&gt; DBConnection: use\n\n\n\n\n\n\n\n\n\n2.2 Gestion des connexions et patern singleton\nPour vous connecter √† la base de donn√©es nous allons utiliser la biblioth√®que python psycopg2. C‚Äôest elle qui va √©tablir la connexion avec la base, envoyer nos requ√™tes et nous retourner les r√©sultats.\nMais il faut faire un peu attention √† la gestion des connexions. Car nous pourrions nous retrouver √† ouvrir des centaines de connexions rapidement et d√©grader les performances de notre application. C‚Äôest le travail de la classe DBConnection. Comme c‚Äôest un singleton, il y aura une seule instance de cette classe dans toute notre application, et comme c‚Äôest elle qui se connecte √† la base on s‚Äôassure de l‚Äôunicit√© de la connexion.\n\nCette classe est une solution purement technique alors n‚Äôh√©sitez pas √† la r√©utiliser pour votre projet. Elle introduit un concept avanc√© de POO, √† savoir les m√©ta classes. Une m√©ta classe permet de modifier le comportement d‚Äôune classe √† un niveau pouss√© (par exemple modifier comment les objets sont construits par python). √Ä moins que vous ayez une app√©tence tout particuli√®re pour l‚Äôinformatique, ne passez pas de temps sur ce sujet.\n\n\n\n2.3 DAO et CRUD\nSi vous faites attention, les m√©thodes de notre DAO ressemblent √† celles du CRUD. C‚Äôest normal car c‚Äôest dans ces m√©thodes que le code SQL va √™tre stock√©, donc il nous faut les m√©thodes de base, g√©n√©ralement :\n\nfind_all() : qui va retourner toute la table.\nfind_by_id() : qui retourne un enregistrement √† partir de son id\ncreate() : qui cr√©e un nouvel enregistrement\ndelete() : qui supprime un enregistrement\nupdate() : qui met √† jour un enregistrement\n\nCes 5 m√©thodes suffisent pour communiquer avec votre base de donn√©es. Vous pouvez effectuer le reste des traitements dans vos classes Service. N√©anmoins pour gagner du temps rien n‚Äôemp√™che de cr√©er des m√©thodes plus complexes (ex : find_by_type_and_level_order_by_name_desc())\nVoici la fonctionnement g√©n√©ral d‚Äôune des m√©thodes de la DAO :\n# Etape 1 : On r√©cup√®re une connexion en utilisant la classe DBConnection.\nwith DBConnection().connection as connection :\n\n# Etape 2 : √† partir de la connexion on fait un curseur pour la requ√™te \n    with connection.cursor() as cursor : \n    \n    # Etape 3 : on ex√©cute notre requ√™te SQL.\n            cursor.execute(requete_sql)\n    \n    # Etape 4 : on stocke le r√©sultat de la requ√™te\n            res = cursor.fetchall()\n\nif res:\n    # Etape 5 : on agence les r√©sultats selon la forme souhait√©e (liste...)\n    \nreturn something\nL‚Äôobjet cursor contient un pointeur vers les r√©sultats de votre requ√™te. Ce r√©sultat n‚Äôest pas encore rapatri√© sur votre machine, mais est stock√© par la base de donn√©es. Vous avez 3 m√©thodes pour r√©cup√©rer le r√©sultat :\n\ncurseur.fetchone() : retourne uniquement un enregistrement sous forme de dictionnaire. Si vous appelez de nouveau fetchone() sur le m√™me curseur vous obtiendrez la ligne suivante\ncursor.fetchall() : retourne l‚Äôint√©gralit√© des r√©sultats sous forme d‚Äôune liste de dictionnaires.\n\nLes dictionnaires sont les lignes de la table r√©cup√©r√©e.\nLes cl√©s du dictionnaire sont les colonnes r√©cup√©r√©es.\nCette m√©thode fonctionne tr√®s bien quand on veut tous les r√©sultats en une fois et qu‚Äôil y en a peu. Quand on a des millions d‚Äôenregistrements cela va poser probl√®me car :\n\nLe transfert de donn√©es sur internet va prendre du temps et bloquer notre application\nNotre application va devoir g√©rer une grande quantit√© de donn√©es, et elle en est peut-√™tre incapable\n\n\ncurseur.fetchmany(size): retourne autant d‚Äôenregistrements que demand√© sous forme d‚Äôune liste de dictionnaires. Cela permet de contr√¥ler le volume de donn√©es que l‚Äôon traite. Si vous appelez de nouveau fetchmany(size) sur votre curseur, vous allez r√©cup√©rer les lignes suivantes (syst√®me de pagination)\n\nPour plus d‚Äôinformation : article de pynative\n\n\n\n2.4 DAO avec des types d‚Äôattaque\n‚úçHand on 1\n\nObservez le fonctionnement de la classe AttaqueTypeDAO\n\ncela va vous √™tre utile pour la suite\n\nDans DBeaver, cr√©ez une requ√™te qui retourne le contenu de la table tp.attack, ainsi que le champ attack_type_name de la table tp.attack_type\n\nCette requ√™te servira pour les 2 m√©thodes find ci-apr√®s, car\n\nDans la classe AttaqueDao, cr√©ez les m√©thodes suivantes :\n\nupdate_attack(attack : AbstractAttack) -&gt; bool : met √† jour les donn√©es de l‚Äôattaque pass√©e en param√®tre et retourne si la modification s‚Äôest bien pass√©e\nfind_attack_by_id(id:int) -&gt; Optional[AbsractAttack] : retourne l‚Äôattaque avec l‚Äôid en param√®tre ou retourne None si l‚Äôattaque n‚Äôest pas trouv√©e.\nfind_all_attacks() -&gt; List[AbsractAttack] : qui retourne la liste de toutes les attaques\n\nBonus : ajoutez √† cette m√©thode les param√®tres limit et offset\n\n\n\nVoici quelques conseils :\n\nVous pouvez utiliser l‚Äôattribut type de chaque attaque pour avoir son label en base\nUtilisez la classe AttackFactory pour instancier facilement des attaques\nPensez √† faire des tests pour voir si votre code fonctionne\nDans les 2 m√©thodes find, pour cr√©er nos objets m√©tier Attack\n\nnous avons besoin de connaitre le nom du type d‚Äôattaque\nor il n‚Äôy a pas cette colonne dans la table attaque\nmais peut-√™tre avez-vous d√©j√† une requ√™te qui fait le job ?\n\n\n\n\n\n2.5 Pok√©mon DAO\n‚úçHand on 2\nCr√©ez la classe Pok√©monDAO avec les m√©thodes suivantes :\n\nfind_all_pokemon()-&gt;List[AbstractPokemon] : retourne tous les pok√©mons dans la base\nfind_pokemon_by_name(name:str)-&gt;AbstractPokemon : retourne un pok√©mon avec le nom donn√©.\nCompl√©tez la m√©thode ci-dessus en incorporant la liste des attaques du Pokemon :\n\nFaites une requ√™te en joignant les tables attack et pokemon_attack en filtrant avec l‚Äôid du pok√©mon\nG√©n√©rez les attaques √† partir de l√†\n\n\n\n\n\n2.6 DAO et webservice\n‚úçHand on 3\nVous allez maintenant rendre accessible les donn√©es de votre base √† d‚Äôautres utilisateurs en r√©alisant un webservice REST.\nAjoutez dans le fichier app.py les endpoints suivants :\n# D√©fintion du endpoint get /attack?limit=100\n@app.get(\"/attack/\")\nasync def get_all_attacks(limit:int):\n    # Vous devez r√©cup√©rer les attaques en base en utilisant votre DAO\n    return attacks\n\n# D√©fintion du endpoint get /pokemon?limit=100\n@app.get(\"/pokemon/\")\nasync def get_all_pokemons(limit:int):\n    # Vous devez r√©cup√©rer les pokemons en base en utilisant votre DAO\n    return pokemons\n\n# D√©fintion du endpoint get /pokemon`/{name}\n@app.get(\"/pokemon/{name}\")\nasync def get_pokemon_by_name(name:str):\n    # Vous devez r√©cup√©rer le pokemon en base en utilisant votre DAO\n    return pokemon\n\nGET localhost:80/attack?limit=100 renverra une liste de 100 attaques par d√©faut. Il est possible de moduler cette valeur via le param√®tre de requ√™te limit\nGET localhost:80/pokemon?limit=100. Il renverra une liste de 100 pok√©mons par d√©faut, mais peut √™tre modul√© avec le param√®tre de requ√™te limit.\nGET localhost:80/pokemon/{nom}. Il renverra un json repr√©sentant un pok√©mon.\n\nPour retourner des objets, vous allez devoir d√©finir des classes h√©ritant de BaseModel. Vous trouverez toutes les infos dans la documentation de FastAPI."
  },
  {
    "objectID": "doc/tp/tp3.html#conclusion",
    "href": "doc/tp/tp3.html#conclusion",
    "title": "Data Access Objet (DAO)",
    "section": "Conclusion",
    "text": "Conclusion\nDans ce TP vous avez impl√©ment√© votre premi√®re DAO.\nC‚Äôest une classe technique qui sert √† communiquer avec votre syst√®me de persistance de donn√©es. L‚Äôavantage premier de faire une classe √† part est de d√©coupler au maximum la gestion du syst√®me de persistance et le code m√©tier de votre application.\nSi vous d√©cidez d‚Äôarr√™ter d‚Äôutiliser une base de donn√©es relationnelle et pr√©f√©rez d√©sormais une base de donn√©es no SQL vous allez devoir changer uniquement les classes DAO tout en exposant toujours les m√™mes m√©thodes."
  },
  {
    "objectID": "doc/cours/intro.html",
    "href": "doc/cours/intro.html",
    "title": "Introduction",
    "section": "",
    "text": "6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de R√©mi P√©pin\n\n\nPr√©sentation :\n\nINSEE, informatique, Orl√©ans GEOLOC, Lille enqu√™tes, Nautile\nR√©mi P√©pin, assistant d‚Äôenseignement entre 2018 et 2023\n\nCours de Cloud Computing\n\n\n\n\n\n\n\n\n\n\n\nBut du cours\n\n\n\nVous apporter les connaissances n√©cessaires pour mener √† bien un projet informatique.\n\n\n\nConduire un projet\nD√©passer les 50 lignes de code\nVivre la vie de d√©veloppeur\nTravailler en √©quipe\n\n\n\norganiser votre code\n\n\n\n\n\n\nVersionnage avec git\nAnalyse fonctionnelle, g√©nie logiciel\nProgrammation orient√©e objet avanc√©e\nCommunication avec une base de donn√©es en python\nS√©curit√© informatique\nCommunication client-serveur\n\n\n\n\n\nSettings VScode\nFormateur, Linter\nOpen Folder\n\n\n\nTP : truc √† r√©cup pour le projet\nR√©visez les Pokemon\nSujets tr√®s longs\n\n\n\n\n\n\nüöß date\n2h\nsur papier\n1 feuille A4 recto / verso manuscrite\n\n\n\nBut : voir si vous avez retenu le principal\npas de pi√®ge\nsur papier car TP trop compliqu√© √† organiser, chatGPT\nMANUSCRITE : pas de photocopie\n\n\n\n\n\nPr√©sentation du projet"
  },
  {
    "objectID": "doc/cours/intro.html#cours-de-compl√©ments-dinfo",
    "href": "doc/cours/intro.html#cours-de-compl√©ments-dinfo",
    "title": "Introduction",
    "section": "",
    "text": "6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de R√©mi P√©pin\n\n\nPr√©sentation :\n\nINSEE, informatique, Orl√©ans GEOLOC, Lille enqu√™tes, Nautile\nR√©mi P√©pin, assistant d‚Äôenseignement entre 2018 et 2023\n\nCours de Cloud Computing\n\n\n\n\n\n\n\n\n\n\n\nBut du cours\n\n\n\nVous apporter les connaissances n√©cessaires pour mener √† bien un projet informatique.\n\n\n\nConduire un projet\nD√©passer les 50 lignes de code\nVivre la vie de d√©veloppeur\nTravailler en √©quipe\n\n\n\norganiser votre code\n\n\n\n\n\n\nVersionnage avec git\nAnalyse fonctionnelle, g√©nie logiciel\nProgrammation orient√©e objet avanc√©e\nCommunication avec une base de donn√©es en python\nS√©curit√© informatique\nCommunication client-serveur\n\n\n\n\n\nSettings VScode\nFormateur, Linter\nOpen Folder\n\n\n\nTP : truc √† r√©cup pour le projet\nR√©visez les Pokemon\nSujets tr√®s longs\n\n\n\n\n\n\nüöß date\n2h\nsur papier\n1 feuille A4 recto / verso manuscrite\n\n\n\nBut : voir si vous avez retenu le principal\npas de pi√®ge\nsur papier car TP trop compliqu√© √† organiser, chatGPT\nMANUSCRITE : pas de photocopie\n\n\n\n\n\nPr√©sentation du projet"
  },
  {
    "objectID": "doc/cours/intro-slides.html#cours-de-compl√©ments-dinfo",
    "href": "doc/cours/intro-slides.html#cours-de-compl√©ments-dinfo",
    "title": "Introduction",
    "section": "Cours de Compl√©ments d‚Äôinfo",
    "text": "Cours de Compl√©ments d‚Äôinfo\n\n6h CM\n12h TP\nludovic.deneuville@ensai.fr\nbureau 161\nsur la base des cours de R√©mi P√©pin\n\n\nPr√©sentation :\n\nINSEE, informatique, Orl√©ans GEOLOC, Lille enqu√™tes, Nautile\nR√©mi P√©pin, assistant d‚Äôenseignement entre 2018 et 2023\n\nCours de Cloud Computing"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Compl√©ments d‚Äôinformatiques",
    "section": "",
    "text": "Important\n\n\n\nCe site n‚Äôest plus mis √† jour.\nLes cours et les TP sont d√©sormais ici : https://ludo2ne.github.io/ENSAI-2A-Projet-info/"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-tests",
    "href": "doc/cours/tests-unitaires-slides.html#les-tests",
    "title": "Les tests unitaires",
    "section": "Les Tests",
    "text": "Les Tests"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-tests-unitaires",
    "href": "doc/cours/tests-unitaires-slides.html#les-tests-unitaires",
    "title": "Les tests unitaires",
    "section": "Les tests unitaires",
    "text": "Les tests unitaires\nNous allons utiliser le framework unittest pour r√©aliser nos tests en Python.\nCommen√ßons par un exemple : vous souhaitez tester la m√©thode suivante :\nclass OperationMathematiques:\n    def diviser_cinq_par(self, nombre) -&gt; float:\n        if nombre != 0:\n            return 5 / nombre\n        else:\n            return None\nPour cela, vous allez cr√©er une classe de test.\nLe premier test auquel on pense est le cas nominal : on choisit un nombre en entr√©e, par exemple 2, puis on v√©rifie que diviser_cinq_par(2) retourne bien la valeur attendue : 2.5\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\nMais ce n‚Äôest pas suffisant !\nLa m√©thode a √©galement un autre retour possible : None ‚û°Ô∏è il faut aussi tester que la m√©thode renvoie bien None si le param√®tre en entr√©e est 0\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\n\n    def test_diviser_cinq_par_zero(self):\n        ## GIVEN\n        nombre = 0\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertIsNone(resultat)\n\nif __name__ == \"__main__\":\n    ## Run the tests\n    result = TextTestRunner(verbosity=2).run(\n        TestLoader().loadTestsFromTestCase(TestOperationMathematiques)\n    )\nVoici le test complet avec √† la fin un main optionnel qui permet de lancer la classe de test comme n‚Äôimporte quel programme Python avec le bouton ‚ñ∂Ô∏è\nEt si‚Ä¶ on appelle la m√©thode avec ce param√®tre : diviser_cinq_par(\"a\") ?\nVous pouvez aussi √©crire un test pour v√©rifier que votre m√©thode renvoie bien une exception TypeError dans ce cas.\n    def test_diviser_cinq_string(self):\n        ## GIVEN\n        nombre = \"a\"\n\n        ## WHEN / THEN\n        with self.assertRaises(TypeError):\n            OperationMathematiques().diviser_cinq_par(nombre)\nMais il est quand m√™me pr√©f√©rable de v√©rifier dans votre m√©thode que le param√®tre est bien de type num√©rique et de d√©cider quoi faire si ce n‚Äôest pas le cas.\nüí° Ce qu‚Äôil faut retenir sur le test unitaire :\n\nv√©rifie qu‚Äôune m√©thode fait ce qu‚Äôelle doit faire\nil faut tester les cas nominaux, mais √©galement les cas √† la marge et les erreurs\nun test unitaire teste UNE et UNE seule chose\n\nil faut autant de tests unitaires que de retours possibles\n\nil doit √™tre le plus isol√© possible (pas de question sur ce point √† l‚Äôexamen)\n\nc‚Äôest-√†-dire que si vous voulez tester une m√©thode A, qui elle-m√™me appelle d‚Äôautres m√©thodes B, C, D‚Ä¶\nle test ne doit se faire que sur la m√©thode A\nPour cela, il faut mocker le comportement des autres m√©thodes"
  },
  {
    "objectID": "doc/cours/tests-unitaires-slides.html#les-test-driven-development-tdd",
    "href": "doc/cours/tests-unitaires-slides.html#les-test-driven-development-tdd",
    "title": "Les tests unitaires",
    "section": "Les Test Driven Development (TDD)",
    "text": "Les Test Driven Development (TDD)\nQuand tester ?\n‚Ä¶\nLa meilleure pratique lorsque l‚Äôon veut cr√©er une fonction est de d‚Äôabord cr√©er les tests qui permettront de v√©rifier que la fonction fait ce qu‚Äôelle doit faire.\nCela peut para√Ætre un peu √©trange, mais en fait pas tant que √ßa. Lorsque vous codez une fonction, vous savez avant de commencer :\n\nquels seront les param√®tres en entr√©e\nquels r√©sultats vous attendez en sortie\ndonc vous avez d√©j√† quoi tester !\n\nLa pratique du TDD a le gros avantage que cela nous force √† √©crire des tests et de prendre le temps de bien faire les choses. Pour adh√©rer au TDD il faut vraiment se faire violence au d√©but, mais au final cette pratique est tr√®s b√©n√©fique.\nSinon, si l‚Äôon √©crit la fonction en premier, une fois que l‚Äôon a termin√©, il y a 9 chances sur 10 que l‚Äôon se dise : ‚Äúc‚Äôest bon √ßa marche, pas la peine de tester‚Ä¶‚Äù. Et √ßa c‚Äôest pas bien !!!\n\n\n\nHome ‚Äî Tests unitaires"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html",
    "href": "doc/cours/tests-unitaires.html",
    "title": "Les tests unitaires",
    "section": "",
    "text": "üöß"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-tests",
    "href": "doc/cours/tests-unitaires.html#les-tests",
    "title": "Les tests unitaires",
    "section": "Les Tests",
    "text": "Les Tests\n\nPourquoi tester ?\n\nPour v√©rifier que votre programme fonctionne\nPour d√©tecter des erreurs\nPour √©viter les r√©gressions (quand vous modifiez du code)\n\nAucun test n‚Äôest parfait, mais cela permet quand m√™me d‚Äô√©carter de nombreuses erreurs.\nDes logiciels permettent de calculer la couverture de tests d‚Äôune application, c‚Äôest-√†-dire approximativement le nombre de fonctions test√©es sur le nombre total de fonctions.\nCette couverture de tests est un indicateur de qualit√©. Cependant, elle donne une tendance, plut√¥t qu‚Äôune valeur fiable. En effet, il est facile de tester toutes les m√©thodes √©l√©mentaires pour augmenter m√©caniquement sa couverture et de mettre de c√¥t√© les tests sur les m√©thodes plus compliqu√©es.\nPr√©f√©rez faire peu de tests, mais des tests utiles !\n\n\nLes types de tests\nIl existe de tr√®s nombreux tests diff√©rents, voici les principaux :\n\nTest unitaire : teste une fonction pour v√©rifier son bon fonctionnement\nTest fonctionnel : teste les cas d‚Äôutilisation du logiciel\nTest de charge : √©valuent la capacit√© d‚Äôun syst√®me √† g√©rer un volume √©lev√© de donn√©es ou de transactions\nTest d‚Äôint√©gration : v√©rifie que diff√©rents composants ou modules d‚Äôun syst√®me interagissent correctement ensemble\nTest d‚Äôintrusion : v√©rifie la s√©curit√© du logiciel en recherchant des vuln√©rabilit√©s et en simulant des attaques potentielles\n‚Ä¶"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-tests-unitaires",
    "href": "doc/cours/tests-unitaires.html#les-tests-unitaires",
    "title": "Les tests unitaires",
    "section": "Les tests unitaires",
    "text": "Les tests unitaires\nNous allons utiliser le framework unittest pour r√©aliser nos tests en Python.\nCommen√ßons par un exemple : vous souhaitez tester la m√©thode suivante :\nclass OperationMathematiques:\n    def diviser_cinq_par(self, nombre) -&gt; float:\n        if nombre != 0:\n            return 5 / nombre\n        else:\n            return None\nPour cela, vous allez cr√©er une classe de test.\nLe premier test auquel on pense est le cas nominal : on choisit un nombre en entr√©e, par exemple 2, puis on v√©rifie que diviser_cinq_par(2) retourne bien la valeur attendue : 2.5\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\nMais ce n‚Äôest pas suffisant !\nLa m√©thode a √©galement un autre retour possible : None ‚û°Ô∏è il faut aussi tester que la m√©thode renvoie bien None si le param√®tre en entr√©e est 0\nfrom unittest import TestCase, TextTestRunner, TestLoader\nfrom mathematiques.operation_mathematique import OperationMathematiques\n\nclass TestOperationMathematiques(TestCase):\n    def test_diviser_cinq_par_nombre_non_nul(self):\n        ## GIVEN\n        nombre = 2\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertEqual(resultat, 2.5)\n\n    def test_diviser_cinq_par_zero(self):\n        ## GIVEN\n        nombre = 0\n\n        ## WHEN\n        resultat = OperationMathematiques().diviser_cinq_par(nombre)\n\n        ## THEN\n        self.assertIsNone(resultat)\n\nif __name__ == \"__main__\":\n    ## Run the tests\n    result = TextTestRunner(verbosity=2).run(\n        TestLoader().loadTestsFromTestCase(TestOperationMathematiques)\n    )\nVoici le test complet avec √† la fin un main optionnel qui permet de lancer la classe de test comme n‚Äôimporte quel programme Python avec le bouton ‚ñ∂Ô∏è\nEt si‚Ä¶ on appelle la m√©thode avec ce param√®tre : diviser_cinq_par(\"a\") ?\nVous pouvez aussi √©crire un test pour v√©rifier que votre m√©thode renvoie bien une exception TypeError dans ce cas.\n    def test_diviser_cinq_string(self):\n        ## GIVEN\n        nombre = \"a\"\n\n        ## WHEN / THEN\n        with self.assertRaises(TypeError):\n            OperationMathematiques().diviser_cinq_par(nombre)\nMais il est quand m√™me pr√©f√©rable de v√©rifier dans votre m√©thode que le param√®tre est bien de type num√©rique et de d√©cider quoi faire si ce n‚Äôest pas le cas.\nüí° Ce qu‚Äôil faut retenir sur le test unitaire :\n\nv√©rifie qu‚Äôune m√©thode fait ce qu‚Äôelle doit faire\nil faut tester les cas nominaux, mais √©galement les cas √† la marge et les erreurs\nun test unitaire teste UNE et UNE seule chose\n\nil faut autant de tests unitaires que de retours possibles\n\nil doit √™tre le plus isol√© possible (pas de question sur ce point √† l‚Äôexamen)\n\nc‚Äôest-√†-dire que si vous voulez tester une m√©thode A, qui elle-m√™me appelle d‚Äôautres m√©thodes B, C, D‚Ä¶\nle test ne doit se faire que sur la m√©thode A\nPour cela, il faut mocker le comportement des autres m√©thodes"
  },
  {
    "objectID": "doc/cours/tests-unitaires.html#les-test-driven-development-tdd",
    "href": "doc/cours/tests-unitaires.html#les-test-driven-development-tdd",
    "title": "Les tests unitaires",
    "section": "Les Test Driven Development (TDD)",
    "text": "Les Test Driven Development (TDD)\nQuand tester ?\n‚Ä¶\nLa meilleure pratique lorsque l‚Äôon veut cr√©er une fonction est de d‚Äôabord cr√©er les tests qui permettront de v√©rifier que la fonction fait ce qu‚Äôelle doit faire.\nCela peut para√Ætre un peu √©trange, mais en fait pas tant que √ßa. Lorsque vous codez une fonction, vous savez avant de commencer :\n\nquels seront les param√®tres en entr√©e\nquels r√©sultats vous attendez en sortie\ndonc vous avez d√©j√† quoi tester !\n\nLa pratique du TDD a le gros avantage que cela nous force √† √©crire des tests et de prendre le temps de bien faire les choses. Pour adh√©rer au TDD il faut vraiment se faire violence au d√©but, mais au final cette pratique est tr√®s b√©n√©fique.\nSinon, si l‚Äôon √©crit la fonction en premier, une fois que l‚Äôon a termin√©, il y a 9 chances sur 10 que l‚Äôon se dise : ‚Äúc‚Äôest bon √ßa marche, pas la peine de tester‚Ä¶‚Äù. Et √ßa c‚Äôest pas bien !!!"
  },
  {
    "objectID": "doc/tp/tp1.html",
    "href": "doc/tp/tp1.html",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "",
    "text": "Ce TP m√™le explications et phases de code.\nLes explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissance pour plus tard, mais pr√©f√©rez toujours les explications orales."
  },
  {
    "objectID": "doc/tp/tp1.html#avant-de-commencer",
    "href": "doc/tp/tp1.html#avant-de-commencer",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "",
    "text": "Ce TP m√™le explications et phases de code.\nLes explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissance pour plus tard, mais pr√©f√©rez toujours les explications orales."
  },
  {
    "objectID": "doc/tp/tp1.html#introduction-et-mise-en-place",
    "href": "doc/tp/tp1.html#introduction-et-mise-en-place",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "1 Introduction et mise en place",
    "text": "1 Introduction et mise en place\nVous allez cr√©er les objets m√©tier pour un jeu Pok√©mon.\nUn objet m√©tier repr√©sente dans votre code quelque chose de concret, qui mod√®lise la r√©alit√©.\n\nObjet m√©tier (business object) : repr√©sentation informatique d‚Äôun objet ‚Äúr√©el‚Äù que notre programme va manipuler pour r√©pondre √† un besoin. Dans le cas de notre application cela sera des Pok√©mons, des attaques ou des objets.\nDans une application de e-commerce par exemple, les articles et comptes sont des objets m√©tier. Ils permettent de s√©parer les donn√©es de l‚Äôapplication et les traitements. Cela conduit √† avoir des objets contenant essentiellement des attributs et tr√®s peu de m√©thodes autre que des getter et setter.\n\nCe TP sera r√©alis√© avec l‚ÄôIDE (Integred Development Environment) Visual Studio Code.\n\n1.1 Importez le code du TP\n\nOuvrez Git Bash\nCr√©ez un dossier pour stocker le code du TP\n\npar exemple, copiez la ligne ci-dessous, puis collez l√† dans Git Bash (clic droit &gt; Paste)\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP1 && cd $_\n\nClonez le d√©p√¥t\n\ngit clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nOuvrez Visual Studio Code\n\nFile &gt; Open Folder\n\nAller dans /p/Cours2A/UE3_Complements_informatique/TP/TP1/ (ou dans le dossier o√π se situe le d√©p√¥t que vous venez de cloner)\ncliquer sur ENSAI-2A-complement-info-TP, puis sur le bouton S√©lectionner un dossier\n‚ö†Ô∏è c‚Äôest tr√®s important de suivre tr√®s pr√©cis√©ment ces consignes, sinon vous risquez d‚Äôavoir des soucis d‚Äôimport !\n\n\n\nLisez le fichier README.md et suivez les instructions. Puis lancez le programme main.py pour vous assurer que tout fonctionne correctement.\n\nOuvrez un terminal dans VSCode (CTRL + √π)\n\nc‚Äôest le m√™me terminal Git Bash que vous avez ouvert au d√©but\nmais c‚Äôest plus pratique d‚Äôavoir tout au m√™me endroit\n\nlistez les branches git branch -a\n\nVous avez la possibilit√© de consulter la correction en changeant de branche si et seulement si vous √™tes bloqu√© trop longtemps.\nVoici quelques commandes git utiles :\n# Avant de changer de branches, cr√©ez un point de sauvegarde de votre travail\ngit add .\ngit commit -am \"&lt;message&gt;\"\n\n# changer de branche\ngit checkout &lt;nouvelle_branche&gt;      # dans le terminal, la branche courante est indiqu√©√©e entre ()\ngit checkout -                       # pour retourner √† la branche pr√©c√©dente\n\n\n\n1.2 Ce que vous allez coder\nNotre jeu s‚Äôinspirera de Pok√©mon Unite (aucune connaissance du jeu, ni de Pok√©mon n‚Äôest n√©cessaire).\nPour r√©sumer en quelques mots, voici les objets que nous allons manipuler :\n\nPokemon : qui ont diverses caract√©ristiques et statistiques\n\nhp : health points\nattack, defense, speed‚Ä¶ : qui serviront d√©terminer la force de ses attaques\nun type : Attacker, Defender, All Rounder, Speedster, Supporter\n\nStatistic : pour √©viter de surcharger la classe Pokemon, de nombreuses stats sont stock√©es dans un objet de la classe Statistic\nAttack : diff√©rents types d‚Äôattaques dont disposeront les Pok√©mons (partie 3)\nBattleService : servira √† faire s‚Äôaffronter 2 Pok√©mons pour d√©terminer l‚Äôissue du combat (partie 4)"
  },
  {
    "objectID": "doc/tp/tp1.html#mod√©lisation-et-impl√©mentation",
    "href": "doc/tp/tp1.html#mod√©lisation-et-impl√©mentation",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "2 Mod√©lisation et impl√©mentation",
    "text": "2 Mod√©lisation et impl√©mentation\n\nDans un premier temps, nous allons coder uniquement les Pokemons (la classe Statistic est d√©j√† cod√©e). En fonction de son type, son coefficient d‚Äôattaque d√©pendra de diverses statistiques.\n\n\n\n\n\n\nclassDiagram\n class Pokemon {\n - __type : String\n - __current_stat : Statistique\n + get_pokemon_attack_coef() float\n }\n \n class Statistic {\n - __hp : int\n - __attaque : int\n - __defense : int\n - __spe_atk : int\n - __spe_def : int\n - __vitesse : int\n }\n Pokemon --&gt; Statistic : poss√®de\n\n\n\n\n\n\nAvant d‚Äô√©crire du code, nous allons r√©fl√©chir √† la meilleure conception possible pour r√©aliser nos Pok√©mons. Notre conception essaiera au maximum de respecter la r√®gle suivante : faible couplage, forte coh√©sion.\nEn d‚Äôautre termes nous allons essayer de faire :\n\ndes classes les plus disjointes possible (faible couplage) pour qu‚Äôune modification dans une classe ne nous demande pas de modifier les autres\ntout en essayant d‚Äôavoir les t√¢ches r√©alis√©es par une seule classe les plus li√©es possible (forte coh√©sion).\n\n\n2.1 Premi√®re approche : le ¬´ if/elif/else ¬ª üíÄ\nOuvrez le code, et observez la classe Pokemon. Nous nous interessons √† la m√©thode get_pokemon_attack_coef() qui va servir √† d√©terminer la puissance de l‚Äôattaque en fonction du type de Pok√©mon.\n\n\nQuestion 1 : Expliquez pourquoi une impl√©mentation √† base de if/elif/else pour les types est une mauvaise id√©e ? Imaginez s‚Äôil y avait plusieurs blocs de code similaires dans notre application, et que nous devions ajouter un nouveau type.\n\n\n\n\n\n2.2 La puissance de la POO\nAu lieu d‚Äôexternaliser les comportements de nos Pok√©mons, nous allons mettre tous leurs comportements sp√©cifiques dans des classes filles d‚Äôune super classe Pokemon. Ceci est rendu possible gr√¢ce √† deux propri√©t√©s des objets en POO :\n\nh√©ritage : il est possible de sp√©cialiser une classe existante en modifiant son comportement, ou en ajoutant de nouveaux\npolymorphisme : deux fonctions peuvent avoir le m√™me nom mais avoir des comportements diff√©rents\n\nEn plus, comme chacun de nos Pok√©mons va forcement √™tre d‚Äôun type, aucun ne sera simplement de la classe Pokemon, cela nous permet de rendre cette classe abstraite. En d√©finissant clairement notre classe abstraite nous allons avoir :\n\nUn plan pour toutes les classes qui en h√©ritent. Cela √† pour avantages de :\n\nDonner des informations sur la structuration du code\n\nPermettre de g√©n√©rer automatiquement les m√©thodes √† d√©finir\nLimiter les bug. Si on oublie une m√©thode, le code plante au d√©marrage, ce qui √©vite des comportements non pr√©vus difficile √† d√©tecter\n\nUne interface unique pour tous les types de Pok√©mons. Quelque soit le type du Pok√©mon, il sera consid√©r√© comme un AbstractPokemon partout dans le code.\n\n\n\n\nQuestion 2 :\n\ntransformez la classe Pokemon en classe abstraite AbstractPokemon\n\nrenommez √©galement le fichier en abstract_pokemon.py\n\ntransformez la m√©thode get_pokemon_attack_coef() en m√©thode abstraite\ncr√©ez les classes Attacker, Defender et AllRounder qui h√©ritent de AbstractPokemon\ndans ces 3 classes, impl√©mentez la m√©thode get_pokemon_attack_coef()\n\n\n\nPour vous aider, voici le diagramme de classe :\n\n\n\n\n\nclassDiagram\n  class AbstractPokemon {\n    &lt;&lt;abstract&gt;&gt;\n    # _current_stat : Statistique\n    # _level : int\n    # _name : str\n    +get_pokemon_attack_coef() :  float\n  }\n  \n  class BattleService {\n    +resolve_battle() Battle\n  } \n \n  class Statistique {\n    - __hp : int\n    - __attaque : int\n    - __defense : int\n    - __spe_atk : int\n    - __spe_def : int\n    - __vitesse : int\n   }\n \n  AbstractPokemon &lt;|-- Attacker\n  AbstractPokemon &lt;|-- Defender\n  AbstractPokemon &lt;|-- AllRounder\n  AbstractPokemon --* Statistique\n  BattleService ..&gt;\"2\" AbstractPokemon : use\n\n\n\n\n\n\nVous devriez arriver √† une arborescence proche de celle-ci :\nüì¶pokemon_unite_lite\n ‚î£ üìÇbusiness_object\n ‚îÉ ‚î£ üìÇpokemon\n ‚îÉ ‚îÉ ‚î£ üìúabstract_pokemon.py\n ‚îÉ ‚îÉ ‚î£ üìúattacker.py\n ‚îÉ ‚îÉ ‚î£ üìúdefender.py\n ‚îÉ ‚îÉ ‚îó üìúall_rounder.py\n ‚îÉ ‚îó üìú statistique.py\n ‚îó üìÇservice\n   ‚îó üìúbattle_service.py\nPour faire une classe abstraite, utilisez le package abc.\nVoici, pour vous inspirer, un exemple de ce qui est attendu :\n# Fichier abstract_personnage.py\nfrom abc import ABC, abstractmethod\n\nclass AbstractPersonnage(ABC):\n    def __init__(self, phrase_attaque:str, phrase_defense:str) -&gt; None:\n        self._phrase_attaque = phrase_attaque\n        self._phrase_defense = phrase_defense\n       \n    @abstractmethod # d√©corateur qui d√©finit une m√©thode comme abstraite\n    def degat_attaque(self) -&gt; int:\n     pass\n\n# Fichier magicien.py\nfrom abstract_personnage import AbstractPersonnage\nclass Magicien(AbstractPersonnage):\n    def __init__(self) -&gt; None:\n        super().__init__(\"Lance une boule de feu\",\"Utilise une barri√®re magique\" )\n       \n    def degat_attaque(self) -&gt; int:\n        # code pour calculer les d√©g√¢ts\n        return 10\n\n\n2.3 Testez votre code\n\n\nQuestion 3 : Testez la m√©thode get_pokemon_attack_coef() pour les classes AttackerPokemon et AllRounderPokemon.\nPour lancer tous les tests du projet, ex√©cutez dans le terminal : python -m unittest\n\n\nPour cela vous allez utiliser le package unittest de python.\nCe package permet de r√©aliser des tests unitaires dans des classes s√©par√©es. L‚Äôavantage par rapport √† doctest, c‚Äôest que les tests ne ‚Äúpolluent‚Äù pas vos classes, et qu‚Äôil est possible de patcher certains comportements des classes.\nUn exemple de test est donn√© dans la classe testDefenderPokemon. Pour rappel, un test se d√©compose en 3 parties :\n\nGIVEN : cr√©ation des objets n√©cessaires √† la r√©alisation du test\nWHEN : appel de la m√©thode √† tester\nTHEN : v√©rification du r√©sultat\n\nLes classes de test seront organis√©es de la mani√®re suivante, en reproduisant l‚Äôarchitecture de votre application :\nüì¶pokemon_unite_lite\n ‚î£ üìÇbusiness_object\n ‚îÉ ‚î£ üìÇpokemon\n ‚îÉ ‚îÉ ‚î£ üìúabstract_pokemon.py\n ‚îÉ ‚îÉ ‚î£ üìúattacker.py\n ‚îÉ ‚îÉ ‚î£ üìúdefender.py\n ‚îÉ ‚îÉ ‚îó üìúall_rounder.py\n ‚îÉ ‚îó üìú statistique.py\n ‚î£ üìÇservice\n ‚îÉ ‚îó üìúbattle_service.py\n ‚îó üìÇtest\n  ‚îó üìÇtest_business_object\n      ‚îó üìÇtest_pokemon\n        ‚î£ üìútest_abstract_pokemon.py\n        ‚î£ üìútest_attacker_pokemon.py\n        ‚î£ üìútest_defender_pokemon.py\n        ‚îó üìútest_all_rounder_pokemon.py\n\nüí° Probl√®mes d‚Äôimports\n\nV√©rifiez que le dossier parent dans l‚Äôexplorer de VSCode (√† gauche) est : ENSAI-2A-complement-info-TP\n\nSi c‚Äôest TP1 ou TP ou autre chose ce n‚Äôest pas bon !\nSinon refaites : File &gt; open Folder\nCliquez une fois sur ENSAI-2A-complement-info-TP\nCliquez sur le bouton S√©lectionner un dossier\nSi √ßa vous le demande, vous pouvez enregistrer vos modifications\n\nPr√©f√©rez utiliser des chemins complets d‚Äôimport plut√¥t que des chemins relatifs\n\nla racine des chemins est param√©tr√©e au niveau du dossier src\ndonc cela donne par exemple : *from business_object.pokemon.abstract_pokemon import AbstractPokemon\n\ncar le dossier business_object est bien dans le dossier src\n\n\nCr√©ez des fichiers __init__.py (vide)\n\ndans TOUS les dossiers que vous cr√©ez\nc‚Äôest un peu p√©nible mais √ßa peut d√©bloquer la situation\n\n\n\n\n\nQuestion 4 : Pouvez-vous tester la m√©thode level_up() directement sur un AbstractPokemon ? Avez vous une id√©e comment faire ? (ne pas coder cette question)"
  },
  {
    "objectID": "doc/tp/tp1.html#lagr√©gation-lautre-fa√ßon-dajouter-de-la-souplesse-dans-le-code",
    "href": "doc/tp/tp1.html#lagr√©gation-lautre-fa√ßon-dajouter-de-la-souplesse-dans-le-code",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "3 L‚Äôagr√©gation, l‚Äôautre fa√ßon d‚Äôajouter de la souplesse dans le code",
    "text": "3 L‚Äôagr√©gation, l‚Äôautre fa√ßon d‚Äôajouter de la souplesse dans le code\nMaintenant que nos Pok√©mons sont faits, nous allons y ajouter les attaques.\nNotre syst√®me va devoir respecter certaines contraintes :\n\nPlusieurs types d‚Äôattaques vont coexister, chacune avec un mode de calcul de d√©g√¢ts diff√©rent :\n\nDes attaques √† d√©g√¢ts variables s√©par√©es en 2 types :\n\nattaques ‚Äúphysiques‚Äù qui utilisent l‚Äôattaque et la d√©fense des Pok√©mons\nattaques ‚Äúsp√©ciales‚Äù qui utilisent l‚Äôattaque sp√© et la d√©fense sp√© des Pok√©mons\n\nDes attaques √† d√©g√¢ts fixes qui font un nombre fixe de d√©g√¢ts.\n\nUn pok√©mon peut avoir plusieurs attaques et le type de l‚Äôattaque doit √™tre transparent pour le pok√©mon.\n\n\n\n3.1 Attaques √† d√©g√¢ts fixes\nNous allons commencer par les attaques √† d√©g√¢ts fixes. Comme il y aura un autre type d‚Äôattaques, toutes les attaques h√©riterons de la classe abstraite AbstractAttack d√©j√† cr√©√©e. Cette classe poss√®de la m√©thode abstraite compute_damage() qui devra √™tre impl√©ment√©e dans les classes filles.\n\n\n\n\n\nclassDiagram\n\n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    + compute_damage(APkm, APkm)$  int\n  }\n\n   class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n   }\n \n   AbstractAttack &lt;|-- FixedDamageAttack\n\n\n\n\n\n\n\n\nQuestion 5 Impl√©mentez la classe FixedDamageAttack, ainsi que sa m√©thode compute_damage() qui retournera simplement la puissance (power) de l‚Äôattaque.\nCr√©ez des tests pour v√©rifier que tout fonctionne correctement.\n\n\n\n\n\n3.2 Attaques √† d√©g√¢ts variables\nNous allons ensuite coder les attaques √† d√©g√¢ts variables. Elles utilisent la formule suivante :\nDamage = \\big ( \\frac{(\\frac{2*Level}{5}+2)* Power *Att}{Def*50} +2\\big) *random* other\\_multipliers\navec :\n\n\\(Att\\)‚Äã : √©gal soit √† l‚Äôattaque ou l‚Äôattaque sp√© du Pokemon attaquant\n\\(Def\\)‚Äã‚Äã : √©gal soit √† la d√©fense ou d√©fense sp√© du Pokemon d√©fenseur\n\\(Power\\)‚Äã : la valeur de puissance de l‚Äôattaque\n\\(random\\)‚Äã‚Äã :une valeur comprise dans l‚Äôintervalle [0.85; 1]\n\\(other\\_ multipliers\\) : les autres multiplicateurs possibles, comme le coefficient d‚Äôattaque des pok√©mons.\n\nLa seule diff√©rence entre attaque physique et sp√©ciale vient des coefficients \\(Att\\) et \\(Def\\), le reste de la formule des d√©g√¢ts est identique. Nous allons donc utiliser le patron de conception template method, dont voici la mod√©lisation UML dans notre cas :\n\n\n\n\n\nclassDiagram\n\n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    + compute_damage(APkm, APkm)$  int\n  }\n\n   class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n   }\n\n  class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n    -get_attack_stat(APkm)$  float\n    -get_defense_stat(APkm)$  float\n    +compute_damage(APkm,APkm)  int\n  }\n \n  class PhysicalFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n  class SpecialFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n   AbstractAttack &lt;|-- FixedDamageAttack\n   AbstractAttack &lt;|-- AbstractFormulaAttack\n   AbstractFormulaAttack &lt;|-- SpecialFormulaAttack\n   AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack\n\n\n\n\n\n\nLa classe AbstractFormulaAttack va contenir :\n\nla m√©thode compute_damage(pkmon_attacker: AbstratPokemon, pkmon_targeted: AbstractPokemon). Cette m√©thode va contenir la formule de calcul des d√©g√¢ts, mais en appelant les m√©thodes get_attaque_stat(AbstractPokemon) et get_defense_stat(AbstractPokemon) pour savoir quelle statistique utiliser\nles m√©thodes abstraites get_attack_stat(AbstractPokemon) et get_defense_stat(AbstractPokemon). Ces m√©thodes devront √™tre impl√©ment√©es dans les classes filles pour d√©terminer quelles statistiques utiliser.\n\n\n\nQuestion 6 : Impl√©mentez les 3 nouvelles classes et cr√©ez des tests pour v√©rifier que tout fonctionne correctement"
  },
  {
    "objectID": "doc/tp/tp1.html#architecture-finale-bonus-si-vous-avez-le-temps",
    "href": "doc/tp/tp1.html#architecture-finale-bonus-si-vous-avez-le-temps",
    "title": "Retour sur la POO, objets m√©tier et patron de conception strategy",
    "section": "4 Architecture finale (bonus, si vous avez le temps)",
    "text": "4 Architecture finale (bonus, si vous avez le temps)\nNous allons maintenant rattacher les bouts pour cr√©er notre architecture finale :\n\n\n\n\n\nclassDiagram\n  class AbstractPokemon {\n    &lt;&lt;abstract&gt;&gt;\n    # _current_stat : Statistique\n    # _level : int\n    # _name : str\n    # _attack_list : List~AbstractAttack~\n    +get_pokemon_attack_coef()$  float\n    +level_up() None\n  }\n \n  class Statistique {\n    - hp : int\n    - attaque : int\n    - defense : int\n    - spe_atk : int\n    - spe_def : int\n    - vitesse : int\n  }\n   \n  class BattleService {\n    + resolve_battle(APkm, APkm) : Battle\n    + get_order(APkm, APkm)\n    + choose_attack(APkm) : AAttack\n  }  \n  \n  class Battle{\n    - first_monstie : APkm\n    - second_monstie : APkm\n    - winner : APkm\n    - rounds : List&lt;Round&gt;\n  }\n\n  class Round{\n    attacker: APkm\n    defender: APkm\n    dealt_damage: int\n    attack_description: str\n  }\n  BattleService ..&gt;\"2\" AbstractPokemon : use\n  AbstractPokemon &lt;|-- Attacker\n  AbstractPokemon &lt;|-- Defender\n  AbstractPokemon &lt;|-- AllRounder\n  Statistique *-- AbstractPokemon\n\n  Battle .. BattleService\n  Battle .. Round\n \n  class AbstractAttack{\n    &lt;&lt;abstract&gt;&gt;\n    # _power : int\n    # _name : str\n    # _description : str\n    +compute_damage(APkm, APkm)$ int\n  }\n\n  class FixedDamageAttack{\n    + compute_damage(APkm,APkm )  int\n  }\n\n  class AbstractFormulaAttack{\n    &lt;&lt;abstract&gt;&gt;\n    -get_attack_stat(APkm)$  float\n    -get_defense_stat(APkm)$  float\n    + compute_damage(APkm,APkm ) int\n  }\n \n  class PhysicalFormulaAttack{\n   -get_attack_stat(APkm)$  float\n   -get_defense_stat(APkm)$  float\n  }\n \n  class SpecialFormulaAttack{\n    -get_attack_stat(APkm)  float\n    -get_defense_stat(APkm)  float\n  }\n \n  AbstractAttack &lt;|-- FixedDamageAttack\n  AbstractAttack &lt;|-- AbstractFormulaAttack\n  AbstractFormulaAttack &lt;|-- SpecialFormulaAttack\n  AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack\n  BattleService &gt;.. AbstractAttack  : use\n  AbstractPokemon o--&gt;\"0..*\" AbstractAttack\n\n\n\n\n\n\n\n\n\nQuestion 7 : Impl√©mentez le diagramme de classe ci-dessus et testez votre code en √©crivant de nouveaux tests unitaires.\n\n\nCette architecture permet de d√©corr√©ler les attaques des pok√©mons et de sp√©cifier le comportement des attaques au fur et √† mesure des h√©ritages. Les avantages sont :\n\nPour la classe AbstractPokemon, toutes les attaques sont des AbstractAttack. Tant qu‚Äôelles exposent la m√©thode compute_damage notre programme va fonctionner. On peut ainsi facilement ajouter de nouveaux types d‚Äôattaques sans probl√®me.\nUn Pok√©mon peut avoir des attaques de tous les types\nNous pouvons ajouter un syst√®me d‚Äô√©tat comme la paralysie ou le poison assez facilement. Il faut pour cela modifier la classe AbstractAttack et les classes qui en h√©ritent. Cela sera potentiellement long, mais ne demande pas de toucher √† la partie ‚ÄúPok√©mon‚Äù de notre architecture.\nUne personne pourrait se concentrer sur la cr√©ation des Pok√©mons alors qu‚Äôune autre pourrait se concentrer sur celles des attaques sans difficult√©. Les deux parties du code sont relativement ind√©pendantes, la seule zone de couplage sont les classes AbstractPokemon et AbstractAttack, qui servent avant tout √† d√©finir ce qui doit √™tre fait par les classes filles et ce qui est accessible √† l‚Äôext√©rieur.\n\nLe fait d‚Äôexternaliser le comportement des attaques dans des classes sp√©cifiques puis de les lier aux Pok√©mons via une relation d‚Äôagr√©gation assez souple qui permet de changer dynamiquement les attaques d‚Äôun Pok√©mon est le patron de conception strategy."
  },
  {
    "objectID": "doc/tp/tp4.html",
    "href": "doc/tp/tp4.html",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "",
    "text": "üò± Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il m√©lange explications compl√®tes et manipulations pour √™tre au maximum autosuffisant. Vous n‚Äôallez surement pas terminer le sujet, ce n‚Äôest pas grave. Il est l√† pour vous aider lors du projet informatique.\nCe TP m√™le explications pour vous faire comprendre ce qui est fait, et phases de manipulation ou code. Ces phases sont appel√©es ‚Äú‚úçÔ∏èHands on‚Äù. C‚Äôest √† ce moment-l√† que vous devez faire ce qui est √©crit dans le TP. Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez-les comme une base de connaissances pour plus tard, mais pr√©f√©rez toujours les explications orales.\nDans ce TP vous allez :\nLes instructions de ce TP seront donn√©es pour une utilisation de GitHub comme d√©p√¥t distant. Si vous choisissez GitLab ou un autre h√©bergeur, √† vous de vous adapter (les instructions devraient √™tre assez ressemblantes)."
  },
  {
    "objectID": "doc/tp/tp4.html#configuration-de-git",
    "href": "doc/tp/tp4.html#configuration-de-git",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "1 Configuration de Git",
    "text": "1 Configuration de Git\nPour faire d‚Äôun seul coup la config Git et la cr√©ation d‚Äôun cl√© ssh, vous pouvez utiliser les scripts pr√©sents sur la page Moodle du cours, onglet TP. Sinon cela se fait √©galement tr√®s vite avec les commandes ci-dessous.\n\n1.1 Configurez Git\nOuvrez Git Bash, puis √©x√©cutez les commandes suivantes en rempla√ßant les valeurs entre &lt;&gt;\n\ngit config --global user.name &lt;prenom&gt; &lt;nom&gt;\ngit config --global user.email &lt;mail_ensai&gt;\ngit config --global core.mergeoptions --no-edit\ngit config --global core.editor \"code -w\"\ngit config --global credential.helper store\npour v√©rifier les valeurs saisies : git config -l\n\n\n\n\n1.2 Cr√©ez une cl√© ssh\nElle permettra de vous authentifier aupr√®s de GitHub. Dans Git Bash :\n\nssh-keygen -t rsa -b 2048 -N '' -q -f ~/.ssh/id_rsa\nmkdir /p/save puis cp -r ~/.ssh /p/save/.ssh pour cr√©er une sauvegarde de votre cl√©\n\nPar d√©faut la cl√© est g√©n√©r√©e dans C:/users/idxxxx/.ssh\nSi jamais cette cl√© venait √† disparaitre, utilisez la sauvegarde pour la recopier dans C:/users/idxxxx/.ssh\n\ncat ~/.ssh/id_rsa.pub | clip\n\npour r√©cup√©rer votre cl√© publique dans le presse papier\n\nOuvrez un √©diteur de texte et collez cette cl√©\n\ngardez la de cot√© quelques minutes, vous allez devoir juste apr√®s coller cette cl√© dans GitHub\n\n\n\n\n\n1.3 Cr√©ation de compte sur GitHub\n\nCr√©ez un compte utilsateur\n\nhttps://github.com/join\n\nAjouter votre cl√© publique ssh sur GitHub (lien direct)\n\nCliquez sur votre icone profil en haut √† droite\n‚öôÔ∏è Settings\nSSH and GPG keys\nCliquer sur le bouton New SSH key\n\nTitre : VM ENSAI par exemple\nKey : Collez la cl√© publique (contenu du fichier id_rsa.pub qui commence par ssh-rsa g√©n√©r√© √† l‚Äô√©tape pr√©c√©dente )"
  },
  {
    "objectID": "doc/tp/tp4.html#travail-en-groupe",
    "href": "doc/tp/tp4.html#travail-en-groupe",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "2 Travail en groupe",
    "text": "2 Travail en groupe\nüí° Avec vos camarades de projet, vous devez choisir un site qui va h√©berger votre code (GitHub, GitLab‚Ä¶). Il vous servira de d√©p√¥t commun (ou d√©p√¥t distant).\n\n2.1 Cr√©ation d‚Äôun d√©p√¥t sur GitHub\n\nRepositories &gt; New (ou lien direct)\nRepository name : ENSAI-2A-cinfo-TP4\nCliquez sur le bouton Create new repository\n\nPour le moment ce d√©p√¥t distant est vide\n\n\n\n2.2 Connecter ce d√©p√¥t avec un d√©p√¥t local\nDans les autres TP, vous aviez l‚Äôhabitude de simplement cloner le d√©p√¥t distant du prof, faire les exercices et c‚Äôest tout.\nAujourd‚Äôhui, vous allez :\n\nCloner le d√©p√¥t distant\n\nPour cr√©er votre d√©p√¥t local (jusque l√†, c‚Äôest toujours pareil)\n\nConnecter votre d√©p√¥t local √† votre propre d√©p√¥t distant (celui que vous venez de cr√©er)\nInteragir entre vos 2 d√©p√¥ts (push, pull‚Ä¶)\n\n\n\nCr√©ez un dossier puis importez le code du TP (branche tp4_base uniquement)\n\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP4 && cd $_\ngit clone -b tp4_base --single-branch https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\n\nModifiez le d√©p√¥t distant en d√©clarant le d√©p√¥t que vous avez cr√©√© juste avant\n\ncd ENSAI-2A-complement-info-TP pour vous positionner dans le d√©p√¥t local Git\ngit remote set-url origin git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\n\nen rempla√ßant  par votre nom d‚Äôutilisateur GitHub\n\ngit remote -v pour v√©rifier que le d√©p√¥t distant a bien chang√©\n\ngit push pour pousser votre code local vers le d√©p√¥t GitHub\n\nRafra√Æchissez la page GitHub pour v√©rifier\n\n\n\n\n\n2.3 Utilisation d‚Äôun seul d√©p√¥t par √©quipe\nMaintenant vous allez travailler en tant qu‚Äô√©quipe de projet. M√™me si vous avez tous cr√©√© un d√©p√¥t git, un seul par groupe va √™tre utilis√©. Vous allez ainsi au sein d‚Äôune m√™me √©quipe, r√©cup√©rer le code de ce d√©p√¥t.\n‚ö†Ô∏è Choisissez LE d√©p√¥t que vous allez utiliser (1 seul par √©quipe projet) et fa√Ætes les actions suivantes uniquement sur ce d√©p√¥t.\n\nSur la page GitHub du projet\n\nAller dans ‚öôÔ∏è Settings &gt; Collaborators\nCliquer sur le bouton Add people, puis recherchez et ajoutez vos camarades\n\nou directement avec ce lien en rempla√ßant \n\nhttps://github.com/&lt;username_github&gt;/ENSAI-2A-cinfo-TP4/settings/access\n\n\n\n\n\n2.4 Import du d√©p√¥t commun pour les autres membres\nPour les autres, il vous faut maintenant tous r√©cup√©rer le contenu du d√©p√¥t. Dans les commandes ci-dessous, remplacez  par le nom d‚Äôutilisateur de celui ou celle qui ‚Äúposs√®de‚Äù le d√©p√¥t commun.\n\nAllez sur la page GitHub du d√©p√¥t commun\n\nhttps://github.com//ENSAI-2A-cinfo-TP4\n\nCliquez sur le bouton Code\nCopiez le lien Clone with SSH qui ressemble √† ceci : git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\nDans Git Bash, cr√©ez un nouveau dossier pour mettre votre d√©p√¥t local\n\nmkdir -p /p/Cours2A/UE3_Complements_informatique/TP/TP4/depot_commun && cd $_\ngit clone git@github.com:&lt;username_github&gt;/ENSAI-2A-cinfo-TP4.git\nFermez Git Bash\n\nOuvrez Visual Studio Code, puis ouvrez le d√©p√¥t commun\n\nFile &gt; Open Folder\n\nAllez dans /p/Cours2A/UE3_Complements_informatique/TP/TP4/depot_commun\ncliquez une fois sur ENSAI-2A-cinfo-TP4\npuis cliquez sur le bouton S√©lectionner un dossier\n\nOuvrez un Terminal Git Bash dans VSCode (Terminal &gt; New terminal)\n\n\n\n\n2.4.1 ‚ö†Ô∏è Attention quand vous faites Open Folder dans VSCode\nLe dossier parent de l‚Äôexplorer de VSCode (√† gauche) doit √™tre : ENSAI-2A-complement-info-TP. Si c‚Äôest TP1, TP2, TP3, TP ou autre chose ce n‚Äôest pas bon ! Vous allez avoir des soucis d‚Äôimports par la suite."
  },
  {
    "objectID": "doc/tp/tp4.html#manipulations-basiques-avec-git",
    "href": "doc/tp/tp4.html#manipulations-basiques-avec-git",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "3 2. Manipulations basiques avec git",
    "text": "3 2. Manipulations basiques avec git\n‚úçHand on 1 Cette partie √† pour but de vous faire essayer des commandes de bases de git.\n\nCr√©ez dans votre d√©p√¥t local un fichier hello_&lt;prenom&gt;.txt qui contient par exemple hello &lt;prenom&gt;\nDans le terminal, tapez la commande git status pour voir si votre fichier s‚Äôaffiche\nCr√©ez un fichier hello_&lt;prenom&gt;.log qui contient par exemple aaaaa\nTapez git status pour voir si votre fichier s‚Äôaffiche\n\nüí° Normalement il ne s‚Äôaffichera pas car si vous ouvrez le fichier .gitignore, vous remarquerez que tous les fichiers *.log sont ignor√©s par Git.\n\nTapez git add . pour ajouter √† la zone de transit (stagging area) tous les fichiers en attente\ngit status pour v√©rifier que votre fichier hello_&lt;prenom&gt; est pr√™t √† √™tre int√©gr√© au prochain commit\nR√©alisez un commit git commit -m \"un super message de commit explicite\"\nModifiez votre fichier hello_&lt;prenom&gt;.txt puis faites de nouveau les √©tapes pr√©c√©dentes (status, add, status, commit)\nRegardez votre historique avec un git log --all --decorate --oneline --graph\nPoussez vos modifications vers le d√©p√¥t commun avec un git push\n\nSi quelqu‚Äôun a d√©j√† pouss√© avant vous, vous allez obtenir un message proche de celui-ci\n\nTo https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git\nMerge branch 'main' of https://github.com/ludo2ne/ENSAI-2A-complement-info-TP\n ! [rejected]        main -&gt; main (fetch first)\nerror: failed to push some refs to 'https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git'\nhint: Updates were rejected because the remote contains work that you do\nhint: not have locally. This is usually caused by another repository pushing\nhint: to the same ref. You may want to first merge the remote changes (e.g.,\nhint: 'git pull') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\nDans ce cas, faites dans l‚Äôordre\n\ngit pull : pour mettre √† jour votre d√©p√¥t local √† partir du d√©p√¥t distant\ngit push : pour partager vos modifications faites en local vers le d√©p√¥t distant\n\nUne fois que tous les membres de l‚Äô√©quipe ont r√©ussi √† faire leur push, faites tous un git pull pour avoir chacun des d√©p√¥ts identiques."
  },
  {
    "objectID": "doc/tp/tp4.html#g√©rer-un-conflit-avec-git",
    "href": "doc/tp/tp4.html#g√©rer-un-conflit-avec-git",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "4 G√©rer un conflit avec git",
    "text": "4 G√©rer un conflit avec git\n\n4.1 D√©finition\nUn conflit apparait lorsque 2 versions s‚Äôaffrontent et que Git ne peut pas savoir laquelle est la bonne.\nExemple : Un d√©p√¥t commun contient un seul fichier hello.txt qui contient hello world\n\nAlice et Bob clonent ce d√©p√¥t\nEn local Alice modifie le contenu du fichier en hello Alice et fait un add puis commit\nBob fait de m√™me en saisissant hello Bob\nAlice fait un push et met √† jour le d√©p√¥t commun\nBob fait un push et √©choue. Git dit que son d√©p√¥t local n‚Äôest pas √† jour\nBob fait donc un pull pour mettre √† jour son d√©p√¥t local. C‚Äôest √† ce moment que le conflit apparait.\n\nBob voulais modifier le contenu du fichier en Hello Bob alors qu‚ÄôAlice a d√©j√† modifi√© en Hello Alice\n\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\nHello Bob           (Votre modification - current change)\n=======\nHello Alice         (La modification du d√©p√¥t distant - incoming change)\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nBob doit maintenant d√©cider quelle version il souhaite garder\nBob choisit Hello Bob, fait un add, commit, push et c‚Äôest termin√©\n\n\n\n\n4.2 R√©solvez vos conflits\n‚úçHand on 2 Maintenant vous allez essayer de cr√©er, puis r√©soudre un conflit !\n\nChoisissez un fichier commun dont vous allez tous modifier le contenu\nModifiez chacun de votre cot√© (sur vos d√©p√¥t locaux) ce fichier\nPoussez votre code\n\nLa premi√®re personne √† pousser ne devrait pas avoir de conflit, les autres oui. Recommencez la proc√©dure ci-dessus avec un autre fichier pour que tout le monde exp√©rimente la r√©solution de conflits.\nLorsque vous avez un conflit √† g√©rer :\n\nCorrigez √† la main le fichier\n\npar exemple en imposant votre modification\net en supprimant les ======= et les &gt;&gt;&gt;&gt;&gt;&gt;&gt;\n\ngit add . puis git commit -m \"mon super message\" && git push\n\nEn conclusion, avoir des conflits n‚Äôest pas grave m√™me si c‚Äôest un peu p√©nible √† r√©soudre. Pour essayer d‚Äô√©viter les conflits :\n\nfaites des pull et push r√©guliers\nessayez de travailler en √©quipe mais sur des fichiers diff√©rents"
  },
  {
    "objectID": "doc/tp/tp4.html#bilan-des-trois-premiers-tp",
    "href": "doc/tp/tp4.html#bilan-des-trois-premiers-tp",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "5 Bilan des trois premiers TP",
    "text": "5 Bilan des trois premiers TP\nSi l‚Äôon reprend le mod√®le en couches pr√©sent√© en cours, voici ce que l‚Äôon a fait depuis le d√©but des TP :\n\n\n5.1 La couche service\nActuellement notre couche service est bien maigre. En effet notre application n‚Äôa aucune logique m√©tier. On a bien des objets m√©tiers que l‚Äôon persiste mais aucune r√©elle application derri√®re. La raison √† ce manque provient du fait que cette couche est la partie la plus longue √† d√©velopper car elle contient la logique m√©tier de l‚Äôapplication.\nEt le but de ces TP n‚Äôest pas de vous montrer comment faire une petit application type jeu Pok√©mon en console. Ils ont pour vocations √† vous montrer une architecture de base en couche et vous pr√©senter comment la r√©aliser. Dans votre projet, il est possible que ce soit la couche service qui vous demande le plus de travail.\n\n\n\n5.2 La couche contr√¥leur\nLa notion de contr√¥leur apparait avec le design pattern MVC (Model-View-Controler). Mais c‚Äôest un patron de conception beaucoup trop complexe pour faire un simple affichage en console.\n√Ä la place vous allez utiliser le patron Model-View-Presenter qui est plus simple car il reprend le principe de couches qui se succ√®dent.\nIl n‚Äôy aura donc pas de couche Controleur mais une couche View qui fera office d‚ÄôIHM et appelera directement les services n√©cessaires.\n\n\n\n5.3 La couche view\nLe fonctionnement est le suivant lorsque vous lancez l‚Äôapplication :\n\nvous arrivez sur une vue d‚Äôaccueil qui propose diff√©rents choix\nselon le choix, z√©ro, un ou plusieurs services sont appel√©s\npuis vous arrivez vers une nouvelle vue (ou √©ventuellement resterez sur la m√™me)\n\nExemple :\n\nVous √™tes sur la Vue d‚Äôaccueil et vous s√©lectionner se connecter\nVous basculez vers la Vue de connexion\n\ndans cette vue, on vous demande de saisir user et password\nune fois la saisie termin√©e, le Service des utilisateur va √™tre appel√©\nce service a une m√©thode verification_connexion()\n\ncette m√©thode va appeler la DAO Utilisateur pour v√©rifier que l‚Äôutilisateur et son mot de passe existent bien en base de donn√©es\n\n\nsi la v√©rification est ok, vous basculez vers la Vue Menu utilisateur o√π va par exemple s‚Äôafficher la liste des actions autoris√©es\n‚Ä¶"
  },
  {
    "objectID": "doc/tp/tp4.html#une-session-pour-les-gouverner-toutes",
    "href": "doc/tp/tp4.html#une-session-pour-les-gouverner-toutes",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "6 Une session pour les gouverner toutes",
    "text": "6 Une session pour les gouverner toutes\nL√† vous pouvez vous dire :\n\nok on va se balader de vues en vues, √ßa √ßa va\nmais imaginons l‚Äôexemple suivant :\n\non passe par la Vue de connexion et on se connecte avec l‚Äôutilisateur Michel\non arrive sur la Vue Menu utilisateur et on se balade dans les diff√©rentes vues\nun peu plus tard, on arrive sur la Vue d‚Äôajout de Pokemon, on s√©lectionne celui qui nous plait et on valide\ncela va aboutir √† l‚Äôappel d‚Äôune m√©thode DAO du type ajouter_pokemon(utilisateur, pokemon)\nCette m√©thode a 2 arguments\n\npokemon : ok facile √† r√©cup√©rer, on vient juste avant de le s√©lectionner\nutilisateur : l√† c‚Äôest moins facile car la derni√®re fois qu‚Äôon avait l‚Äôobjet utilisateur √† port√©e c‚Äô√©tait dans la Vue de connexion\n\n\nEst-ce que une fois connect√©, on doit passer l‚Äôutilisateur en param√®tre de toutes les m√©thodes que l‚Äôon va appeler ?\n\nHeureusement NON, ce serait trop compliqu√©\nüí° c‚Äôest ici que l‚Äôobjet Session va nous √™tre utile\n\n\nDans notre Session, nous allons pouvoir stocker des objets utiles, par exemple l‚Äôutilisateur actif.\nAinsi, une fois connect√©, on stocke l‚Äôutilisateur en session et on peut se servir de cet objet √† tout moment !\nVoici les liens entre notre Session et nos Views :\n\n\n\n\n\nclassDiagram\n\nclass Session{\n    &lt;&lt;singleton&gt;&gt;\n    user_name : str\n    selected_pokemon : AbstractPokemon\n}\n\nclass AbstractView{\n    &lt;&lt;abstract&gt;&gt;\n    +display_info()* None\n    +make_choice()* AbstractView\n}\n\nclass StartView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nclass ListPokemonView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nclass ListAttackView{\n    +display_info() None\n    +make_choice() AbstractView\n}\n\nSession &lt;..AbstractView: \"use\"\n\nAbstractView &lt;|-- StartView\nAbstractView &lt;|-- ListPokemonView\nAbstractView &lt;|-- ListAttackView\n\n\n\n\n\n\nToute nos Views vont h√©riter de la classe AbstractView. Cette classe va contenir deux m√©thodes abstraites :\n\ndisplay_info() : qui va juste d√©terminer l‚Äôaffichage en console\nmake_choice() : qui va g√©rer les choix de l‚Äôutilisateur et l‚Äôenvoyer vers une autre page.\n\nEn plus de cela nous allons g√©rer tous les attributs utilis√©s par les View dans un objet Session qui sera un singleton ce qui nous assurera que chaque acc√®s √† cet objet retourne la m√™me instance et donc les m√™mes valeurs stock√©es.\nCette architecture vous permet de s√©parer vos diff√©rents menu en fichiers s√©par√©s et d‚Äôavoir un fonctionnement simple car chaque menu retourne un autre menu simplement.\n‚ö†Ô∏è La cr√©ation de vos menus peut g√©n√©rer des probl√®mes de d√©pendances circulaires. En effet si la page A envoie sur la page B et la page B envoie sur la page A, en fonction de la fa√ßon dont vous g√©rez vos imports vous allez voir un probl√®me de d√©pendances circulaires. Quand le probl√®me se pr√©sentera voici 2 solutions possibles :\n\nremplacer from X import Y en import Y as name\nd√©placer vos imports dans la fonction qui en a besoin"
  },
  {
    "objectID": "doc/tp/tp4.html#inquirerpy",
    "href": "doc/tp/tp4.html#inquirerpy",
    "title": "Git et Cr√©ation d‚Äôune IHM",
    "section": "7 InquirerPy",
    "text": "7 InquirerPy\nPour nous faciliter la gestion de la console nous allons utiliser la biblioth√®que python InquirerPy. Elle permet de cr√©er facilement des applications interactives en console. Le projet est bien document√© avec plusieurs exemples de code, faciles √† transposer.\n\nLancez le __main__.py et testez un peu l‚Äôapplication\nRegardez les fichiers du package view pour essayer de comprendre comment fonctionnent les vues. Le principe est toujours le m√™me lorsque l‚Äôon arrive sur une nouvelle vue :\n\non r√©pond aux questions demand√©es\nun traitement est √©ventuellement fait (appel √† des services)\non bascule vers une autre vue\n\n\n\n7.1 Mes premi√®res View\n‚úçHand on 3\nR√©partissez vous le travail entre membre du groupe pour impl√©menter les Views suivantes :\n\nAffichage Pok√©mon:\n\nPokemonListView : qui permet de visualiser 30 Pok√©mons sommairement. Il est possible de s√©lectionner un pok√©mon pour aller sur PokemonDetailsView. Vous pouvez permettre un retour arri√®re sur la StartView si vous le souhaitez.\nPokemonDetailsView : qui affiche les d√©tails du Pok√©mon s√©lectionn√© comme ses statistiques et ses attaques. Renvoie sur la StartView ou PokemonListeView en fonction du choix de l‚Äôutilisateur.\n\nAffichage attaque:\n\nAttackListView : qui permet de visualiser 50 attaques sommairement et d‚Äôen s√©lectionner une pour aller sur AttackDetailsView. Vous pouvez permettre un retour arri√®re sur la StartView.\nAttackDetailsView : qui affiche les d√©tails de l‚Äôattaque s√©lectionn√©e, comme par exemple ses caract√©ristiques (name, power, description), mais √©galement quels sont les Pok√©mons qui peuvent l‚Äôapprendre. Renvoie sur la StartView ou AttackListView en fonction du choix de l‚Äôutilisateur.\n\nCreatePokemonView : qui permet de cr√©er un Pok√©mon et le mettre en session. Apr√®s validation de l‚Äôutilisateur on retourne sur StartView\n\nQuelques astuces :\n\nPokemonService dispose d‚Äôune m√©thode get_pokemon_from_webservice(limit:int, offset:int) pour r√©cup√©rer des pok√©mons de la base\nAttackService dispose d‚Äôune m√©thode get_attacks_from_webservice(limit:int, offset:int) pour r√©cup√©rer des attaques de la base\nde nombreux exemples sont disponibles sur la doc InquirerPy\n\nQuand vous avez termin√© une classe, faites un commit, puis poussez sur le d√©p√¥t distant.\n\nMerci d‚Äôavoir particip√© et Vive les Pokemons !"
  }
]